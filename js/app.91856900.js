(function(){"use strict";var e={2884:function(e,t,a){var n=a(5130),o=a(6768),i=a(144),l=a(4232),r=a.p+"img/github-mark-white.fd5c0afd.svg",s=a.p+"img/world-map-coordinates-correct.be5765fb.png",u=a(9691),d=a(9578),c=a(7383),h=a(3911),m=a.n(h);function p(e,t,a,n,i,l){const r=(0,o.g2)("TresSphereGeometry"),s=(0,o.g2)("TresMeshBasicMaterial"),u=(0,o.g2)("TresMesh"),d=(0,o.g2)("TresObject3D");return(0,o.uX)(),(0,o.Wv)(d,{position:e.position},{default:(0,o.k6)((()=>[(0,o.bF)(u,null,{default:(0,o.k6)((()=>[(0,o.bF)(r,{args:[.5,20,16]}),(0,o.bF)(s,{color:"#ffffff"})])),_:1})])),_:1},8,["position"])}var v=(0,o.pM)({name:"SunObject",props:{position:{required:!0,type:Array}}}),f=a(1241);const g=(0,f.A)(v,[["render",p]]);var b=g,k=a(9428),w=a(7760),y=a(8776);function R(e){return e*Math.PI/180}function M(e,t,a,n){const o=n*Math.PI/180,i=a*Math.PI/180,l=8400.5+e+t/1440,r=l+37/86400,s=r+32.184/86400,u=(R(280.46)+R(.9856474)*s)%(2*Math.PI),d=(R(357.528)+R(.9856003)*s)%(2*Math.PI),c=u+R(1.915)*Math.sin(d)+R(.02)*Math.sin(2*d),h=R(23.4393)-R(4e-7)*s,m=Math.atan2(Math.cos(h)*Math.sin(c),Math.cos(c)),p=Math.asin(Math.sin(h)*Math.sin(c)),v=Math.trunc(l+.5)-.5,f=24*(l-v),g=s/36525,b=(6.697375+.065707485828*v+1.0027379*f+.0854103*g+258e-7*Math.pow(g,2))*Math.PI/12,k=R(125.04)-R(.052954)*s,w=(-319e-6*Math.sin(k)-24e-6*Math.sin(2*u))*Math.PI/12,y=w*Math.cos(h),M=b+y,L=M+o,x=L-m,_=-Math.atan2(Math.cos(p)*Math.sin(x),-Math.sin(i)*Math.cos(p)*Math.cos(x)+Math.cos(i)*Math.sin(p)),I=Math.asin(Math.sin(i)*Math.sin(p)+Math.cos(i)*Math.cos(p)*Math.cos(x));return{azimuth:_,altitude:I}}function L(e,t,a=15){return{x:a*Math.sin(e)*Math.cos(t),y:a*Math.sin(t),z:a*-Math.cos(e)*Math.cos(t)}}function x(e,t){return new y.Vector3(Math.sin(e),-Math.cos(e)*Math.cos(t),-Math.cos(e)*Math.sin(t))}function _(e,t,a){const n=x(e,t),o=new y.Vector3(0,Math.sin(t),-Math.cos(t)),i=n.clone().cross(o),l=i.clone().cross(a);return l}function I(e){const t=Math.floor((e/60%24+24)%24).toString().padStart(2,"0"),a=Math.floor((e%60+60)%60).toString().padStart(2,"0");return`${t}:${a}`}function E(e){const t=e.match(/^\s*([0-9]+)(?::([0-9]*))?\s*$/);if(!t)return NaN;const a=Number.parseInt(t[1]);if(a<0||a>23)return NaN;let n=0;return t[2]&&""!=t[2]&&(n=Number.parseInt(t[2]),n<0||n>59)?NaN:60*a+n}function S(e){const t=new Date(Date.parse("2001")+24*e*60*60*1e3);return t.toLocaleDateString(void 0,{month:"long",day:"numeric"})}function V(e){const t=e>0?"+":e<0?"-":"Â±",a=Math.abs(Math.trunc(e/60)),n=Math.abs(e%60);let o=t+a.toString();return 0!=n&&(o+=":"+n.toString()),o}function T(e,t,a){const n=new y.Ray(t,a);let o=n.intersectPlane(e,new y.Vector3);if(o)return{dir:1,point:o};const i=new y.Ray(t,a.clone().multiplyScalar(-1));return o=i.intersectPlane(e,new y.Vector3),o?{dir:-1,point:o}:null}function P(e,t,a,n){const o=e.distanceToSquared(a)-Math.pow(t,2),i=-2*e.clone().sub(a).multiply(n).dot(new y.Vector3(1,1,1)),l=Math.pow(n.length(),2),r=Math.pow(i,2)-4*l*o;return r<0?[]:[(-i-Math.sqrt(r))/(2*l),(-i+Math.sqrt(r))/(2*l)]}function F(e){return 60*Math.round(e/360*24)}function $(e,t,a){const n=e.normal,o=t.normal,i=a.normal,l=e.coplanarPoint(new y.Vector3),r=t.coplanarPoint(new y.Vector3),s=a.coplanarPoint(new y.Vector3),u=(new y.Vector3).crossVectors(o,i).multiplyScalar(l.dot(n)),d=(new y.Vector3).crossVectors(i,n).multiplyScalar(r.dot(o)),c=(new y.Vector3).crossVectors(n,o).multiplyScalar(s.dot(i)),h=(new y.Matrix3).set(n.x,n.y,n.z,o.x,o.y,o.z,i.x,i.y,i.z).determinant();if(0==h)return null;const m=(new y.Vector3).add(u).add(d).add(c),p=new y.Vector3(m.x/h,m.y/h,m.z/h);return p}function A(e,t,a,n,i,r){const s=(0,o.g2)("TresMeshPhongMaterial"),u=(0,o.g2)("Text3D"),d=(0,o.g2)("TresObject3D");return(0,o.uX)(),(0,o.Wv)(d,{position:e.position,rotation:[-Math.PI/2,0,0]},{default:(0,o.k6)((()=>[((0,o.uX)(),(0,o.Wv)(o.tY,null,{default:(0,o.k6)((()=>[(0,o.bF)(u,{font:"./fonts/PTSerif_Regular.json",size:.2,"bevel-enabled":!1,height:.05,"cast-shadow":e.castShadow,"receive-shadow":e.receiveShadow,"need-updates":"",center:""},{default:(0,o.k6)((()=>[(0,o.eW)((0,l.v_)(e.text)+" ",1),(0,o.bF)(s,{color:"#737373"})])),_:1},8,["cast-shadow","receive-shadow"])])),_:1}))])),_:1},8,["position","rotation"])}var W=(0,o.pM)({name:"SundialLetter",props:{text:{required:!0,type:String},position:{required:!0,type:Array},castShadow:{required:!1,default:!1,type:Boolean},receiveShadow:{required:!1,default:!1,type:Boolean}},components:{Text3D:d.xg}});const X=(0,f.A)(W,[["render",A]]);var C=X;const O=(0,o.pM)({name:"SundialObject",components:{SundialLetter:C}});var z=(0,o.pM)({...O,props:{latitude:{required:!1,default:0,type:Number},radius:{required:!0,type:Number},gnomonPosition:{required:!0,default:()=>[0,1,0],type:Array},origin:{required:!0,default:()=>new y.Vector3(0,-1,0),type:Object},rotation:{required:!0,default:()=>new y.Euler(0,0,0),type:Object},hourLabels:{required:!0,type:Array}},setup(e){const t=e,a=(0,o.EW)((()=>(90-t.latitude)*Math.PI/180)),n=(0,o.EW)((()=>{const e=(new y.Matrix4).makeRotationFromEuler(t.rotation).invert().multiply((new y.Matrix4).makeRotationFromEuler(new y.Euler(-a.value,0,0)));return(new y.Euler).setFromRotationMatrix(e)}));return(t,a)=>{const l=(0,o.g2)("TresCylinderGeometry"),r=(0,o.g2)("TresMeshPhongMaterial"),s=(0,o.g2)("TresMesh"),u=(0,o.g2)("TresObject3D");return(0,o.uX)(),(0,o.Wv)(u,{position:e.origin,rotation:new((0,i.R1)(y.Euler))(...e.rotation.toArray())},{default:(0,o.k6)((()=>[(0,o.bF)(s,{position:[0,-.05,0],"cast-shadow":"","receive-shadow":""},{default:(0,o.k6)((()=>[(0,o.bF)(l,{args:[e.radius,e.radius,.1]},null,8,["args"]),(0,o.bF)(r,{color:"#f9ecec"})])),_:1}),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)(e.hourLabels,(({hour:e,label:t,labelPoint:a})=>((0,o.uX)(),(0,o.Wv)(C,{key:e,text:a?t:"",position:a??[0,0,0],"receive-shadow":""},null,8,["text","position"])))),128)),(0,o.bF)(s,{position:e.gnomonPosition,rotation:n.value,"cast-shadow":"","receive-shadow":""},{default:(0,o.k6)((()=>[(0,o.bF)(l,{args:[.05,.05,2]}),(0,o.bF)(r,{color:"#b7b7b7"})])),_:1},8,["position","rotation"])])),_:1},8,["position","rotation"])}}});const U=z;var j=U;const q=(0,o.pM)({name:"CameraOffsetHelper",components:{}});var K=(0,o.pM)({...q,props:{xOffset:{required:!0,type:Number}},setup(e){const{camera:t,sizes:a}=(0,u.lG)(),n=e;return(0,o.wB)((()=>[a.width.value,a.height.value,n.xOffset]),(()=>{const e=(a.width.value+2*Math.abs(n.xOffset))/a.width.value;t.value?.isPerspectiveCamera&&t.value.setViewOffset(a.width.value*e,a.height.value*e,n.xOffset>0?2*n.xOffset:0,a.height.value*(e-1)/2,a.width.value,a.height.value)}),{immediate:!0}),()=>{}}});const N=K;var Z=N;const B=(0,o.pM)({name:"RendererHelper",components:{}});var D=(0,o.pM)({...B,setup(e){const{renderer:t}=(0,u.lG)();return t.value.setPixelRatio(window.devicePixelRatio),()=>{}}});const H=D;var G=H,J=a.p+"img/Equation_of_time.fb12789b.svg";const Y=(0,o.Fv)('<p style="margin-top:0;" data-v-53974f78><b data-v-53974f78>Apparent solar time</b> is the time based on the observed local position of the sun. 12 noon is the exact time at which the sun is highest in the sky.</p><p data-v-53974f78>However, if you measure the length of time between two consecutive solar noons, the measurement could differ from 24 hours by -21 to +30 seconds. (see the <a href="https://en.wikipedia.org/wiki/Solar_time" target="_blank" data-v-53974f78>Wikipedia article on Solar Time</a> for an explanation).</p><p data-v-53974f78>Instead, in <b data-v-53974f78>Mean solar time</b>, every day is exactly<b data-v-53974f78>*</b> 24 hours long. This is more useful, but due to those small deviations in the length of the solar day adding up, the mean solar time can differ from the apparent solar time by up to 16 minutes. The relationship between the apparent and mean solar time can be seen in the <b data-v-53974f78>Equation of Time</b>.</p><div style="text-align:center;" data-v-53974f78><img src="'+J+'" alt="Equation of time graph" style="max-height:200px;background-color:white;" data-v-53974f78><br data-v-53974f78></div><i data-v-53974f78>Attribution: By <a href="//commons.wikimedia.org/wiki/File:Equation_of_time.png" title="File:Equation of time.png" target="_blank" data-v-53974f78>Equation of time.png</a>: <a href="//commons.wikimedia.org/wiki/User:Drini" title="User:Drini" target="_blank" data-v-53974f78>User:Drini</a> derivative work: <a href="//commons.wikimedia.org/wiki/User_talk:Zazou" title="User talk:Zazou" target="_blank" data-v-53974f78>Zazou</a> (<a href="//commons.wikimedia.org/wiki/User_talk:Zazou" title="User talk:Zazou" target="_blank" data-v-53974f78><span class="signature-talk" data-v-53974f78>talk</span></a>) - <a href="//commons.wikimedia.org/wiki/File:Equation_of_time.png" title="File:Equation of time.png" target="_blank" data-v-53974f78>Equation of time.png</a>, <a href="http://creativecommons.org/licenses/by-sa/3.0/" title="Creative Commons Attribution-Share Alike 3.0" target="_blank" data-v-53974f78>CC BY-SA 3.0</a>, <a href="https://commons.wikimedia.org/w/index.php?curid=6961998" target="_blank" data-v-53974f78>Link</a></i><p data-v-53974f78>In order to standardize time for different longitudes, <b data-v-53974f78>Coordinated Universal Time (UTC)</b> is used, which represents the mean solar time at 0 degrees longitude (or, within 1 second of it). <b data-v-53974f78>Local standard time</b> is UTC adjusted by the time zone.</p><p data-v-53974f78><i data-v-53974f78><b data-v-53974f78>*</b>Well, almost exactly. The length of the mean solar day actually varies a tiny bit each year compared to International Atomic Time. This sometimes requires a <b data-v-53974f78>leap second</b> be added to or subtracted from UTC.</i></p>',7);function Q(e,t){return Y}const ee={},te=(0,f.A)(ee,[["render",Q],["__scopeId","data-v-53974f78"]]);var ae=te;const ne=[{target:"#app",content:"Click and drag on the sundial to look around, and use the mouse wheel to adjust the zoom.\nZoom out to see the sun's position!",params:{placement:"bottom",enableScrolling:!1}},{target:'[data-v-walkthrough="status"]',content:"Use the sliders to change the <b>Time</b> and <b>Date</b>.\nYou can also click on the digital clock to set the time manually.",params:{placement:"auto",enableScrolling:!1,highlight:!0}},{target:'[data-v-walkthrough="map"]',content:"Sundials work differently depending on the location on Earth.\nSet the location by clicking on the map, or by typing the <b>Latitude</b> and <b>Longitude</b>.",params:{placement:"right",enableScrolling:!1,highlight:!0}},{target:'[data-v-walkthrough="time-zone"]',content:"The <b>Time Zone</b> is set automatically based on the longitude. Instead, to manually input the time zone, uncheck <b>Automatically set time zone</b> and type in the <b>Time Zone</b> box.\n",params:{placement:"right",enableScrolling:!1,highlight:!0}},{target:'[data-v-walkthrough="slant-and-rotation"]',content:"The <b>Slant</b> and <b>Rotation</b> of the sundial can be changed. \nE.g. to simulate a wall-mounted sundial, set the <b>Slant</b> to 90Â° and the <b>Rotation</b> to the direction the wall is facing.",params:{placement:"right",highlight:!0}},{target:'[data-v-walkthrough="hour-lines"]',content:'Sundials often measure <b>Solar time</b>, where solar noon is the time at which the sun is highest in the sky.\nHowever, you may want the sundial to measure an approximation of standard time, taking the longitude and time zone into account. To do this, select <b>Adjusted for time zone</b>. Note that depending on the time of year the reading can be inaccurate by up to 16 min 33 s due to the varying length of the solar day (see <a href="https://en.wikipedia.org/wiki/Equation_of_time" target="_blank">https://en.wikipedia.org/wiki/Equation_of_time</a>).',params:{placement:"right",highlight:!0}}];var oe=a(6778);const ie=e=>((0,o.Qi)("data-v-785b8fce"),e=e(),(0,o.jt)(),e),le={style:{width:"100%",height:"100%",position:"fixed",left:"0",top:"0"}},re={id:"overlay"},se={id:"sidebarContent"},ue=ie((()=>(0,o.Lk)("a",{class:"sidebar_link",href:"https://github.com/tpeach90/sundials/",style:{"text-decoration":"none"},target:"_blank",title:"Source code on github.com"},[(0,o.Lk)("span",{style:{"text-decoration":"underline"}},"code"),(0,o.Lk)("img",{src:r,style:{height:"1em","margin-left":"0.2em"},alt:"GitHub logo"})],-1))),de=ie((()=>(0,o.Lk)("h2",null,"Coordinates",-1))),ce={"data-v-walkthrough":"map"},he={class:"horizontal_settings"},me={class:"setting"},pe=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Latitude/Â°",-1))),ve={key:0,class:"error"},fe={class:"setting"},ge=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Longitude/Â°",-1))),be={key:0,class:"error"},ke={class:"setting"},we=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Time Zone/Â±UTC",-1))),ye={key:0,class:"error"},Re={style:{display:"grid","grid-template-columns":"min-content auto","grid-template-rows":"min-content auto"}},Me={style:{position:"relative","aspect-ratio":"2 / 1"}},Le={class:"setting","data-v-walkthrough":"time-zone"},xe=ie((()=>(0,o.Lk)("label",{for:"autoSelectTimeZone",class:"fieldOption"},"Automatically set time zone",-1))),_e=ie((()=>(0,o.Lk)("br",null,null,-1))),Ie=ie((()=>(0,o.Lk)("h2",null,"Sundial Settings",-1))),Ee={"data-v-walkthrough":"slant-and-rotation"},Se={class:"setting"},Ve=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Slant/Â°",-1))),Te={key:0,class:"error"},Pe={class:"setting"},Fe=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Rotation/Â°",-1))),$e={key:0,class:"error"},Ae={class:"setting","data-v-walkthrough":"hour-lines"},We=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Hour lines",-1))),Xe={class:"checkboxSetting"},Ce=ie((()=>(0,o.Lk)("label",{for:"solarLines",class:"fieldOption"},"Solar time",-1))),Oe={class:"checkboxSetting"},ze=ie((()=>(0,o.Lk)("label",{for:"standardLines",class:"fieldOption"},"Adjusted for time zone",-1))),Ue=ie((()=>(0,o.Lk)("br",null,null,-1))),je={class:"setting"},qe=ie((()=>(0,o.Lk)("label",{class:"fieldTitle"},"Numerals",-1))),Ke={class:"checkboxSetting"},Ne=ie((()=>(0,o.Lk)("label",{for:"arabic",class:"fieldOption"},"Western Arabic (0-23)",-1))),Ze={class:"checkboxSetting"},Be=ie((()=>(0,o.Lk)("label",{for:"roman",class:"fieldOption"},"Roman (I-XXIV)",-1))),De=ie((()=>(0,o.Lk)("br",null,null,-1))),He=ie((()=>(0,o.Lk)("h2",null,"Misc",-1))),Ge={class:"checkboxSetting"},Je=ie((()=>(0,o.Lk)("label",{for:"sunRaysPassThroughEarth",class:"fieldOption"},"Sundial remains illuminated at night",-1))),Ye=ie((()=>(0,o.Lk)("br",null,null,-1))),Qe={class:"status","data-v-walkthrough":"status"},et={style:{display:"flex","flex-direction":"row","align-items":"center"}},tt={style:{display:"flex","margin-left":"10px","justify-content":"end","flex-direction":"column","align-items":"stretch","padding-block":"9px"}},at=ie((()=>(0,o.Lk)("div",{class:"subtitle"},"local standard time",-1))),nt={class:"subtitle"},ot={class:"subtitle"},it={class:"subtitle"},lt={class:"popper_content"},rt={style:{"text-align":"left"}},st=ie((()=>(0,o.Lk)("hr",null,null,-1))),ut={class:"subtitle",style:{"margin-top":"13px"}},dt=(0,o.pM)({name:"App",components:{SundialObject:j,SunObject:b}});var ct=(0,o.pM)({...dt,setup(e){(0,n.$9)((e=>({"449c2f70":(0,i.R1)(xt)})));const t=new y.Vector3(0,-.5,0),a=(0,i.KR)([0,1,0]),r=5,h=4;let p=(0,i.KR)(new y.Euler(0,0,0,"YXZ")),v=(0,o.EW)((()=>new y.Vector3(0,1,0).applyEuler(p.value)));const f=(0,o.nI)();let g=(0,i.KR)(!1);function R(){const e=f?.appContext.config.globalProperties.$tours["walkthrough"];e&&(e.isRunning.value?e.stop():(A(),e.start()))}function A(){f?.appContext.config.globalProperties.$tours["walkthrough"].finish(),g.value=!1}function W(e){e&&A(),g.value=e}let X=(0,i.KR)(720),C=(0,i.KR)(162),O=(0,i.KR)(0),z=(0,i.KR)(0),U=(0,i.KR)(!0),q=(0,i.KR)(0),K=(0,i.KR)("arabic"),N=(0,i.KR)(!1),B=(0,i.KR)("solar"),D=(0,i.KR)(!1),H=(0,i.KR)("");const J=(0,i.KR)(null);function Y(){0==D.value&&(D.value=!0,H.value=I(X.value),(0,o.dY)((()=>J.value?.focus())))}function Q(){if(1==D.value){if(D.value=!1,!J.value)return;const e=E(J.value.value);if(isNaN(e))return;X.value=e}}(0,c.X2F)(J,Q);const ee={latitude:"45.00",longitude:"0.00",timeZone:"+0:00",slant:"0",rotation:"0"},te=/^\s*([+-Â±]?)\s*((?:0?[0-9])|1[0-9])(?::((?:0[0-9])|[1-5][0-9]))?\s*$/;let ie=(0,i.Kh)(ee);const dt=(0,o.EW)((()=>({latitude:{required:k.mw,decimal:k._,minValue:(0,k.Ww)(-90),maxValue:(0,k.cG)(90)},longitude:{required:k.mw,decimal:k._,minValue:(0,k.Ww)(-180),maxValue:(0,k.cG)(180)},timeZone:{isATimeZone:k._$.withMessage("Your time zone should look like +/-HH(:MM)",k._$.regex(te))},slant:{required:k.mw,decimal:k._,minValue:(0,k.Ww)(0),maxValue:(0,k.cG)(180)},rotation:{required:k.mw,decimal:k._,minValue:(0,k.Ww)(-180),maxValue:(0,k.cG)(180)}}))),ct=(0,w.Ay)(dt,ie);(0,o.wB)((()=>ie.longitude),(e=>{ct.value.longitude.$invalid||(O.value=Number.parseFloat(e),U.value&&(ie.timeZone=V(F(O.value))))}),{immediate:!0}),(0,o.wB)((()=>ie.latitude),(e=>{ct.value.latitude.$invalid||(z.value=Number.parseFloat(e))}),{immediate:!0}),(0,o.wB)((()=>ie.timeZone),(e=>{const t=e.match(te);if(t){const e=("-"==t[1]?-1:1)*(60*Number.parseInt(t[2])+Number.parseInt(t[3]??0));X.value=((X.value+e-q.value)%1440+1440)%1440,q.value=e}}),{immediate:!0}),(0,o.wB)((()=>ie.slant),(e=>{ct.value.slant.$invalid||(p.value.x=Number.parseFloat(e)*Math.PI/180)}),{immediate:!0}),(0,o.wB)((()=>ie.rotation),(e=>{ct.value.rotation.$invalid||(p.value.y=-Number.parseFloat(e)*Math.PI/180)}),{immediate:!0});let ht=(0,i.KR)(),mt=(0,i.KR)(!1);function pt(e){if(ht.value){const t=e.offsetX/ht.value.width*360-180,a=90-e.offsetY/ht.value.height*180;ie.longitude=t.toFixed(1),ie.latitude=a.toFixed(1)}}function vt(e){mt.value&&pt(e)}function ft(){mt.value=!0}function gt(e){pt(e)}(0,o.sV)((()=>{window.addEventListener("mouseup",(()=>{mt.value=!1}))}));let bt=(0,i.KR)({clientWidth:0,clientHeight:0});const kt=(0,i.KR)(),wt=new ResizeObserver((()=>{const e=kt.value?.clientWidth??0,t=kt.value?.clientHeight??0;bt.value={clientWidth:e,clientHeight:t}}));(0,o.sV)((()=>{wt.observe(kt.value)})),(0,o.wB)((()=>U.value),(e=>{e&&(ie.timeZone=V(F(O.value)))}));let yt=(0,o.EW)((()=>((X.value-q.value)%1440+1440)%1440)),Rt=(0,o.EW)((()=>M(C.value,yt.value,z.value,O.value))),Mt=(0,o.EW)((()=>L(Rt.value.azimuth,Rt.value.altitude))),Lt=(0,o.EW)((()=>Rt.value.altitude>=0)),xt=(0,o.EW)((()=>Lt.value?"black":"white")),_t=(0,o.EW)((()=>I(X.value))),It=(0,o.EW)((()=>S(C.value))),Et=(0,o.EW)((()=>yt.value+O.value/360*24*60)),St=(0,o.EW)((()=>I(Et.value))),Vt=(0,o.EW)((()=>{const e=z.value*Math.PI/180,t=12*Math.atan2(Mt.value.y*Math.cos(e)+Mt.value.z*Math.sin(e),Mt.value.x)/Math.PI+6,a=(t%24+24)%24*60;return a})),Tt=(0,o.EW)((()=>I(Vt.value))),Pt=(0,o.EW)((()=>V(q.value))),Ft=(0,o.EW)((()=>Rt.value.altitude>.1?1:Rt.value.altitude>-.1?(Rt.value.altitude+.1)/.2:0)),$t=(0,o.EW)((()=>m()(["#02407a","#87CEEB"])(Ft.value))),At=(0,o.EW)((()=>new y.Vector3(...a.value).applyEuler(p.value).add(new y.Vector3(...t)))),Wt=(0,o.EW)((()=>{const e=new y.Plane(v.value,0).translate(new y.Vector3(...t)),a=new y.Vector3(0,-Math.sin(z.value*Math.PI/180),Math.cos(z.value*Math.PI/180));return T(e,At.value,a)})),Xt=(0,o.EW)((()=>Wt.value?.point??null)),Ct=(0,o.EW)((()=>Wt.value?.dir??null));const Ot=[...Array(24).keys()],zt=(0,o.EW)((()=>Ot.map((e=>{let t;return t="standard"==B.value?e-q.value/60+24*O.value/360:e,(60*t%1440+1440)%1440*Math.PI*2/1440})))),Ut=(0,o.EW)((()=>zt.value.map((e=>_(e,z.value*Math.PI/180,new y.Vector3(...v.value)).multiplyScalar(Ct.value??1))))),jt=(0,o.EW)((()=>Xt.value&&Xt.value.distanceTo(t)<1e3?"stylePlateIntersection":"otherIntersection")),qt=(0,o.EW)((()=>{switch(jt.value){case"stylePlateIntersection":return Ot.map((()=>Xt.value));case"otherIntersection":{const e=z.value*Math.PI/180,a=At.value,n=new y.Vector3(0,Math.sin(e),-Math.cos(e)),o=n.clone().add(a),i=n.clone().projectOnPlane(v.value).normalize().multiplyScalar((r+1)*-(Ct.value??1)).add(t),l=(new y.Plane).setFromNormalAndCoplanarPoint(v.value,t),s=(new y.Plane).setFromNormalAndCoplanarPoint(n,i);return zt.value.map((t=>{const n=x(t,e),r=(new y.Plane).setFromCoplanarPoints(n.clone().add(a),a,o),u=$(r,l,s)??i;return u}))}default:return[]}}));let Kt=(0,o.EW)((()=>Ot.map(((e,a)=>{const n=qt.value[a],o=Ut.value[a],i=P(new y.Vector3(...t),r,n,o);return 0==i.length||i[0]<0&&i[1]<0?[]:(i[0]<0&&(i[0]=0),i)})))),Nt=(0,o.EW)((()=>v.value.clone().normalize().multiplyScalar(.007))),Zt=(0,o.EW)((()=>Ot.map(((e,a)=>{const n=qt.value[a],o=Ut.value[a],i=Kt.value[a];return{hour:e,label:(()=>{switch(K.value){case"arabic":return e.toString();case"roman":return["XXIV","I","II","III","IV","V","VI","VII","VIII","IX","X","XI","XII","XIII","XIV","XV","XVI","XVII","XVIII","XIX","XX","XXI","XXII","XXIII"].at(e)??""}})(),points:0==i.length?null:[o.clone().multiplyScalar(i[0]).add(n).add(Nt.value),o.clone().multiplyScalar(i[1]).add(n).add(Nt.value)],labelPoint:(()=>{const e=P(new y.Vector3(...t),h,n,o);if(0==e.length)return null;if(e[1]<0)return null;const a=o.clone().multiplyScalar(e[1]).add(n);return"stylePlateIntersection"==jt.value&&n.distanceTo(a)<3?null:(a.sub(t).applyMatrix4((new y.Matrix4).makeRotationFromEuler(p.value).invert()),a.toArray())})()}}))));return(e,c)=>{const h=(0,o.g2)("v-tour"),m=(0,o.g2)("TresPerspectiveCamera"),v=(0,o.g2)("TresDirectionalLight"),f=(0,o.g2)("TresAmbientLight"),k=(0,o.g2)("TresGridHelper");return(0,o.uX)(),(0,o.CE)(o.FK,null,[(0,o.bF)(h,{name:"walkthrough",steps:(0,i.R1)(ne),options:{labels:{buttonSkip:"Close",buttonPrevious:"Previous",buttonNext:"Next",buttonStop:"Finish"}}},null,8,["steps"]),(0,o.Lk)("div",le,[(0,o.bF)((0,i.R1)(u.rs),{"clear-color":(0,i.R1)($t),shadows:"",shadowMapType:(0,i.R1)(y.BasicShadowMap)},{default:(0,o.k6)((()=>[(0,o.bF)(m),(0,o.bF)(j,{latitude:(0,i.R1)(z),origin:(0,i.R1)(t),rotation:(0,i.R1)(p),"gnomon-position":a.value,"hour-labels":(0,i.R1)(Zt),radius:r},null,8,["latitude","origin","rotation","gnomon-position","hour-labels"]),(0,o.bF)(b,{position:[(0,i.R1)(Mt).x,(0,i.R1)(Mt).y,(0,i.R1)(Mt).z]},null,8,["position"]),((0,o.uX)(!0),(0,o.CE)(o.FK,null,(0,o.pI)((0,i.R1)(Zt),(e=>((0,o.uX)(),(0,o.Wv)((0,i.R1)(d.Xk),{key:e.hour,"line-width":1,points:e.points??[[0,0,0],[0,0,0]],color:"#FFFFFF"},null,8,["points"])))),128)),(0,o.bF)(v,{position:[(0,i.R1)(Mt).x,(0,i.R1)(Mt).y,(0,i.R1)(Mt).z],intensity:(0,i.R1)(N)?1:(0,i.R1)(Ft),"shadow-mapSize-width":2048,"shadow-mapSize-height":2048,"cast-shadow":""},null,8,["position","intensity"]),(0,o.bF)(f,{color:"#AAAAAA"}),(0,o.bF)((0,i.R1)(d.NU),{"enable-damping":!1,"rotate-speed":.5,"enable-pan":!1,target:[0,0,0]}),(0,o.bF)(k,{args:[50,50,"#AAAAAA","#AAAAAA"],position:[0,-8,0]}),(0,o.bF)(Z,{"x-offset":-(0,i.R1)(bt).clientWidth/2},null,8,["x-offset"]),(0,o.bF)(G)])),_:1},8,["clear-color","shadowMapType"])]),(0,o.Lk)("div",re,[(0,o.Lk)("div",{id:"sidebar",ref_key:"sidebar",ref:kt},[(0,o.Lk)("div",se,[(0,o.Lk)("a",{class:"sidebar_link",onClick:c[0]||(c[0]=e=>{e.preventDefault(),R()}),href:"javascript:void(0)"},"walkthrough"),(0,o.eW)(" Â· "),ue,de,(0,o.Lk)("div",ce,[(0,o.Lk)("div",he,[(0,o.Lk)("div",me,[pe,(0,o.bo)((0,o.Lk)("input",{class:"small_input","onUpdate:modelValue":c[1]||(c[1]=e=>(0,i.R1)(ct).latitude.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).latitude.$model]]),(0,i.R1)(ct).latitude.$dirty&&(0,i.R1)(ct).latitude.$invalid?((0,o.uX)(),(0,o.CE)("div",ve,(0,l.v_)((0,i.R1)(ct).latitude.$errors[0].$message),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",fe,[ge,(0,o.bo)((0,o.Lk)("input",{class:"small_input","onUpdate:modelValue":c[2]||(c[2]=e=>(0,i.R1)(ct).longitude.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).longitude.$model]]),(0,i.R1)(ct).longitude.$dirty&&(0,i.R1)(ct).longitude.$invalid?((0,o.uX)(),(0,o.CE)("div",be,(0,l.v_)((0,i.R1)(ct).longitude.$errors[0].$message),1)):(0,o.Q3)("",!0)]),(0,o.Lk)("div",ke,[we,(0,o.bo)((0,o.Lk)("input",{class:"small_input","onUpdate:modelValue":c[3]||(c[3]=e=>(0,i.R1)(ct).timeZone.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).timeZone.$model]]),(0,i.R1)(ct).timeZone.$dirty&&(0,i.R1)(ct).timeZone.$invalid?((0,o.uX)(),(0,o.CE)("div",ye,(0,l.v_)((0,i.R1)(ct).timeZone.$errors[0].$message),1)):(0,o.Q3)("",!0)])]),(0,o.Lk)("div",Re,[(0,o.bo)((0,o.Lk)("input",{style:{"grid-row":"1","grid-column":"1","margin-right":"10px",height:"100%","margin-top":"0px","margin-bottom":"0px"},type:"range",min:"-90",max:"90",step:"-0.1",class:"slider",orient:"vertical","onUpdate:modelValue":c[4]||(c[4]=e=>(0,i.R1)(ct).latitude.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).latitude.$model]]),(0,o.Lk)("div",Me,[(0,o.Lk)("img",{src:s,id:"mapImage",alt:"An outline world map, on which the user can click to set the latitude and longitude.",style:{"grid-row":"1","grid-column":"2","object-fit":"contain",display:"block",margin:"0px"},draggable:"false",onMousemove:vt,onMousedown:ft,onClick:gt,ref_key:"mapImage",ref:ht},null,544),(0,o.Lk)("div",{id:"markerPoint",style:(0,l.Tr)(`top:${100*(90-(0,i.R1)(z))/180}%; left:${100*((0,i.R1)(O)+180)/360}%`)},null,4)]),(0,o.bo)((0,o.Lk)("input",{style:{"grid-row":"2","grid-column":"2","margin-top":"10px","margin-left":"0px","margin-right":"0px"},type:"range",min:"-180",max:"180",step:"1",class:"slider","onUpdate:modelValue":c[5]||(c[5]=e=>(0,i.R1)(ct).longitude.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).longitude.$model]])])]),(0,o.Lk)("div",Le,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"autoSelectTimeZone","onUpdate:modelValue":c[6]||(c[6]=e=>(0,i.i9)(U)?U.value=e:U=e),style:{"margin-right":"10px",display:"inline"}},null,512),[[n.lH,(0,i.R1)(U)]]),xe]),_e,Ie,(0,o.Lk)("div",Ee,[(0,o.Lk)("div",Se,[Ve,(0,o.bo)((0,o.Lk)("input",{class:"small_input","onUpdate:modelValue":c[7]||(c[7]=e=>(0,i.R1)(ct).slant.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).slant.$model]]),(0,i.R1)(ct).slant.$dirty&&(0,i.R1)(ct).slant.$invalid?((0,o.uX)(),(0,o.CE)("div",Te,(0,l.v_)((0,i.R1)(ct).slant.$errors[0].$message),1)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"range",min:0,max:180,step:"1",class:"slider","onUpdate:modelValue":c[8]||(c[8]=e=>(0,i.R1)(ct).slant.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).slant.$model]])]),(0,o.Lk)("div",Pe,[Fe,(0,o.bo)((0,o.Lk)("input",{class:"small_input","onUpdate:modelValue":c[9]||(c[9]=e=>(0,i.R1)(ct).rotation.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).rotation.$model]]),(0,i.R1)(ct).rotation.$dirty&&(0,i.R1)(ct).rotation.$invalid?((0,o.uX)(),(0,o.CE)("div",$e,(0,l.v_)((0,i.R1)(ct).rotation.$errors[0].$message),1)):(0,o.Q3)("",!0),(0,o.bo)((0,o.Lk)("input",{type:"range",min:-180,max:180,step:"1",class:"slider","onUpdate:modelValue":c[10]||(c[10]=e=>(0,i.R1)(ct).rotation.$model=e)},null,512),[[n.Jo,(0,i.R1)(ct).rotation.$model]])])]),(0,o.Lk)("div",Ae,[We,(0,o.Lk)("div",Xe,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"solarLines",value:"solar","onUpdate:modelValue":c[11]||(c[11]=e=>(0,i.i9)(B)?B.value=e:B=e)},null,512),[[n.XL,(0,i.R1)(B)]]),Ce]),(0,o.Lk)("div",Oe,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"standardLines",value:"standard","onUpdate:modelValue":c[12]||(c[12]=e=>(0,i.i9)(B)?B.value=e:B=e)},null,512),[[n.XL,(0,i.R1)(B)]]),ze])]),Ue,(0,o.Lk)("div",je,[qe,(0,o.Lk)("div",Ke,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"arabic",value:"arabic","onUpdate:modelValue":c[13]||(c[13]=e=>(0,i.i9)(K)?K.value=e:K=e)},null,512),[[n.XL,(0,i.R1)(K)]]),Ne]),(0,o.Lk)("div",Ze,[(0,o.bo)((0,o.Lk)("input",{type:"radio",id:"roman",value:"roman","onUpdate:modelValue":c[14]||(c[14]=e=>(0,i.i9)(K)?K.value=e:K=e)},null,512),[[n.XL,(0,i.R1)(K)]]),Be])]),De,He,(0,o.Lk)("div",Ge,[(0,o.bo)((0,o.Lk)("input",{type:"checkbox",id:"sunRaysPassThroughEarth","onUpdate:modelValue":c[15]||(c[15]=e=>(0,i.i9)(N)?N.value=e:N=e)},null,512),[[n.lH,(0,i.R1)(N)]]),Je]),Ye])],512),(0,o.Lk)("div",Qe,[(0,o.Lk)("div",et,[(0,o.bo)((0,o.Lk)("div",{class:"time_display",onClick:Y,onKeydown:(0,n.jR)(Y,["space"]),tabindex:"0"},(0,l.v_)((0,i.R1)(_t)),545),[[n.aG,!(0,i.R1)(D)]]),(0,o.bo)((0,o.Lk)("input",{ref_key:"timeEntryBox",ref:J,class:"timeEntryBox",onBlur:Q,onKeydown:(0,n.jR)(Q,["enter"]),"onUpdate:modelValue":c[16]||(c[16]=e=>(0,i.i9)(H)?H.value=e:H=e)},null,544),[[n.aG,(0,i.R1)(D)],[n.Jo,(0,i.R1)(H)]]),(0,o.bo)((0,o.Lk)("div",tt,[at,(0,o.Lk)("div",nt,"(UTC "+(0,l.v_)((0,i.R1)(Pt))+") "+(0,l.v_)((0,i.R1)(Lt)?"âï¸":"ð"),1)],512),[[n.aG,!(0,i.R1)(D)]])]),(0,o.Lk)("div",ot,(0,l.v_)((0,i.R1)(St))+" mean solar time",1),(0,o.Lk)("div",it,(0,l.v_)((0,i.R1)(Tt))+" apparent solar time",1),(0,o.bo)((0,o.Lk)("input",{type:"range",min:"0",max:"1440",step:"10",class:"slider",id:"time","onUpdate:modelValue":c[17]||(c[17]=e=>(0,i.i9)(X)?X.value=e:X=e)},null,512),[[n.Jo,(0,i.R1)(X),void 0,{number:!0}]]),(0,o.bF)((0,i.R1)(oe.A),{arrow:"",placement:"left","disable-click-away":"",show:(0,i.R1)(g),onKeydown:c[20]||(c[20]=(0,n.jR)((()=>W(!1)),["escape"]))},{content:(0,o.k6)((()=>[(0,o.Lk)("div",lt,[(0,o.Lk)("div",rt,[(0,o.bF)(ae)]),(0,o.Lk)("button",{class:"v-step__button",onClick:c[18]||(c[18]=()=>W(!1))},"Close")])])),default:(0,o.k6)((()=>[(0,o.Lk)("a",{class:"overlay_link",href:"javascript:void(0)",onClick:c[19]||(c[19]=()=>W(!(0,i.R1)(g)))},"Why are there 3 times?")])),_:1},8,["show"]),st,(0,o.Lk)("div",ut,(0,l.v_)((0,i.R1)(It)),1),(0,o.bo)((0,o.Lk)("input",{type:"range",min:"0",max:"364",step:"1",class:"slider",id:"day","onUpdate:modelValue":c[21]||(c[21]=e=>(0,i.i9)(C)?C.value=e:C=e)},null,512),[[n.Jo,(0,i.R1)(C),void 0,{number:!0}]])])])],64)}}});const ht=(0,f.A)(ct,[["__scopeId","data-v-785b8fce"]]);var mt=ht,pt=a(1852);const vt=(0,n.Ef)(mt);vt.use(pt.A),vt.mount("#app")}},t={};function a(n){var o=t[n];if(void 0!==o)return o.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,a),i.exports}a.m=e,function(){var e=[];a.O=function(t,n,o,i){if(!n){var l=1/0;for(d=0;d<e.length;d++){n=e[d][0],o=e[d][1],i=e[d][2];for(var r=!0,s=0;s<n.length;s++)(!1&i||l>=i)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(r=!1,i<l&&(l=i));if(r){e.splice(d--,1);var u=o();void 0!==u&&(t=u)}}return t}i=i||0;for(var d=e.length;d>0&&e[d-1][2]>i;d--)e[d]=e[d-1];e[d]=[n,o,i]}}(),function(){a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,{a:t}),t}}(),function(){a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){a.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){a.p="/sundials/"}(),function(){var e={524:0};a.O.j=function(t){return 0===e[t]};var t=function(t,n){var o,i,l=n[0],r=n[1],s=n[2],u=0;if(l.some((function(t){return 0!==e[t]}))){for(o in r)a.o(r,o)&&(a.m[o]=r[o]);if(s)var d=s(a)}for(t&&t(n);u<l.length;u++)i=l[u],a.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return a.O(d)},n=self["webpackChunksundials"]=self["webpackChunksundials"]||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var n=a.O(void 0,[504],(function(){return a(2884)}));n=a.O(n)})();
//# sourceMappingURL=app.91856900.js.map