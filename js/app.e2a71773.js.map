{"version":3,"file":"js/app.e2a71773.js","mappings":"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","sources":["webpack://sundials/./src/components/SunObject.vue?3581","webpack://sundials/./src/components/SunObject.vue","webpack://sundials/./src/components/SunObject.vue?d054","webpack://sundials/./src/calculations.ts","webpack://sundials/./src/components/SundialLetter.vue?f12d","webpack://sundials/./src/components/SundialLetter.vue","webpack://sundials/./src/components/SundialLetter.vue?fc0a","webpack://sundials/./src/components/SundialObject.vue","webpack://sundials/./src/components/SundialObject.vue?f5df","webpack://sundials/./src/components/SundialObject.vue?85df","webpack://sundials/./src/components/CameraOffsetHelper.vue","webpack://sundials/./src/components/CameraOffsetHelper.vue?878d","webpack://sundials/./src/components/CameraOffsetHelper.vue?cb3b","webpack://sundials/./src/components/RendererHelper.vue","webpack://sundials/./src/components/RendererHelper.vue?52e9","webpack://sundials/./src/components/RendererHelper.vue?f3a6","webpack://sundials/./src/App.vue?2a5e","webpack://sundials/./src/App.vue","webpack://sundials/./src/App.vue?7ccd","webpack://sundials/./src/main.ts","webpack://sundials/webpack/bootstrap","webpack://sundials/webpack/runtime/chunk loaded","webpack://sundials/webpack/runtime/compat get default export","webpack://sundials/webpack/runtime/define property getters","webpack://sundials/webpack/runtime/global","webpack://sundials/webpack/runtime/hasOwnProperty shorthand","webpack://sundials/webpack/runtime/make namespace object","webpack://sundials/webpack/runtime/publicPath","webpack://sundials/webpack/runtime/jsonp chunk loading","webpack://sundials/webpack/startup"],"sourcesContent":["import { resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TresSphereGeometry = _resolveComponent(\"TresSphereGeometry\")!\n  const _component_TresMeshBasicMaterial = _resolveComponent(\"TresMeshBasicMaterial\")!\n  const _component_TresMesh = _resolveComponent(\"TresMesh\")!\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n\n  return (_openBlock(), _createBlock(_component_TresObject3D, { position: _ctx.position }, {\n    default: _withCtx(() => [\n      _createVNode(_component_TresMesh, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_TresSphereGeometry, { args: [0.5, 20, 16,] }),\n          _createVNode(_component_TresMeshBasicMaterial, { color: \"#ffffff\" })\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"position\"]))\n}","<!-- 3D sphere representing the sun -->\n\n<template>\n    <TresObject3D :position=\"position\">\n        <!-- plate -->\n        <TresMesh>\n            <TresSphereGeometry :args=\"[0.5, 20, 16,]\" />\n            <TresMeshBasicMaterial color=\"#ffffff\" />\n        </TresMesh>\n\n    </TresObject3D>\n\n</template>\n\n\n<script lang=\"ts\">\nimport { PropType, defineComponent } from 'vue'\nexport default defineComponent({\n    name:\"SunObject\",\n    props: {\n        position: {\n            required: true,\n            type: Array as PropType<number[]>,\n        },\n    }\n})\n</script>","import { render } from \"./SunObject.vue?vue&type=template&id=1d3dbaca&ts=true\"\nimport script from \"./SunObject.vue?vue&type=script&lang=ts\"\nexport * from \"./SunObject.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { Matrix3, Plane, Ray, Vector3 } from \"three\";\n\nexport function rad(degrees: number) {\n    return degrees * Math.PI/180\n}\n\n/**\n * Compute the sun's position in horizontal coordinates, using the current date, time, latitude, and longitude.\n */\nexport function calculateSunHorizontalCoords(day: number, time: number, latitude: number, longitude: number) {\n    // using guide from here: https://en.wikipedia.org/wiki/Position_of_the_Sun\n\n    const longRad = longitude * Math.PI / 180;\n    const latRad = latitude * Math.PI / 180;\n\n    // pretend the year is 2023 (non-leap year)\n    // calculate ecliptic coordinates\n    /** `D_utc`. Always within 1 second of `D_ut`, the observed value.\n     * Leap seconds are added/subtracted to `D_utc` to compensate. \n     * `D_utc` is the (fractional) number of days since noon on January 1st, 2000.\n     * Wikipedia page on position of the sun refers to this value as `n`.\n     * D_utc IS FRACTIONAL here!\n     * */\n    const D_utc = 8400.5 + day + time / 1440;\n    // tai was 37 seconds ahead of UTC in 2023\n    const D_tai = D_utc + 37 / (24 * 60 * 60)\n    /**\n     * Terrestrial Time (32.184 seconds ahead of TAI)\n     * https://aa.usno.navy.mil/faq/TT\n     */ \n    const D_tt = D_tai + 32.184 / (24 * 60 * 60);\n\n    const L = (rad(280.460) + rad(0.9856474) * D_tt) % (2 * Math.PI);\n    const g = (rad(357.528) + rad(0.9856003) * D_tt) % (2 * Math.PI);\n    const lambda = L + rad(1.915) * Math.sin(g) + rad(0.020) * Math.sin(2 * g);\n    const epsilon = rad(23.4393) - rad(4e-7) * D_tt;\n\n\n    // convert to equitorial coords\n    const rightAsc = Math.atan2(Math.cos(epsilon) * Math.sin(lambda), Math.cos(lambda));\n    const declination = Math.asin(Math.sin(epsilon) * Math.sin(lambda));\n\n\n    // compute hour angle\n    // https://aa.usno.navy.mil/faq/GAST\n    const D_utc_of_last_midnight = Math.trunc(D_utc + 0.5)- 0.5\n    /** Hours since last midnight */\n    const H = (D_utc - D_utc_of_last_midnight) * 24\n    /**Centuries since noon on Jan 1st 2000 */\n    const T = D_tt/36525;\n    /** Greenwich apparent sidereal time (converted to hour angle) */\n    const GMST = (6.697375 + 0.065707485828 * D_utc_of_last_midnight + 1.0027379*H + 0.0854103*T + 0.0000258 * Math.pow(T, 2)) * Math.PI/12\n    // const GMST = ((18.697375 + 24.065709824279 * D_utc) % 24) * Math.PI/12;\n    const omega = rad(125.04) - rad(0.052954)*D_tt;\n    const deltaPsi = (-0.000319 * Math.sin(omega) - 0.000024 * Math.sin(2 * L)) * Math.PI / 12\n    const eqeq = deltaPsi * Math.cos(epsilon);\n    const GAST = GMST + eqeq;\n\n    // earth rotation angle - INACCURATE for finding the sun pos!! use GAST instead\n    // // const ERA = 2 * Math.PI * ((0.7790572732640 + 1.00273781191135448 * n) % 1);\n    // const ERA = 2 * Math.PI * ((0.7790572732640 + 1.002737811911355 * n) % 1);\n\n    /** local mean sidereal time */\n    const LMST = GAST + longRad;\n    /** hour angle */\n    const h = LMST - rightAsc;\n\n    // convert to horizontal coords\n    // https://en.wikipedia.org/wiki/Astronomical_coordinate_systems\n    const azimuth = -Math.atan2(Math.cos(declination) * Math.sin(h), -Math.sin(latRad) * Math.cos(declination) * Math.cos(h) + Math.cos(latRad) * Math.sin(declination));\n    const altitude = Math.asin(Math.sin(latRad) * Math.sin(declination) + Math.cos(latRad) * Math.cos(declination) * Math.cos(h));\n\n    return { azimuth, altitude }\n\n}\n\n\n/**\n * Compute coordinates of the sun at distance `multiplyer` from the origin\n * @param azimuth \n * @param altitude \n * @param multiplyer \n * @returns \n */\nexport function horizontalToActualCoords(azimuth: number, altitude: number, multiplyer=15) {\n    return {\n        x: multiplyer * Math.sin(azimuth) * Math.cos(altitude),\n        y: multiplyer * Math.sin(altitude),\n        z: multiplyer * -Math.cos(azimuth) * Math.cos(altitude)\n    }\n}\n\n/** Direction vector to the sun at an equinox (when the plane of the sun orbit is at 90° to the gnomon style)\n * \n * Ignoring eliptical orbit/apparent time effects\n * @param timeAngle Midnight to midnight, 0 to 2π\n * @param latitude Latitude, in radians\n*/\nexport function sunPosAtEquinox(timeAngle:number, latitude:number) {\n    return new Vector3(Math.sin(timeAngle), -Math.cos(timeAngle) * Math.cos(latitude), -Math.cos(timeAngle) * Math.sin(latitude));\n}\n\n\n/**\n * Compute vector of the shadow path on the plate at a specific time\n * \n * Be careful when the style is parallel to the plane at the moment the sun sets\n * \n * @param timeAngle Midnight to midnight, 0 to 2π\n * @param latitude Latitude, in radians\n * @param plateNorm Normal vector to the plane of the plate\n * @returns\n */\nexport function calculateShadowDirection(timeAngle: number, latitude: number, plateNorm:Vector3) {\n\n\n    /** Position of the sun at an equinox (when the plane of the sun orbit is at 90° to the gnomon style)\n     * \n     * Ignoring eliptical orbit/apparent time effects\n    */\n    const sunPos = sunPosAtEquinox(timeAngle, latitude);\n\n    /** unit vector of the gnomon style */\n    const style = new Vector3(0, Math.sin(latitude), -Math.cos(latitude));\n\n\n    // the direction of the shadow cast at this time can be found by the intersection of the planes:\n    // 1, containing the sunPos and the style\n    // 2, the plate\n    // to do this, find the cross product of the normal vectors to both planes\n\n    const norm1 = sunPos.clone().cross(style);\n    const shadowDir = norm1.clone().cross(plateNorm);\n\n    return shadowDir;\n\n}\n\n/**\n * Convert time to string.\n * @param time Minutes from midnight.\n * @returns \n */\nexport function timeToString(time: number) {\n    // const timeObj = new Date();\n    // timeObj.setHours(Math.floor(time / 60));\n    // timeObj.setMinutes(time % 60)\n    // return timeObj.toLocaleTimeString(undefined, { hour: \"numeric\", minute: \"numeric\" })\n\n    const hours = Math.floor((((time / 60)%24)+24)%24).toString().padStart(2, \"0\");\n    const minutes = Math.floor(((time % 60)+60) % 60).toString().padStart(2, \"0\")\n\n    return `${hours}:${minutes}`\n}\n\n/**\n * Parses string times in format `xx:xx`\n * @param str \n * @returns The time, or NaN if could not be parsed.\n */\nexport function stringToTime(str: string) {\n    const result = str.match(/^\\s*([0-9]+)(?::([0-9]*))?\\s*$/);\n    if (!result) return NaN;\n\n    const hours = Number.parseInt(result[1]);\n    if (hours < 0 || hours > 23) return NaN;\n\n    let minutes = 0;\n    if (result[2] && result[2] != \"\") {\n        minutes = Number.parseInt(result[2]);\n        if (minutes < 0 || minutes > 59) return NaN;\n    }\n\n    return hours*60 + minutes;\n\n}\n\n/**\n * Convert day to string\n * @param day Days since 1st January in a non-leap year (0 to 364)\n * @returns \n */\nexport function dateToString(day: number) {\n    // add date to an arbitrary non-leap year\n    const dateObj = new Date(Date.parse(\"2001\") + day * 24 * 60 * 60 * 1000);\n    return dateObj.toLocaleDateString(undefined, { month: \"long\", day: 'numeric' })\n}\n\n/**\n * Convert time zone to string\n * @param timeZone Minutes difference from UTC\n * @returns \n */\nexport function timeZoneToString(timeZone:number) {\n\n    const symbol = timeZone > 0 ? \"+\"\n        : timeZone < 0 ? \"-\"\n            : \"±\";\n    const hours = Math.abs(Math.trunc(timeZone / 60));\n    const mins = Math.abs(timeZone % 60);\n    let result = symbol + hours.toString();\n    if (mins != 0) result += \":\" + mins.toString();\n    return result;\n\n}\n\n/**\n * Intersect an infinite line with a plane\n * @param plane The plane \n * @param linePoint A point on the line \n * @param lineDirection A vector in the direction of the line\n * @returns The point of intersection, if it exists\n */\nexport function infiniteLineIntersectWithPlaneWithDir(plane: Plane, linePoint: Vector3, lineDirection: Vector3) {\n\n    // rays are only infinite in 1 direction. Need 2 rays, try both\n    const ray = new Ray(linePoint, lineDirection);\n    let intersection = ray.intersectPlane(plane, new Vector3())\n    if (intersection) return {dir: 1, point: intersection}\n    \n    const ray2 = new Ray(linePoint, lineDirection.clone().multiplyScalar(-1));\n    intersection = ray2.intersectPlane(plane, new Vector3())\n    if (intersection) return {dir: -1, point:intersection};\n\n    return null;\n}\n\n/**\n * Intersect an infinite line with a plane\n * @param plane The plane \n * @param linePoint A point on the line \n * @param lineDirection A vector in the direction of the line\n * @returns The point of intersection, if it exists, and the direction from the line point traveled.\n */\nexport function infiniteLineIntersectWithPlane(plane: Plane, linePoint: Vector3, lineDirection: Vector3) {\n\n    const ptWithDir = infiniteLineIntersectWithPlaneWithDir(plane, linePoint, lineDirection);\n    if (ptWithDir) return ptWithDir.point;\n    return null;\n}\n\n/**\n * intersections with the sphere and r = linePoint + λ * lineDirection\n * find values of λ, if they exist\n * @param sphereOrigin \n * @param sphereRadius \n * @param linePoint \n * @param lineDirection \n */\nexport function infiniteLineIntersectWithSphereParameters(sphereOrigin: Vector3, sphereRadius: number, linePoint: Vector3, lineDirection: Vector3) {\n\n    // intersections with the sphere and r = linePoint + λ * lineDirection\n    // find values of λ\n    const c = sphereOrigin.distanceToSquared(linePoint) - Math.pow(sphereRadius, 2);\n    const b = sphereOrigin.clone().sub(linePoint).multiply(lineDirection).dot(new Vector3(1, 1, 1)) * -2;\n    const a = Math.pow(lineDirection.length(), 2);\n\n    const discriminant = Math.pow(b, 2) - 4 * a * c;\n    if (discriminant < 0) return [];\n\n    return [\n        (-b - Math.sqrt(discriminant)) / (2 * a),\n        (-b + Math.sqrt(discriminant)) / (2 * a)\n    ]\n \n}\n\n\nexport function infiniteLineIntersectWithSphere(sphereOrigin: Vector3, sphereRadius: number, linePoint: Vector3, lineDirection: Vector3) {\n\n    const roots = infiniteLineIntersectWithSphereParameters(sphereOrigin, sphereRadius, linePoint, lineDirection) ;\n    if (roots.length == 0) return null;\n\n    else return [\n        lineDirection.clone().multiplyScalar(roots[0]).add(linePoint),\n        lineDirection.clone().multiplyScalar(roots[1]).add(linePoint),\n    ]\n\n}\n\nexport function longitudeToTimeZone(longitude:number) {\n    return Math.round(longitude / 360 * 24) * 60;\n}\n\n\n/**\n * Taken from https://stackoverflow.com/a/62141424.\n * \n * Intersecrion point of 3 planes.\n * @returns \n */\nexport function vertIntersectPlanes(p1: Plane, p2: Plane, p3: Plane) {\n    const n1 = p1.normal, n2 = p2.normal, n3 = p3.normal;\n    const x1 = p1.coplanarPoint(new Vector3());\n    const x2 = p2.coplanarPoint(new Vector3());\n    const x3 = p3.coplanarPoint(new Vector3());\n    const f1 = new Vector3().crossVectors(n2, n3).multiplyScalar(x1.dot(n1));\n    const f2 = new Vector3().crossVectors(n3, n1).multiplyScalar(x2.dot(n2));\n    const f3 = new Vector3().crossVectors(n1, n2).multiplyScalar(x3.dot(n3));\n    const det = new Matrix3().set(n1.x, n1.y, n1.z, n2.x, n2.y, n2.z, n3.x, n3.y, n3.z).determinant();\n    if (det == 0) return null;\n    const vectorSum = new Vector3().add(f1).add(f2).add(f3);\n    const planeIntersection = new Vector3(vectorSum.x / det, vectorSum.y / det, vectorSum.z / det);\n    return planeIntersection;\n}","import { toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, withCtx as _withCtx, Suspense as _Suspense, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nexport function render(_ctx: any,_cache: any,$props: any,$setup: any,$data: any,$options: any) {\n  const _component_TresMeshPhongMaterial = _resolveComponent(\"TresMeshPhongMaterial\")!\n  const _component_Text3D = _resolveComponent(\"Text3D\")!\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n\n  return (_openBlock(), _createBlock(_component_TresObject3D, {\n    position: _ctx.position,\n    rotation: [-Math.PI/2, 0, 0]\n  }, {\n    default: _withCtx(() => [\n      (_openBlock(), _createBlock(_Suspense, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_Text3D, {\n            font: \"./fonts/PTSerif_Regular.json\",\n            size: 0.2,\n            \"bevel-enabled\": false,\n            height: 0.05,\n            \"cast-shadow\": _ctx.castShadow,\n            \"receive-shadow\": _ctx.receiveShadow,\n            \"need-updates\": \"\",\n            center: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(_ctx.text) + \" \", 1),\n              _createVNode(_component_TresMeshPhongMaterial, { color: \"#737373\" })\n            ]),\n            _: 1\n          }, 8, [\"cast-shadow\", \"receive-shadow\"])\n        ]),\n        _: 1\n      }))\n    ]),\n    _: 1\n  }, 8, [\"position\", \"rotation\"]))\n}","<!-- Letter displayed on the sundial plate. -->\n\n<template>\n    <TresObject3D\n        :position=\"position\"\n        :rotation=\"[-Math.PI/2, 0, 0]\"\n    >\n        <Suspense>\n            <Text3D\n                font=\"./fonts/PTSerif_Regular.json\"\n                :size=\"0.2\"\n                :bevel-enabled=\"false\"\n                :height=\"0.05\"\n                :cast-shadow=\"castShadow\"\n                :receive-shadow=\"receiveShadow\"\n                need-updates\n                center\n                \n            >\n                {{ text }}\n                <TresMeshPhongMaterial\n                    color=\"#737373\"\n                />\n            </Text3D>\n        </Suspense>\n    </TresObject3D>\n</template>\n\n\n<script lang=\"ts\">\n    import { Text3D } from '@tresjs/cientos';\n    import {  PropType, defineComponent } from 'vue'\n    export default defineComponent({\n        name:\"SundialLetter\",\n        props:{\n            text: {\n                required: true,\n                type: String as PropType<string>\n            },\n            position: {\n                required:true,\n                type: Array as PropType<number[]>, \n            },\n            castShadow: {\n                required: false,\n                default: false,\n                type: Boolean as PropType<boolean>\n            },\n            receiveShadow: {\n                required: false,\n                default: false,\n                type: Boolean as PropType<boolean>\n            }\n        },\n        components:{Text3D}\n    })\n</script>","import { render } from \"./SundialLetter.vue?vue&type=template&id=14b35f52&ts=true\"\nimport script from \"./SundialLetter.vue?vue&type=script&lang=ts\"\nexport * from \"./SundialLetter.vue?vue&type=script&lang=ts\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","<!-- 3D object of the sundial -->\n\n<script setup lang=\"ts\">\n\n    const props = defineProps(\n    {\n        latitude: {\n            required: false,\n            default: 0,\n            type: Number as PropType<number>\n        },\n        radius: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        gnomonPosition: {\n            required: true,\n            default:() => [0, 1, 0],\n            type: Array as PropType<number[]>\n        },\n        origin: {\n            required: true,\n            default: () => new Vector3(0, -1, 0),\n            type: Object as PropType<Vector3>\n        },\n        rotation: {\n            required: true,\n            default: () => new Euler(0, 0, 0),\n            type: Object as PropType<Euler>\n        },\n        hourLabels: {\n            required: true,\n            type: Array as PropType<{\n                hour: number,\n                label: string,\n                labelPoint: number[] | null\n            }[]>\n        }\n\n    });\n\n    const relativeGnomonRotation = computed(() => (90-props.latitude)*Math.PI/180);\n\n    const gnomonCorrectedRotation = computed(() => {\n        // apply the gnomon rotation and remove the object3d rotation\n\n        const mat = new Matrix4().makeRotationFromEuler(props.rotation).invert()\n            .multiply(new Matrix4().makeRotationFromEuler(new Euler(-relativeGnomonRotation.value, 0, 0)))\n\n        return new Euler().setFromRotationMatrix(mat);\n\n    })\n</script>\n\n<template>\n    <TresObject3D :position=\"origin\" :rotation=\"new Euler(/* @ts-ignore */...rotation.toArray())\">\n        <!-- plate -->\n        <TresMesh :position=\"[0,-0.05,0]\" cast-shadow receive-shadow>\n            <!-- <TresBoxGeometry :args=\"[5,0.1, 5,]\" /> -->\n            <TresCylinderGeometry :args=\"[radius, radius, 0.1]\" />\n            <TresMeshPhongMaterial color=\"#f9ecec\" />\n        </TresMesh>\n\n        <template v-for=\"{hour, label, labelPoint} in hourLabels\" :key=\"hour\">\n            <SundialLetter :text=\"labelPoint ? label : ''\" :position=\"labelPoint ?? [0,0,0]\" receive-shadow/>\n        </template>\n  \n        <!-- Style/gnomon -->\n        <TresMesh :position=\"gnomonPosition\" :rotation=\"gnomonCorrectedRotation\" cast-shadow receive-shadow>\n            <TresCylinderGeometry :args=\"[0.05, 0.05, 2]\" />\n            <TresMeshPhongMaterial color=\"#b7b7b7\" />\n        </TresMesh>\n    </TresObject3D>\n\n</template>\n\n\n<script lang=\"ts\">\n    import { PropType, computed, defineComponent, defineProps, ref } from 'vue'\n    import SundialLetter from './SundialLetter.vue';\n    import { Euler, Matrix3, Matrix4, Vector3 } from 'three';\nimport { required } from '@vuelidate/validators';\n    export default defineComponent({\n        name:\"SundialObject\",\n        components: {\n            SundialLetter,\n        },\n    })\n</script>","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, withCtx as _withCtx, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock } from \"vue\"\n\n\n    import { PropType, computed, defineComponent, defineProps, ref } from 'vue'\n    import SundialLetter from './SundialLetter.vue';\n    import { Euler, Matrix3, Matrix4, Vector3 } from 'three';\nimport { required } from '@vuelidate/validators';\n    const __default__ = defineComponent({\n        name:\"SundialObject\",\n        components: {\n            SundialLetter,\n        },\n    })\n\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  props: {\n        latitude: {\n            required: false,\n            default: 0,\n            type: Number as PropType<number>\n        },\n        radius: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        gnomonPosition: {\n            required: true,\n            default:() => [0, 1, 0],\n            type: Array as PropType<number[]>\n        },\n        origin: {\n            required: true,\n            default: () => new Vector3(0, -1, 0),\n            type: Object as PropType<Vector3>\n        },\n        rotation: {\n            required: true,\n            default: () => new Euler(0, 0, 0),\n            type: Object as PropType<Euler>\n        },\n        hourLabels: {\n            required: true,\n            type: Array as PropType<{\n                hour: number,\n                label: string,\n                labelPoint: number[] | null\n            }[]>\n        }\n\n    },\n  setup(__props) {\n\n\n    const props = __props;\n\n    const relativeGnomonRotation = computed(() => (90-props.latitude)*Math.PI/180);\n\n    const gnomonCorrectedRotation = computed(() => {\n        // apply the gnomon rotation and remove the object3d rotation\n\n        const mat = new Matrix4().makeRotationFromEuler(props.rotation).invert()\n            .multiply(new Matrix4().makeRotationFromEuler(new Euler(-relativeGnomonRotation.value, 0, 0)))\n\n        return new Euler().setFromRotationMatrix(mat);\n\n    })\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresCylinderGeometry = _resolveComponent(\"TresCylinderGeometry\")!\n  const _component_TresMeshPhongMaterial = _resolveComponent(\"TresMeshPhongMaterial\")!\n  const _component_TresMesh = _resolveComponent(\"TresMesh\")!\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n\n  return (_openBlock(), _createBlock(_component_TresObject3D, {\n    position: __props.origin,\n    rotation: new (_unref(Euler))(/* @ts-ignore */...__props.rotation.toArray())\n  }, {\n    default: _withCtx(() => [\n      _createVNode(_component_TresMesh, {\n        position: [0,-0.05,0],\n        \"cast-shadow\": \"\",\n        \"receive-shadow\": \"\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_TresCylinderGeometry, {\n            args: [__props.radius, __props.radius, 0.1]\n          }, null, 8, [\"args\"]),\n          _createVNode(_component_TresMeshPhongMaterial, { color: \"#f9ecec\" })\n        ]),\n        _: 1\n      }),\n      (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(__props.hourLabels, ({hour, label, labelPoint}) => {\n        return (_openBlock(), _createBlock(SundialLetter, {\n          key: hour,\n          text: labelPoint ? label : '',\n          position: labelPoint ?? [0,0,0],\n          \"receive-shadow\": \"\"\n        }, null, 8, [\"text\", \"position\"]))\n      }), 128)),\n      _createVNode(_component_TresMesh, {\n        position: __props.gnomonPosition,\n        rotation: gnomonCorrectedRotation.value,\n        \"cast-shadow\": \"\",\n        \"receive-shadow\": \"\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_TresCylinderGeometry, { args: [0.05, 0.05, 2] }),\n          _createVNode(_component_TresMeshPhongMaterial, { color: \"#b7b7b7\" })\n        ]),\n        _: 1\n      }, 8, [\"position\", \"rotation\"])\n    ]),\n    _: 1\n  }, 8, [\"position\", \"rotation\"]))\n}\n}\n\n})","import script from \"./SundialObject.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SundialObject.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!-- Make the focus point of the camera a bit off center on the canvas -->\n\n<script lang=\"ts\" setup>\nimport { useTresContext } from '@tresjs/core';\nimport { PerspectiveCamera } from 'three';\nimport { PropType, watch, defineProps} from 'vue';\n\n\nconst {camera,  sizes} = useTresContext();\n\nconst props = defineProps({\n    xOffset: {\n        required: true,\n        type: Number as PropType<number>\n    }\n});\n\nwatch(() => [sizes.width.value, sizes.height.value, props.xOffset], () => {\n    const zoomMultiple = (sizes.width.value + Math.abs(props.xOffset) * 2) / sizes.width.value;\n    if ((camera.value as PerspectiveCamera | undefined)?.isPerspectiveCamera) {\n        (camera.value as PerspectiveCamera).setViewOffset(\n            sizes.width.value * zoomMultiple,\n            sizes.height.value * zoomMultiple,\n            props.xOffset > 0 ? props.xOffset * 2 : 0,\n            sizes.height.value * (zoomMultiple - 1) / 2,\n            sizes.width.value,\n            sizes.height.value);\n    }\n\n}, {immediate: true})\n\n</script>\n\n<script lang=\"ts\">\n\nimport {defineComponent} from 'vue';\nexport default defineComponent({\n    name: \"CameraOffsetHelper\",\n    components: {}\n}) \n</script>\n","import { defineComponent as _defineComponent } from 'vue'\nimport { useTresContext } from '@tresjs/core';\nimport { PerspectiveCamera } from 'three';\nimport { PropType, watch} from 'vue';\n\n\n\n\nimport {defineComponent} from 'vue';\nconst __default__ = defineComponent({\n    name: \"CameraOffsetHelper\",\n    components: {}\n}) \n\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  props: {\n    xOffset: {\n        required: true,\n        type: Number as PropType<number>\n    }\n},\n  setup(__props) {\n\nconst {camera,  sizes} = useTresContext();\n\nconst props = __props;\n\nwatch(() => [sizes.width.value, sizes.height.value, props.xOffset], () => {\n    const zoomMultiple = (sizes.width.value + Math.abs(props.xOffset) * 2) / sizes.width.value;\n    if ((camera.value as PerspectiveCamera | undefined)?.isPerspectiveCamera) {\n        (camera.value as PerspectiveCamera).setViewOffset(\n            sizes.width.value * zoomMultiple,\n            sizes.height.value * zoomMultiple,\n            props.xOffset > 0 ? props.xOffset * 2 : 0,\n            sizes.height.value * (zoomMultiple - 1) / 2,\n            sizes.width.value,\n            sizes.height.value);\n    }\n\n}, {immediate: true})\n\n\nreturn () => {}\n}\n\n})","import script from \"./CameraOffsetHelper.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CameraOffsetHelper.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!-- Fix problem with blurry image on mobile devices. -->\n\n<script setup lang=\"ts\" >\nimport { useTresContext } from '@tresjs/core';\nconst { renderer } = useTresContext();\nrenderer.value.setPixelRatio(window.devicePixelRatio);\n</script>\n\n<script lang=\"ts\">\nimport { defineComponent } from 'vue';\nexport default defineComponent({                                    \n    name: \"RendererHelper\",\n    components: {}\n}) \n</script>","import { defineComponent as _defineComponent } from 'vue'\nimport { useTresContext } from '@tresjs/core';\n\nimport { defineComponent } from 'vue';\nconst __default__ = defineComponent({                                    \n    name: \"RendererHelper\",\n    components: {}\n}) \n\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  setup(__props) {\n\nconst { renderer } = useTresContext();\nrenderer.value.setPixelRatio(window.devicePixelRatio);\n\nreturn () => {}\n}\n\n})","import script from \"./RendererHelper.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RendererHelper.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useCssVars as _useCssVars, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, withCtx as _withCtx, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, isRef as _isRef, vModelCheckbox as _vModelCheckbox, vModelRadio as _vModelRadio, vShow as _vShow, withKeys as _withKeys, pushScopeId as _pushScopeId, popScopeId as _popScopeId } from \"vue\"\nimport _imports_0 from './assets/world-map-coordinates-correct.png'\n\n\nconst _withScopeId = (n: any) => (_pushScopeId(\"data-v-bcd10722\"),n=n(),_popScopeId(),n)\nconst _hoisted_1 = { style: {\"width\":\"100%\",\"height\":\"100%\",\"position\":\"fixed\",\"left\":\"0\",\"top\":\"0\"} }\nconst _hoisted_2 = { id: \"overlay\" }\nconst _hoisted_3 = { id: \"sidebarContent\" }\nconst _hoisted_4 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Coordinates\", -1))\nconst _hoisted_5 = { class: \"horizontal_settings\" }\nconst _hoisted_6 = { class: \"setting\" }\nconst _hoisted_7 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Latitude/°\", -1))\nconst _hoisted_8 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_9 = { class: \"setting\" }\nconst _hoisted_10 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Longitude/°\", -1))\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_12 = { class: \"setting\" }\nconst _hoisted_13 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Time Zone/±UTC\", -1))\nconst _hoisted_14 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_15 = { style: {\"display\":\"grid\",\"grid-template-columns\":\"min-content auto\",\"grid-template-rows\":\"min-content auto\"} }\nconst _hoisted_16 = { style: {\"position\":\"relative\",\"aspect-ratio\":\"2 / 1\"} }\nconst _hoisted_17 = { class: \"setting\" }\nconst _hoisted_18 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"autoSelectTimeZone\",\n  class: \"fieldOption\"\n}, \"Automatically set time zone\", -1))\nconst _hoisted_19 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_20 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Sundial Settings\", -1))\nconst _hoisted_21 = { class: \"setting\" }\nconst _hoisted_22 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Slant/°\", -1))\nconst _hoisted_23 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_24 = { class: \"setting\" }\nconst _hoisted_25 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Rotation/°\", -1))\nconst _hoisted_26 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_27 = { class: \"setting\" }\nconst _hoisted_28 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Hour lines\", -1))\nconst _hoisted_29 = { class: \"checkboxSetting\" }\nconst _hoisted_30 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"solarLines\",\n  class: \"fieldOption\"\n}, \"Solar time\", -1))\nconst _hoisted_31 = { class: \"checkboxSetting\" }\nconst _hoisted_32 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"standardLines\",\n  class: \"fieldOption\"\n}, \"Adjusted for time zone\", -1))\nconst _hoisted_33 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_34 = { class: \"setting\" }\nconst _hoisted_35 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Numerals\", -1))\nconst _hoisted_36 = { class: \"checkboxSetting\" }\nconst _hoisted_37 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"arabic\",\n  class: \"fieldOption\"\n}, \"Western Arabic (0-23)\", -1))\nconst _hoisted_38 = { class: \"checkboxSetting\" }\nconst _hoisted_39 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"roman\",\n  class: \"fieldOption\"\n}, \"Roman (I-XXIV)\", -1))\nconst _hoisted_40 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_41 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"h2\", null, \"Misc\", -1))\nconst _hoisted_42 = { class: \"checkboxSetting\" }\nconst _hoisted_43 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"label\", {\n  for: \"sunRaysPassThroughEarth\",\n  class: \"fieldOption\"\n}, \"Sundial remains illuminated at night\", -1))\nconst _hoisted_44 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"br\", null, null, -1))\nconst _hoisted_45 = { class: \"status\" }\nconst _hoisted_46 = { style: {\"display\":\"flex\",\"flex-direction\":\"row\",\"align-items\":\"center\"} }\nconst _hoisted_47 = { style: {\"display\":\"flex\",\"margin-left\":\"10px\",\"justify-content\":\"end\",\"flex-direction\":\"column\",\"align-items\":\"stretch\",\"padding-block\":\"9px\"} }\nconst _hoisted_48 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"div\", { class: \"subtitle\" }, \"local standard time\", -1))\nconst _hoisted_49 = { class: \"subtitle\" }\nconst _hoisted_50 = { class: \"subtitle\" }\nconst _hoisted_51 = { class: \"subtitle\" }\nconst _hoisted_52 = /*#__PURE__*/ _withScopeId(() => /*#__PURE__*/_createElementVNode(\"hr\", null, null, -1))\nconst _hoisted_53 = {\n  class: \"subtitle\",\n  style: {\"margin-top\":\"13px\"}\n}\n\nimport { TresCanvas } from '@tresjs/core';\n\n\n    \n    /*\n     * Config\n     */\n    \n    import { Line2, OrbitControls } from '@tresjs/cientos'\n    import { onClickOutside } from '@vueuse/core'\n    import interpolate from \"color-interpolate\";\n    import { computed, defineComponent, nextTick, onMounted, reactive, ref, watch } from 'vue'\n    import SunObject from './components/SunObject.vue';\n    import { decimal, helpers, maxValue, minValue, required } from '@vuelidate/validators';\n    import useVuelidate from '@vuelidate/core';\n    import { BasicShadowMap, Vector3, Plane, Euler, Matrix4,} from 'three';\n    import { dateToString, calculateShadowDirection, horizontalToActualCoords, calculateSunHorizontalCoords, timeToString, timeZoneToString, infiniteLineIntersectWithSphereParameters, infiniteLineIntersectWithPlaneWithDir, longitudeToTimeZone, stringToTime, vertIntersectPlanes, sunPosAtEquinox } from '@/calculations';\n    import SundialObject from './components/SundialObject.vue';\n    import CameraOffsetHelper from './components/CameraOffsetHelper.vue';\n    import RendererHelper from './components/RendererHelper.vue';\n    const __default__ = defineComponent({\n        name:\"App\",\n        components: {SundialObject, SunObject}\n    })\n\n\nexport default /*#__PURE__*/_defineComponent({\n  ...__default__,\n  setup(__props) {\n\n_useCssVars(_ctx => ({\n  \"68d40d39\": (_unref(statusTextColor))\n}))\n\n\n    const sundialOrigin = new Vector3(0, -0.5, 0);\n    /** relative to sundial origin and rotation */\n    const gnomonRelativePosition = ref<number[]>([0,1,0]);\n    /** euler angle */\n    const sundialRadius = 5;\n    const numeralDistanceFromSundialOrigin = 4;\n\n    let sundialRotation = ref<Euler>(new Euler(0,0,0, \"YXZ\"));\n    let sundialNormal = computed(() => new Vector3(0, 1, 0).applyEuler(sundialRotation.value));\n\n\n    /*\n     * Independent variables\n     */\n    /** 0 to 24*60 */\n    let localTime = ref<number>(12 * 60);\n    /** 0 to 364 (integer) */\n    let day = ref<number>(162);\n    let longitude = ref<number>(0);\n    let latitude = ref<number>(0);\n    let autoSelectTimeZone = ref(true);\n    /** +/- minutes UTC */\n    let timeZone = ref<number>(0);\n    let numerals = ref<\"roman\"|\"arabic\">(\"arabic\");\n    let sunRaysPassThroughEarth = ref(false);\n    let hourLineStyle = ref<\"solar\"|\"standard\">(\"solar\");\n\n\n    /*\n     * Allow the time to be input manually.\n     */\n    let isEditingTime = ref<boolean>(false);\n    /** What's in the time manual entry box */\n    let timeEntryValue = ref<string>(\"\");\n    const timeEntryBox = ref<HTMLInputElement | null>(null);   \n    function showTimeEntryBox() {\n        if (isEditingTime.value == false) {\n            isEditingTime.value = true;\n            timeEntryValue.value = timeToString(localTime.value);\n\n            nextTick(() => timeEntryBox.value?.focus());\n            \n        }\n    }\n    function hideTimeEntryBox() {\n        if (isEditingTime.value == true) {\n            isEditingTime.value = false\n            \n            if (!timeEntryBox.value) return;\n\n            const newTime = stringToTime(timeEntryBox.value.value);\n            if (isNaN(newTime)) return;\n\n            localTime.value = newTime;\n        }\n    }\n    onClickOutside(timeEntryBox, hideTimeEntryBox)\n\n\n    /*\n     * Sidebar form validation \n     */\n    const formDefaults = {\n        latitude:\"45.00\",\n        longitude:\"0.00\",\n        timeZone:\"+0:00\",\n        slant:\"0\",\n        rotation:\"0\",\n    }\n\n    /** used to parse time zone user input*/\n    const timeZoneRegex = /^\\s*([+-±]?)\\s*((?:0?[0-9])|1[0-9])(?::((?:0[0-9])|[1-5][0-9]))?\\s*$/;\n\n    let formState = reactive(formDefaults);\n    const formRules = computed<Record<keyof typeof formDefaults, any>>(() => ({\n        latitude: {\n            required,\n            decimal,\n            minValue:minValue(-90),\n            maxValue:maxValue(90)\n        },\n        longitude: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        timeZone: {\n            isATimeZone: helpers.withMessage(\"Your time zone should look like +/-HH(:MM)\", helpers.regex(timeZoneRegex))\n        },\n        slant: {\n            required,\n            decimal,\n            minValue:minValue(0),\n            maxValue:maxValue(180)\n        },\n        rotation: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        }\n    }))\n    const v$ = useVuelidate(formRules, formState)\n\n    // parse and updadte whenever valid entries are changed in the form.\n    watch(() => formState.longitude, newVal => {\n        if (!v$.value.longitude.$invalid) {\n            longitude.value = Number.parseFloat(newVal);\n            // set the time zone as well.\n            if (autoSelectTimeZone.value) {\n                formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n            }\n        }\n    }, { immediate: true })\n    watch(() => formState.latitude, newVal => {\n        if (!v$.value.latitude.$invalid) latitude.value = Number.parseFloat(newVal);\n    }, {immediate:true})\n    watch(() => formState.timeZone, newVal => {\n        const result = newVal.match(timeZoneRegex);\n        if (result) {\n            const newValInt = (result[1] == \"-\" ? -1 : 1) * (Number.parseInt(result[2]) * 60 + Number.parseInt(result[3] ?? 0));\n            // change the local time so that the global time remains consistent\n            localTime.value = (((localTime.value + newValInt - timeZone.value) % 1440) + 1440) % 1440\n            timeZone.value = newValInt;\n        }\n    }, {immediate:true})\n    watch(() => formState.slant, newVal => {\n        if (!v$.value.slant.$invalid) sundialRotation.value.x = Number.parseFloat(newVal) * Math.PI/180;\n    }, {immediate: true})\n    watch(() => formState.rotation, newVal => {\n        if (!v$.value.rotation.$invalid) sundialRotation.value.y = -Number.parseFloat(newVal) * Math.PI / 180;\n    }, { immediate: true })\n\n    /**\n     * Set the latitude and longitude when the user clicks on the map.\n     */ \n    let mapImage = ref<HTMLImageElement>();\n    let mapImageIsBeingClicked = ref(false);\n    function setLatLngFromMap(e:MouseEvent) {\n        if (mapImage.value) {\n            const longitude = e.offsetX / mapImage.value.width * 360 - 180;\n            const latitude = 90 - e.offsetY / mapImage.value.height * 180;\n            formState.longitude = longitude.toFixed(1);\n            formState.latitude = latitude.toFixed(1);\n        }\n    }\n    function mapImageMouseMove(e:MouseEvent) {\n        if (mapImageIsBeingClicked.value) setLatLngFromMap(e)\n    }\n    function mapImageStartClicking() {\n        mapImageIsBeingClicked.value = true;\n    }\n    function mapImageClick(e:MouseEvent) {\n        setLatLngFromMap(e)\n    }\n    onMounted(() => {\n        window.addEventListener(\"mouseup\", () => {\n            mapImageIsBeingClicked.value = false;\n        })\n    })\n\n    // get the dimensions of the sidebar for layout\n    let sidebarDims = ref({ clientWidth: 0, clientHeight: 0 });\n    const sidebar = ref<HTMLDivElement>();\n    const sidebarResizeObserver = new ResizeObserver(() => {\n        const clientWidth = sidebar.value?.clientWidth ?? 0;\n        const clientHeight = sidebar.value?.clientHeight ?? 0;\n        sidebarDims.value = { clientWidth, clientHeight }\n    })\n    onMounted(() => {\n        sidebarResizeObserver.observe(sidebar.value as HTMLDivElement);\n    })\n\n\n    // set the time zone as the user clicks the checkbox\n    watch(() => autoSelectTimeZone.value, value => {\n        if (value) {\n            formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n        }\n    })\n\n    /**\n     * computed values\n     */\n    /** convert local time to UTC +0 */\n    let time = computed(() => (((localTime.value - timeZone.value) % 1440) + 1440) % 1440)\n    let sunHorizontalCoords = computed(() => calculateSunHorizontalCoords(day.value, time.value, latitude.value, longitude.value));\n    let sunCoords = computed(() => horizontalToActualCoords(sunHorizontalCoords.value.azimuth, sunHorizontalCoords.value.altitude))\n    // let gnomonRotation = computed(() => (90-latitude.value)*Math.PI/180);\n    let isDaytime = computed(() => sunHorizontalCoords.value.altitude >= 0);\n    let statusTextColor = computed(() => isDaytime.value ? \"black\" : \"white\")\n    let timeText = computed(() => timeToString(localTime.value))\n    let dateText = computed(() => dateToString(day.value));\n    let meanSolarTime = computed(() => time.value + ((longitude.value/360)*24*60));\n    let meanSolarTimeText = computed(() => timeToString(meanSolarTime.value));\n    let apparentSolarTime = computed(() => {\n        // use the already-computed sun position. This isn't actualy dependent on the latitude irl. Just seemed the easiest way to do it here.\n        // to calculate this, rotate sun position (90°-latitude) anticlockwise about x axis (west to east axis). Then work out projected angle in the x/z (horizontal) plain.\n        const latRad = latitude.value * Math.PI/180;\n        const timeHours = Math.atan2(sunCoords.value.y * Math.cos(latRad) + sunCoords.value.z * Math.sin(latRad), sunCoords.value.x) * 12 / Math.PI + 6;\n        const timeMins = (((timeHours % 24) + 24) % 24) * 60;\n        return timeMins;\n    })\n    let apparentSolarTimeText = computed(() => timeToString(apparentSolarTime.value))\n    let timeZoneText = computed(() => timeZoneToString(timeZone.value))\n    let sunlightIntensity = computed(() => {\n        // a very unscientific way of calculating the apparent sunlight intensity.\n        // have a little bit of sunlight when the sun is below the horizon.\n        if (sunHorizontalCoords.value.altitude > 0.1) return 1;\n        if (sunHorizontalCoords.value.altitude > -0.1) return (sunHorizontalCoords.value.altitude + 0.1)/0.2;\n        return 0;\n    })\n    let skyColor = computed(() => {\n        // make the sky look nice innit\n        return interpolate([\"#02407a\", \"#87CEEB\"])(sunlightIntensity.value);\n    })\n    let gnomonAbsolutePosition = computed(() => {\n        return new Vector3(...gnomonRelativePosition.value)\n            .applyEuler(sundialRotation.value)\n            .add(new Vector3(...sundialOrigin))\n    })\n    /** if there is an interection return it, and whether the intersection is in the positive direction of the gnomon vector.*/\n    let stylePlateIntersection = computed(() => {\n        // intersect the plane of the plate with the line of the sundial gnomon.\n        const plane = new Plane(sundialNormal.value, 0).translate(new Vector3(...sundialOrigin));\n        const rayDir = new Vector3(0, -(Math.sin(latitude.value * Math.PI / 180)), (Math.cos(latitude.value * Math.PI / 180)));\n        return infiniteLineIntersectWithPlaneWithDir(plane, gnomonAbsolutePosition.value, rayDir);\n    })\n    let stylePlateIntersectionPoint = computed(() => stylePlateIntersection.value?.point ?? null);\n    /** If the intersection with the plate lies on the line between the center of the gnomon and celestial north, then this value is -1. If south, then 1.*/\n    let stylePlateIntersectionPointOrder = computed(() => stylePlateIntersection.value?.dir ?? null)\n\n    // /** If the gnomon is parallel to the plate, this currently messes up the calculations. So just change the coordinates a tiny bit. VERY BAD AND LAZY CODE, @todo make not bad*/\n    // watch(stylePlateIntersectionPoint, value => {\n    //     if (!value) {\n    //         latitude.value += 0.00001 * (Math.random()+0.5) * (latitude.value > 0 ? -1: 1)\n    //         longitude.value += 0.00001 * (Math.random()+0.5) * (longitude.value > 0 ? -1: 1)\n    //     }\n    // }, {immediate: true})\n\n    \n    const hourLineHours = [...Array(24).keys()];\n\n    // The hours expressed in the range midnight to midnight, 0 to 2π\n    const hourLineTimeAngles = computed(() => hourLineHours.map(i => {\n        let offsetHour;\n        if (hourLineStyle.value == 'standard') {\n            // need to adjust for time zones\n            offsetHour = i - timeZone.value / 60 + longitude.value * 24 / 360\n        }\n        else {\n            offsetHour = i;\n        }\n        return ((((offsetHour * 60) % 1440) + 1440) % 1440) * Math.PI * 2 / 1440\n    }))\n\n    // direction vector of each hour line on the sundial\n    const hourLineDirections = computed(() => hourLineTimeAngles.value.map(timeAngle => {\n        return calculateShadowDirection(\n            timeAngle,\n            latitude.value * Math.PI / 180,\n            new Vector3(...sundialNormal.value)\n        ).multiplyScalar((stylePlateIntersectionPointOrder.value ?? 1))\n        // the scalar multiple is to fix a bug with the numerals being offset by 12 hours in some cases.\n    }));\n\n    /** If the style plate intersection point is really far away from the sundial origin, or doesn't exist, then we need to calculate the hour lines differently. */\n    const hourLinesCalculationMethod = computed(() => {\n        if (stylePlateIntersectionPoint.value && stylePlateIntersectionPoint.value.distanceTo(sundialOrigin) < 1000) {\n            return \"stylePlateIntersection\"\n        } else {\n            return \"otherIntersection\"\n        }\n    })\n\n    // the point used, in addition to the direction vector, to fully define the hour line.\n    const hourLinePoints = computed(() => {\n        switch (hourLinesCalculationMethod.value) {\n            case 'stylePlateIntersection':\n                return hourLineHours.map(() => stylePlateIntersectionPoint.value as Vector3)\n            case 'otherIntersection': {\n\n                /**\n                 * Instead of using the stylePlateIntersectionPoint for every line, use a different point for each line.\n                 * This point is at the intersection of 3 planes:\n                 * 1. The plane containing the mean sun position and style\n                 * 2. The surface of the sundial onto which the gnomon's shadow strikes (top surface)\n                 * 3. A plane that is perpendicular to the direction of the style, and which does not intersect with the 3d sundial object\n                 * */ \n                const latRad = latitude.value * Math.PI / 180;\n                const gnomon1 = gnomonAbsolutePosition.value;\n                const gnomonDir = new Vector3(0, Math.sin(latRad), -Math.cos(latRad))\n                const gnomon2 = gnomonDir.clone().add(gnomon1);\n                // a point 1 unit off the side of the sundial plate\n                const pointOutsidePlate = gnomonDir.clone()\n                    .projectOnPlane(sundialNormal.value)\n                    .normalize()\n                    .multiplyScalar((sundialRadius + 1) * -(stylePlateIntersectionPointOrder.value ?? 1))\n                    .add(sundialOrigin);\n\n                const p2 = new Plane().setFromNormalAndCoplanarPoint(sundialNormal.value, sundialOrigin);\n                const p3 = new Plane().setFromNormalAndCoplanarPoint(gnomonDir, pointOutsidePlate);\n\n                return hourLineTimeAngles.value.map((timeAngle) => {\n\n                    const sunPos = sunPosAtEquinox(timeAngle, latRad)\n                    const p1 = new Plane().setFromCoplanarPoints(sunPos.clone().add(gnomon1), gnomon1, gnomon2);\n                    const point = vertIntersectPlanes(p1, p2, p3) ?? pointOutsidePlate;\n                    return point;\n                })\n            }\n            default:\n                // this should never happen.\n                return [];\n\n\n\n        }\n        \n    })\n\n\n\n    // lambdas of the formula plateStyleIntersectionPoint + lambda * shadowDir such that it intersects the edge of the sundial plate.\n    let hourLineSundialSphereIntersectionParameters = computed(() => {\n\n        return hourLineHours.map((hour, i) => {\n            const point = hourLinePoints.value[i];\n            const dir = hourLineDirections.value[i];\n            // to get the portion of the line we want, intersect the hour line with a sphere centered on the sundial plate origin.\n            const lambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...sundialOrigin), sundialRadius, point, dir);\n            if (lambdas.length == 0) return [];\n            // lambda = 0 is the plate/style intersection point. Negative values are on the wrong side.\n            if (lambdas[0] < 0 && lambdas[1] < 0) return [];\n            // only display positive values\n            if (lambdas[0] < 0) lambdas[0] = 0;\n            // we know that lambdas[1] > 0.\n            return lambdas\n        })\n\n    })\n\n    // vector to raise the sundial lines a bit off the plate\n    let plateToHourLineHeight = computed(() => sundialNormal.value.clone().normalize().multiplyScalar(0.007));\n\n    let hourLines = computed(() => hourLineHours.map((hour, i) => {\n        const linePoint = hourLinePoints.value[i];\n        const lineDir = hourLineDirections.value[i];\n        const lambdas = hourLineSundialSphereIntersectionParameters.value[i];\n        return {\n            hour: hour,\n            label: (() => {\n                switch (numerals.value) {\n                    case 'arabic': return hour.toString()\n                    case 'roman': return [\"XXIV\", \"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\", \"VIII\", \"IX\", \"X\", \"XI\", \"XII\", \"XIII\", \"XIV\", \"XV\", \"XVI\", \"XVII\", \"XVIII\", \"XIX\", \"XX\", \"XXI\", \"XXII\", \"XXIII\"].at(hour) ?? \"\";\n                }\n            })(),\n            points: lambdas.length == 0 ? null : [\n                lineDir.clone().multiplyScalar(lambdas[0]).add(linePoint).add(plateToHourLineHeight.value),\n                lineDir.clone().multiplyScalar(lambdas[1]).add(linePoint).add(plateToHourLineHeight.value),\n            ],\n            labelPoint: (() => {\n                // where the label should be displayed.\n                // Intersect the hour line with a sphere of radius smaller than the sundial radius, centered on the sundial origin\n                const labelSphereIntersectLambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...sundialOrigin), numeralDistanceFromSundialOrigin, linePoint, lineDir);\n                if (labelSphereIntersectLambdas.length == 0) return null;\n                if (labelSphereIntersectLambdas[1] < 0) return null;\n                const labelPoint = lineDir.clone().multiplyScalar(labelSphereIntersectLambdas[1]).add(linePoint);\n                // prevent numbers from getting too bunched up\n                if (hourLinesCalculationMethod.value == \"stylePlateIntersection\" && linePoint.distanceTo(labelPoint) < 3) return null;\n                // move to relative coordinate of sundial\n                labelPoint.sub(sundialOrigin).applyMatrix4(new Matrix4().makeRotationFromEuler(sundialRotation.value).invert())\n                return labelPoint.toArray();\n            })()\n        }\n    }));\n   \n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresPerspectiveCamera = _resolveComponent(\"TresPerspectiveCamera\")!\n  const _component_TresDirectionalLight = _resolveComponent(\"TresDirectionalLight\")!\n  const _component_TresAmbientLight = _resolveComponent(\"TresAmbientLight\")!\n  const _component_TresGridHelper = _resolveComponent(\"TresGridHelper\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_unref(TresCanvas), {\n        \"clear-color\": _unref(skyColor),\n        shadows: \"\",\n        shadowMapType: _unref(BasicShadowMap)\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_TresPerspectiveCamera),\n          _createVNode(SundialObject, {\n            latitude: _unref(latitude),\n            origin: _unref(sundialOrigin),\n            rotation: _unref(sundialRotation),\n            \"gnomon-position\": gnomonRelativePosition.value,\n            \"hour-labels\": _unref(hourLines),\n            radius: sundialRadius\n          }, null, 8, [\"latitude\", \"origin\", \"rotation\", \"gnomon-position\", \"hour-labels\"]),\n          _createVNode(SunObject, {\n            position: [_unref(sunCoords).x, _unref(sunCoords).y, _unref(sunCoords).z]\n          }, null, 8, [\"position\"]),\n          (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(hourLines), (hourLine) => {\n            return (_openBlock(), _createBlock(_unref(Line2), {\n              key: hourLine.hour,\n              \"line-width\": 1,\n              points: hourLine.points ?? [[0,0,0], [0,0,0]],\n              color: \"#FFFFFF\"\n            }, null, 8, [\"points\"]))\n          }), 128)),\n          _createVNode(_component_TresDirectionalLight, {\n            position: [_unref(sunCoords).x, _unref(sunCoords).y, _unref(sunCoords).z],\n            intensity: _unref(sunRaysPassThroughEarth) ? 1 : _unref(sunlightIntensity),\n            \"shadow-mapSize-width\": 2048,\n            \"shadow-mapSize-height\": 2048,\n            \"cast-shadow\": \"\"\n          }, null, 8, [\"position\", \"intensity\"]),\n          _createVNode(_component_TresAmbientLight, { color: \"#AAAAAA\" }),\n          _createVNode(_unref(OrbitControls), {\n            \"enable-damping\": false,\n            \"rotate-speed\": 0.5,\n            \"enable-pan\": false,\n            target: [0,0,0]\n          }),\n          _createVNode(_component_TresGridHelper, {\n            args: [50, 50, '#AAAAAA', '#AAAAAA'],\n            position: [0, -8, 0]\n          }),\n          _createVNode(CameraOffsetHelper, {\n            \"x-offset\": -(_unref(sidebarDims).clientWidth)/2\n          }, null, 8, [\"x-offset\"]),\n          _createVNode(RendererHelper)\n        ]),\n        _: 1\n      }, 8, [\"clear-color\", \"shadowMapType\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", {\n        id: \"sidebar\",\n        ref_key: \"sidebar\",\n        ref: sidebar\n      }, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _hoisted_4,\n          _createElementVNode(\"div\", _hoisted_5, [\n            _createElementVNode(\"div\", _hoisted_6, [\n              _hoisted_7,\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"small_input\",\n                \"onUpdate:modelValue\": _cache[0] || (_cache[0] = ($event: any) => ((_unref(v$).latitude.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).latitude.$model]\n              ]),\n              (_unref(v$).latitude.$dirty && _unref(v$).latitude.$invalid)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, _toDisplayString(_unref(v$).latitude.$errors[0].$message), 1))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _createElementVNode(\"div\", _hoisted_9, [\n              _hoisted_10,\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"small_input\",\n                \"onUpdate:modelValue\": _cache[1] || (_cache[1] = ($event: any) => ((_unref(v$).longitude.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).longitude.$model]\n              ]),\n              (_unref(v$).longitude.$dirty &&_unref(v$).longitude.$invalid)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(_unref(v$).longitude.$errors[0].$message), 1))\n                : _createCommentVNode(\"\", true)\n            ]),\n            _createElementVNode(\"div\", _hoisted_12, [\n              _hoisted_13,\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"small_input\",\n                \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(v$).timeZone.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).timeZone.$model]\n              ]),\n              (_unref(v$).timeZone.$dirty && _unref(v$).timeZone.$invalid)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_14, _toDisplayString(_unref(v$).timeZone.$errors[0].$message), 1))\n                : _createCommentVNode(\"\", true)\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_15, [\n            _withDirectives(_createElementVNode(\"input\", {\n              style: {\"grid-row\":\"1\",\"grid-column\":\"1\",\"margin-right\":\"10px\",\"height\":\"100%\",\"margin-top\":\"0px\",\"margin-bottom\":\"0px\"},\n              type: \"range\",\n              min: \"-90\",\n              max: \"90\",\n              step: \"-0.1\",\n              class: \"slider\",\n              orient: \"vertical\",\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(v$).latitude.$model) = $event))\n            }, null, 512), [\n              [_vModelText, _unref(v$).latitude.$model]\n            ]),\n            _createElementVNode(\"div\", _hoisted_16, [\n              _createElementVNode(\"img\", {\n                src: _imports_0,\n                id: \"mapImage\",\n                alt: \"An outline world map, on which the user can click to set the latitude and longitude.\",\n                style: {\"grid-row\":\"1\",\"grid-column\":\"2\",\"object-fit\":\"contain\",\"display\":\"block\",\"margin\":\"0px\"},\n                draggable: \"false\",\n                onMousemove: mapImageMouseMove,\n                onMousedown: mapImageStartClicking,\n                onClick: mapImageClick,\n                ref_key: \"mapImage\",\n                ref: mapImage\n              }, null, 544),\n              _createElementVNode(\"div\", {\n                id: \"markerPoint\",\n                style: _normalizeStyle(`top:${(90 - _unref(latitude)) * 100 / 180}%; left:${(_unref(longitude)+180) * 100 / 360}%`)\n              }, null, 4)\n            ]),\n            _withDirectives(_createElementVNode(\"input\", {\n              style: {\"grid-row\":\"2\",\"grid-column\":\"2\",\"margin-top\":\"10px\",\"margin-left\":\"0px\",\"margin-right\":\"0px\"},\n              type: \"range\",\n              min: \"-180\",\n              max: \"180\",\n              step: \"0.1\",\n              class: \"slider\",\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(v$).longitude.$model) = $event))\n            }, null, 512), [\n              [_vModelText, _unref(v$).longitude.$model]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_17, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              id: \"autoSelectTimeZone\",\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => (_isRef(autoSelectTimeZone) ? (autoSelectTimeZone).value = $event : autoSelectTimeZone = $event)),\n              style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n            }, null, 512), [\n              [_vModelCheckbox, _unref(autoSelectTimeZone)]\n            ]),\n            _hoisted_18\n          ]),\n          _hoisted_19,\n          _hoisted_20,\n          _createElementVNode(\"div\", _hoisted_21, [\n            _hoisted_22,\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"small_input\",\n              \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_unref(v$).slant.$model) = $event))\n            }, null, 512), [\n              [_vModelText, _unref(v$).slant.$model]\n            ]),\n            (_unref(v$).slant.$dirty && _unref(v$).slant.$invalid)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_23, _toDisplayString(_unref(v$).slant.$errors[0].$message), 1))\n              : _createCommentVNode(\"\", true),\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"range\",\n              min: 0,\n              max: 180,\n              step: \"1\",\n              class: \"slider\",\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => ((_unref(v$).slant.$model) = $event))\n            }, null, 512), [\n              [_vModelText, _unref(v$).slant.$model]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_24, [\n            _hoisted_25,\n            _withDirectives(_createElementVNode(\"input\", {\n              class: \"small_input\",\n              \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => ((_unref(v$).rotation.$model) = $event))\n            }, null, 512), [\n              [_vModelText, _unref(v$).rotation.$model]\n            ]),\n            (_unref(v$).rotation.$dirty && _unref(v$).rotation.$invalid)\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_26, _toDisplayString(_unref(v$).rotation.$errors[0].$message), 1))\n              : _createCommentVNode(\"\", true),\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"range\",\n              min: -180,\n              max: 180,\n              step: \"1\",\n              class: \"slider\",\n              \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => ((_unref(v$).rotation.$model) = $event))\n            }, null, 512), [\n              [_vModelText, _unref(v$).rotation.$model]\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_27, [\n            _hoisted_28,\n            _createElementVNode(\"div\", _hoisted_29, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"radio\",\n                id: \"solarLines\",\n                value: \"solar\",\n                \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => (_isRef(hourLineStyle) ? (hourLineStyle).value = $event : hourLineStyle = $event))\n              }, null, 512), [\n                [_vModelRadio, _unref(hourLineStyle)]\n              ]),\n              _hoisted_30\n            ]),\n            _createElementVNode(\"div\", _hoisted_31, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"radio\",\n                id: \"standardLines\",\n                value: \"standard\",\n                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => (_isRef(hourLineStyle) ? (hourLineStyle).value = $event : hourLineStyle = $event))\n              }, null, 512), [\n                [_vModelRadio, _unref(hourLineStyle)]\n              ]),\n              _hoisted_32\n            ])\n          ]),\n          _hoisted_33,\n          _createElementVNode(\"div\", _hoisted_34, [\n            _hoisted_35,\n            _createElementVNode(\"div\", _hoisted_36, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"radio\",\n                id: \"arabic\",\n                value: \"arabic\",\n                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => (_isRef(numerals) ? (numerals).value = $event : numerals = $event))\n              }, null, 512), [\n                [_vModelRadio, _unref(numerals)]\n              ]),\n              _hoisted_37\n            ]),\n            _createElementVNode(\"div\", _hoisted_38, [\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"radio\",\n                id: \"roman\",\n                value: \"roman\",\n                \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => (_isRef(numerals) ? (numerals).value = $event : numerals = $event))\n              }, null, 512), [\n                [_vModelRadio, _unref(numerals)]\n              ]),\n              _hoisted_39\n            ])\n          ]),\n          _hoisted_40,\n          _hoisted_41,\n          _createElementVNode(\"div\", _hoisted_42, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              id: \"sunRaysPassThroughEarth\",\n              \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => (_isRef(sunRaysPassThroughEarth) ? (sunRaysPassThroughEarth).value = $event : sunRaysPassThroughEarth = $event))\n            }, null, 512), [\n              [_vModelCheckbox, _unref(sunRaysPassThroughEarth)]\n            ]),\n            _hoisted_43\n          ]),\n          _hoisted_44\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_45, [\n        _createElementVNode(\"div\", _hoisted_46, [\n          _withDirectives(_createElementVNode(\"div\", {\n            class: \"time_display\",\n            onClick: showTimeEntryBox,\n            onKeydown: _withKeys(showTimeEntryBox, [\"space\"]),\n            tabindex: \"0\"\n          }, _toDisplayString(_unref(timeText)), 545), [\n            [_vShow, !_unref(isEditingTime)]\n          ]),\n          _withDirectives(_createElementVNode(\"input\", {\n            ref_key: \"timeEntryBox\",\n            ref: timeEntryBox,\n            class: \"timeEntryBox\",\n            onBlur: hideTimeEntryBox,\n            onKeydown: _withKeys(hideTimeEntryBox, [\"enter\"]),\n            \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => (_isRef(timeEntryValue) ? (timeEntryValue).value = $event : timeEntryValue = $event))\n          }, null, 544), [\n            [_vShow, _unref(isEditingTime)],\n            [_vModelText, _unref(timeEntryValue)]\n          ]),\n          _withDirectives(_createElementVNode(\"div\", _hoisted_47, [\n            _hoisted_48,\n            _createElementVNode(\"div\", _hoisted_49, \"(UTC \" + _toDisplayString(_unref(timeZoneText)) + \") \" + _toDisplayString(_unref(isDaytime) ? \"☀️\" : \"🌙\"), 1)\n          ], 512), [\n            [_vShow, !_unref(isEditingTime)]\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_50, _toDisplayString(_unref(meanSolarTimeText)) + \" mean solar time\", 1),\n        _createElementVNode(\"div\", _hoisted_51, _toDisplayString(_unref(apparentSolarTimeText)) + \" apparent solar time\", 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"1440\",\n          step: \"10\",\n          class: \"slider\",\n          id: \"time\",\n          \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => (_isRef(localTime) ? (localTime).value = $event : localTime = $event))\n        }, null, 512), [\n          [\n            _vModelText,\n            _unref(localTime),\n            void 0,\n            { number: true }\n          ]\n        ]),\n        _hoisted_52,\n        _createElementVNode(\"div\", _hoisted_53, _toDisplayString(_unref(dateText)), 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"364\",\n          step: \"1\",\n          class: \"slider\",\n          id: \"day\",\n          \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => (_isRef(day) ? (day).value = $event : day = $event))\n        }, null, 512), [\n          [\n            _vModelText,\n            _unref(day),\n            void 0,\n            { number: true }\n          ]\n        ])\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","<!-- Main file, controlling the interface and calculations. -->\n\n<script setup lang=\"ts\">\n\n    import { TresCanvas } from '@tresjs/core';\n\n\n    \n    /*\n     * Config\n     */\n    const sundialOrigin = new Vector3(0, -0.5, 0);\n    /** relative to sundial origin and rotation */\n    const gnomonRelativePosition = ref<number[]>([0,1,0]);\n    /** euler angle */\n    const sundialRadius = 5;\n    const numeralDistanceFromSundialOrigin = 4;\n\n    let sundialRotation = ref<Euler>(new Euler(0,0,0, \"YXZ\"));\n    let sundialNormal = computed(() => new Vector3(0, 1, 0).applyEuler(sundialRotation.value));\n\n\n    /*\n     * Independent variables\n     */\n    /** 0 to 24*60 */\n    let localTime = ref<number>(12 * 60);\n    /** 0 to 364 (integer) */\n    let day = ref<number>(162);\n    let longitude = ref<number>(0);\n    let latitude = ref<number>(0);\n    let autoSelectTimeZone = ref(true);\n    /** +/- minutes UTC */\n    let timeZone = ref<number>(0);\n    let numerals = ref<\"roman\"|\"arabic\">(\"arabic\");\n    let sunRaysPassThroughEarth = ref(false);\n    let hourLineStyle = ref<\"solar\"|\"standard\">(\"solar\");\n\n\n    /*\n     * Allow the time to be input manually.\n     */\n    let isEditingTime = ref<boolean>(false);\n    /** What's in the time manual entry box */\n    let timeEntryValue = ref<string>(\"\");\n    const timeEntryBox = ref<HTMLInputElement | null>(null);   \n    function showTimeEntryBox() {\n        if (isEditingTime.value == false) {\n            isEditingTime.value = true;\n            timeEntryValue.value = timeToString(localTime.value);\n\n            nextTick(() => timeEntryBox.value?.focus());\n            \n        }\n    }\n    function hideTimeEntryBox() {\n        if (isEditingTime.value == true) {\n            isEditingTime.value = false\n            \n            if (!timeEntryBox.value) return;\n\n            const newTime = stringToTime(timeEntryBox.value.value);\n            if (isNaN(newTime)) return;\n\n            localTime.value = newTime;\n        }\n    }\n    onClickOutside(timeEntryBox, hideTimeEntryBox)\n\n\n    /*\n     * Sidebar form validation \n     */\n    const formDefaults = {\n        latitude:\"45.00\",\n        longitude:\"0.00\",\n        timeZone:\"+0:00\",\n        slant:\"0\",\n        rotation:\"0\",\n    }\n\n    /** used to parse time zone user input*/\n    const timeZoneRegex = /^\\s*([+-±]?)\\s*((?:0?[0-9])|1[0-9])(?::((?:0[0-9])|[1-5][0-9]))?\\s*$/;\n\n    let formState = reactive(formDefaults);\n    const formRules = computed<Record<keyof typeof formDefaults, any>>(() => ({\n        latitude: {\n            required,\n            decimal,\n            minValue:minValue(-90),\n            maxValue:maxValue(90)\n        },\n        longitude: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        timeZone: {\n            isATimeZone: helpers.withMessage(\"Your time zone should look like +/-HH(:MM)\", helpers.regex(timeZoneRegex))\n        },\n        slant: {\n            required,\n            decimal,\n            minValue:minValue(0),\n            maxValue:maxValue(180)\n        },\n        rotation: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        }\n    }))\n    const v$ = useVuelidate(formRules, formState)\n\n    // parse and updadte whenever valid entries are changed in the form.\n    watch(() => formState.longitude, newVal => {\n        if (!v$.value.longitude.$invalid) {\n            longitude.value = Number.parseFloat(newVal);\n            // set the time zone as well.\n            if (autoSelectTimeZone.value) {\n                formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n            }\n        }\n    }, { immediate: true })\n    watch(() => formState.latitude, newVal => {\n        if (!v$.value.latitude.$invalid) latitude.value = Number.parseFloat(newVal);\n    }, {immediate:true})\n    watch(() => formState.timeZone, newVal => {\n        const result = newVal.match(timeZoneRegex);\n        if (result) {\n            const newValInt = (result[1] == \"-\" ? -1 : 1) * (Number.parseInt(result[2]) * 60 + Number.parseInt(result[3] ?? 0));\n            // change the local time so that the global time remains consistent\n            localTime.value = (((localTime.value + newValInt - timeZone.value) % 1440) + 1440) % 1440\n            timeZone.value = newValInt;\n        }\n    }, {immediate:true})\n    watch(() => formState.slant, newVal => {\n        if (!v$.value.slant.$invalid) sundialRotation.value.x = Number.parseFloat(newVal) * Math.PI/180;\n    }, {immediate: true})\n    watch(() => formState.rotation, newVal => {\n        if (!v$.value.rotation.$invalid) sundialRotation.value.y = -Number.parseFloat(newVal) * Math.PI / 180;\n    }, { immediate: true })\n\n    /**\n     * Set the latitude and longitude when the user clicks on the map.\n     */ \n    let mapImage = ref<HTMLImageElement>();\n    let mapImageIsBeingClicked = ref(false);\n    function setLatLngFromMap(e:MouseEvent) {\n        if (mapImage.value) {\n            const longitude = e.offsetX / mapImage.value.width * 360 - 180;\n            const latitude = 90 - e.offsetY / mapImage.value.height * 180;\n            formState.longitude = longitude.toFixed(1);\n            formState.latitude = latitude.toFixed(1);\n        }\n    }\n    function mapImageMouseMove(e:MouseEvent) {\n        if (mapImageIsBeingClicked.value) setLatLngFromMap(e)\n    }\n    function mapImageStartClicking() {\n        mapImageIsBeingClicked.value = true;\n    }\n    function mapImageClick(e:MouseEvent) {\n        setLatLngFromMap(e)\n    }\n    onMounted(() => {\n        window.addEventListener(\"mouseup\", () => {\n            mapImageIsBeingClicked.value = false;\n        })\n    })\n\n    // get the dimensions of the sidebar for layout\n    let sidebarDims = ref({ clientWidth: 0, clientHeight: 0 });\n    const sidebar = ref<HTMLDivElement>();\n    const sidebarResizeObserver = new ResizeObserver(() => {\n        const clientWidth = sidebar.value?.clientWidth ?? 0;\n        const clientHeight = sidebar.value?.clientHeight ?? 0;\n        sidebarDims.value = { clientWidth, clientHeight }\n    })\n    onMounted(() => {\n        sidebarResizeObserver.observe(sidebar.value as HTMLDivElement);\n    })\n\n\n    // set the time zone as the user clicks the checkbox\n    watch(() => autoSelectTimeZone.value, value => {\n        if (value) {\n            formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n        }\n    })\n\n    /**\n     * computed values\n     */\n    /** convert local time to UTC +0 */\n    let time = computed(() => (((localTime.value - timeZone.value) % 1440) + 1440) % 1440)\n    let sunHorizontalCoords = computed(() => calculateSunHorizontalCoords(day.value, time.value, latitude.value, longitude.value));\n    let sunCoords = computed(() => horizontalToActualCoords(sunHorizontalCoords.value.azimuth, sunHorizontalCoords.value.altitude))\n    // let gnomonRotation = computed(() => (90-latitude.value)*Math.PI/180);\n    let isDaytime = computed(() => sunHorizontalCoords.value.altitude >= 0);\n    let statusTextColor = computed(() => isDaytime.value ? \"black\" : \"white\")\n    let timeText = computed(() => timeToString(localTime.value))\n    let dateText = computed(() => dateToString(day.value));\n    let meanSolarTime = computed(() => time.value + ((longitude.value/360)*24*60));\n    let meanSolarTimeText = computed(() => timeToString(meanSolarTime.value));\n    let apparentSolarTime = computed(() => {\n        // use the already-computed sun position. This isn't actualy dependent on the latitude irl. Just seemed the easiest way to do it here.\n        // to calculate this, rotate sun position (90°-latitude) anticlockwise about x axis (west to east axis). Then work out projected angle in the x/z (horizontal) plain.\n        const latRad = latitude.value * Math.PI/180;\n        const timeHours = Math.atan2(sunCoords.value.y * Math.cos(latRad) + sunCoords.value.z * Math.sin(latRad), sunCoords.value.x) * 12 / Math.PI + 6;\n        const timeMins = (((timeHours % 24) + 24) % 24) * 60;\n        return timeMins;\n    })\n    let apparentSolarTimeText = computed(() => timeToString(apparentSolarTime.value))\n    let timeZoneText = computed(() => timeZoneToString(timeZone.value))\n    let sunlightIntensity = computed(() => {\n        // a very unscientific way of calculating the apparent sunlight intensity.\n        // have a little bit of sunlight when the sun is below the horizon.\n        if (sunHorizontalCoords.value.altitude > 0.1) return 1;\n        if (sunHorizontalCoords.value.altitude > -0.1) return (sunHorizontalCoords.value.altitude + 0.1)/0.2;\n        return 0;\n    })\n    let skyColor = computed(() => {\n        // make the sky look nice innit\n        return interpolate([\"#02407a\", \"#87CEEB\"])(sunlightIntensity.value);\n    })\n    let gnomonAbsolutePosition = computed(() => {\n        return new Vector3(...gnomonRelativePosition.value)\n            .applyEuler(sundialRotation.value)\n            .add(new Vector3(...sundialOrigin))\n    })\n    /** if there is an interection return it, and whether the intersection is in the positive direction of the gnomon vector.*/\n    let stylePlateIntersection = computed(() => {\n        // intersect the plane of the plate with the line of the sundial gnomon.\n        const plane = new Plane(sundialNormal.value, 0).translate(new Vector3(...sundialOrigin));\n        const rayDir = new Vector3(0, -(Math.sin(latitude.value * Math.PI / 180)), (Math.cos(latitude.value * Math.PI / 180)));\n        return infiniteLineIntersectWithPlaneWithDir(plane, gnomonAbsolutePosition.value, rayDir);\n    })\n    let stylePlateIntersectionPoint = computed(() => stylePlateIntersection.value?.point ?? null);\n    /** If the intersection with the plate lies on the line between the center of the gnomon and celestial north, then this value is -1. If south, then 1.*/\n    let stylePlateIntersectionPointOrder = computed(() => stylePlateIntersection.value?.dir ?? null)\n\n    // /** If the gnomon is parallel to the plate, this currently messes up the calculations. So just change the coordinates a tiny bit. VERY BAD AND LAZY CODE, @todo make not bad*/\n    // watch(stylePlateIntersectionPoint, value => {\n    //     if (!value) {\n    //         latitude.value += 0.00001 * (Math.random()+0.5) * (latitude.value > 0 ? -1: 1)\n    //         longitude.value += 0.00001 * (Math.random()+0.5) * (longitude.value > 0 ? -1: 1)\n    //     }\n    // }, {immediate: true})\n\n    \n    const hourLineHours = [...Array(24).keys()];\n\n    // The hours expressed in the range midnight to midnight, 0 to 2π\n    const hourLineTimeAngles = computed(() => hourLineHours.map(i => {\n        let offsetHour;\n        if (hourLineStyle.value == 'standard') {\n            // need to adjust for time zones\n            offsetHour = i - timeZone.value / 60 + longitude.value * 24 / 360\n        }\n        else {\n            offsetHour = i;\n        }\n        return ((((offsetHour * 60) % 1440) + 1440) % 1440) * Math.PI * 2 / 1440\n    }))\n\n    // direction vector of each hour line on the sundial\n    const hourLineDirections = computed(() => hourLineTimeAngles.value.map(timeAngle => {\n        return calculateShadowDirection(\n            timeAngle,\n            latitude.value * Math.PI / 180,\n            new Vector3(...sundialNormal.value)\n        ).multiplyScalar((stylePlateIntersectionPointOrder.value ?? 1))\n        // the scalar multiple is to fix a bug with the numerals being offset by 12 hours in some cases.\n    }));\n\n    /** If the style plate intersection point is really far away from the sundial origin, or doesn't exist, then we need to calculate the hour lines differently. */\n    const hourLinesCalculationMethod = computed(() => {\n        if (stylePlateIntersectionPoint.value && stylePlateIntersectionPoint.value.distanceTo(sundialOrigin) < 1000) {\n            return \"stylePlateIntersection\"\n        } else {\n            return \"otherIntersection\"\n        }\n    })\n\n    // the point used, in addition to the direction vector, to fully define the hour line.\n    const hourLinePoints = computed(() => {\n        switch (hourLinesCalculationMethod.value) {\n            case 'stylePlateIntersection':\n                return hourLineHours.map(() => stylePlateIntersectionPoint.value as Vector3)\n            case 'otherIntersection': {\n\n                /**\n                 * Instead of using the stylePlateIntersectionPoint for every line, use a different point for each line.\n                 * This point is at the intersection of 3 planes:\n                 * 1. The plane containing the mean sun position and style\n                 * 2. The surface of the sundial onto which the gnomon's shadow strikes (top surface)\n                 * 3. A plane that is perpendicular to the direction of the style, and which does not intersect with the 3d sundial object\n                 * */ \n                const latRad = latitude.value * Math.PI / 180;\n                const gnomon1 = gnomonAbsolutePosition.value;\n                const gnomonDir = new Vector3(0, Math.sin(latRad), -Math.cos(latRad))\n                const gnomon2 = gnomonDir.clone().add(gnomon1);\n                // a point 1 unit off the side of the sundial plate\n                const pointOutsidePlate = gnomonDir.clone()\n                    .projectOnPlane(sundialNormal.value)\n                    .normalize()\n                    .multiplyScalar((sundialRadius + 1) * -(stylePlateIntersectionPointOrder.value ?? 1))\n                    .add(sundialOrigin);\n\n                const p2 = new Plane().setFromNormalAndCoplanarPoint(sundialNormal.value, sundialOrigin);\n                const p3 = new Plane().setFromNormalAndCoplanarPoint(gnomonDir, pointOutsidePlate);\n\n                return hourLineTimeAngles.value.map((timeAngle) => {\n\n                    const sunPos = sunPosAtEquinox(timeAngle, latRad)\n                    const p1 = new Plane().setFromCoplanarPoints(sunPos.clone().add(gnomon1), gnomon1, gnomon2);\n                    const point = vertIntersectPlanes(p1, p2, p3) ?? pointOutsidePlate;\n                    return point;\n                })\n            }\n            default:\n                // this should never happen.\n                return [];\n\n\n\n        }\n        \n    })\n\n\n\n    // lambdas of the formula plateStyleIntersectionPoint + lambda * shadowDir such that it intersects the edge of the sundial plate.\n    let hourLineSundialSphereIntersectionParameters = computed(() => {\n\n        return hourLineHours.map((hour, i) => {\n            const point = hourLinePoints.value[i];\n            const dir = hourLineDirections.value[i];\n            // to get the portion of the line we want, intersect the hour line with a sphere centered on the sundial plate origin.\n            const lambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...sundialOrigin), sundialRadius, point, dir);\n            if (lambdas.length == 0) return [];\n            // lambda = 0 is the plate/style intersection point. Negative values are on the wrong side.\n            if (lambdas[0] < 0 && lambdas[1] < 0) return [];\n            // only display positive values\n            if (lambdas[0] < 0) lambdas[0] = 0;\n            // we know that lambdas[1] > 0.\n            return lambdas\n        })\n\n    })\n\n    // vector to raise the sundial lines a bit off the plate\n    let plateToHourLineHeight = computed(() => sundialNormal.value.clone().normalize().multiplyScalar(0.007));\n\n    let hourLines = computed(() => hourLineHours.map((hour, i) => {\n        const linePoint = hourLinePoints.value[i];\n        const lineDir = hourLineDirections.value[i];\n        const lambdas = hourLineSundialSphereIntersectionParameters.value[i];\n        return {\n            hour: hour,\n            label: (() => {\n                switch (numerals.value) {\n                    case 'arabic': return hour.toString()\n                    case 'roman': return [\"XXIV\", \"I\", \"II\", \"III\", \"IV\", \"V\", \"VI\", \"VII\", \"VIII\", \"IX\", \"X\", \"XI\", \"XII\", \"XIII\", \"XIV\", \"XV\", \"XVI\", \"XVII\", \"XVIII\", \"XIX\", \"XX\", \"XXI\", \"XXII\", \"XXIII\"].at(hour) ?? \"\";\n                }\n            })(),\n            points: lambdas.length == 0 ? null : [\n                lineDir.clone().multiplyScalar(lambdas[0]).add(linePoint).add(plateToHourLineHeight.value),\n                lineDir.clone().multiplyScalar(lambdas[1]).add(linePoint).add(plateToHourLineHeight.value),\n            ],\n            labelPoint: (() => {\n                // where the label should be displayed.\n                // Intersect the hour line with a sphere of radius smaller than the sundial radius, centered on the sundial origin\n                const labelSphereIntersectLambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...sundialOrigin), numeralDistanceFromSundialOrigin, linePoint, lineDir);\n                if (labelSphereIntersectLambdas.length == 0) return null;\n                if (labelSphereIntersectLambdas[1] < 0) return null;\n                const labelPoint = lineDir.clone().multiplyScalar(labelSphereIntersectLambdas[1]).add(linePoint);\n                // prevent numbers from getting too bunched up\n                if (hourLinesCalculationMethod.value == \"stylePlateIntersection\" && linePoint.distanceTo(labelPoint) < 3) return null;\n                // move to relative coordinate of sundial\n                labelPoint.sub(sundialOrigin).applyMatrix4(new Matrix4().makeRotationFromEuler(sundialRotation.value).invert())\n                return labelPoint.toArray();\n            })()\n        }\n    }));\n   \n\n</script>\n\n<template>\n    <!-- setting the canvas to window-size messes up the Line2 rendering for some reason. Instead, make it fill an entire screen div. -->\n    <div style=\"width:100%; height:100%; position: fixed; left:0; top:0\">\n        <TresCanvas :clear-color=\"skyColor\" shadows :shadowMapType=\"BasicShadowMap\">\n            <TresPerspectiveCamera />\n            <SundialObject :latitude=\"latitude\" :origin=\"sundialOrigin\" :rotation=\"sundialRotation\"\n                :gnomon-position=\"gnomonRelativePosition\" :hour-labels=\"hourLines\" :radius=\"sundialRadius\"/>\n            <SunObject :position=\"[sunCoords.x, sunCoords.y, sunCoords.z]\" />\n            <template v-for=\"hourLine in hourLines\" v-bind:key=\"hourLine.hour\">\n                <Line2 :line-width=\"1\" :points=\"hourLine.points ?? [[0,0,0], [0,0,0]]\" color=\"#FFFFFF\" />\n            </template>\n\n            <!-- directional light points at :target=\"[0,0,0]\" by default -->\n            <TresDirectionalLight :position=\"[sunCoords.x, sunCoords.y, sunCoords.z]\"\n                :intensity=\"sunRaysPassThroughEarth ? 1 : sunlightIntensity\" :shadow-mapSize-width=\"2048\"\n                :shadow-mapSize-height=\"2048\" cast-shadow />\n            <TresAmbientLight color=\"#AAAAAA\" />\n            <OrbitControls :enable-damping=\"false\" :rotate-speed=\"0.5\" :enable-pan=\"false\" :target=\"[0,0,0]\" />\n            <TresGridHelper :args=\"[50, 50, '#AAAAAA', '#AAAAAA']\" :position=\"[0, -8, 0]\" />\n            <CameraOffsetHelper :x-offset=\"-(sidebarDims.clientWidth)/2\" />\n            <RendererHelper />\n        </TresCanvas>\n    </div>\n\n    <div id=\"overlay\">\n\n        <div id=\"sidebar\" ref=\"sidebar\">\n            <div id=\"sidebarContent\">\n\n                <!-- Position -->\n                <h2>Coordinates</h2>\n                <div class=\"horizontal_settings\">\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">Latitude/°</label>\n                        <input class=\"small_input\" v-model=\"v$.latitude.$model\">\n                        <div class=\"error\" v-if=\"v$.latitude.$dirty && v$.latitude.$invalid\">{{\n                            v$.latitude.$errors[0].$message}}</div>\n                    </div>\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">Longitude/°</label>\n                        <input class=\"small_input\" v-model=\"v$.longitude.$model\">\n                        <div class=\"error\" v-if=\"v$.longitude.$dirty &&v$.longitude.$invalid\">{{\n                            v$.longitude.$errors[0].$message}}</div>\n                    </div>\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">Time Zone/±UTC</label>\n                        <input class=\"small_input\" v-model=\"v$.timeZone.$model\">\n                        <div class=\"error\" v-if=\"v$.timeZone.$dirty && v$.timeZone.$invalid\">{{\n                            v$.timeZone.$errors[0].$message }}</div>\n                    </div>\n                </div>\n\n                <!-- interactive location selector -->\n                <div\n                    style=\"display: grid; grid-template-columns: min-content auto; grid-template-rows: min-content auto;\">\n                    <input\n                        style=\"grid-row: 1; grid-column: 1; margin-right:10px; height:100%; margin-top: 0px; margin-bottom:0px;\"\n                        type=\"range\" min=\"-90\" max=\"90\" step=\"-0.1\" class=\"slider\" orient=\"vertical\"\n                        v-model=\"v$.latitude.$model\">\n                    <!-- <div id=\"coordBox\" style=\"grid-row: 1; grid-column: 2;\"></div> -->\n                    <div style=\"position:relative; aspect-ratio: 2 / 1;\">\n                        <img src=\"./assets/world-map-coordinates-correct.png\" id=\"mapImage\"\n                            alt=\"An outline world map, on which the user can click to set the latitude and longitude.\"\n                            style=\"grid-row: 1; grid-column: 2; object-fit: contain; display:block; margin:0px\"\n                            draggable=\"false\" @mousemove=\"mapImageMouseMove\" @mousedown=\"mapImageStartClicking\"\n                            @click=\"mapImageClick\" ref=\"mapImage\">\n                        <div id=\"markerPoint\"\n                            :style=\"`top:${(90 - latitude) * 100 / 180}%; left:${(longitude+180) * 100 / 360}%`\"></div>\n                    </div>\n\n                    <input style=\"grid-row: 2; grid-column: 2; margin-top:10px; margin-left:0px; margin-right:0px\"\n                        type=\"range\" min=\"-180\" max=\"180\" step=\"0.1\" class=\"slider\" v-model=\"v$.longitude.$model\">\n                </div>\n\n\n                <div class=\"setting\">\n                    <input type=\"checkbox\" id=\"autoSelectTimeZone\" v-model=\"autoSelectTimeZone\"\n                        style=\"margin-right: 10px; display: inline;\">\n                    <label for=\"autoSelectTimeZone\" class=\"fieldOption\">Automatically set time zone</label>\n                </div>\n\n                <br>\n                <h2>Sundial Settings</h2>\n                <div class=\"setting\">\n                    <label class=\"fieldTitle\">Slant/°</label>\n                    <input class=\"small_input\" v-model=\"v$.slant.$model\">\n                    <div class=\"error\" v-if=\"v$.slant.$dirty && v$.slant.$invalid\">{{\n                        v$.slant.$errors[0].$message }}</div>\n                    <input type=\"range\" :min=\"0\" :max=\"180\" step=\"1\" class=\"slider\" v-model=\"v$.slant.$model\">\n                </div>\n                <div class=\"setting\">\n                    <label class=\"fieldTitle\">Rotation/°</label>\n                    <input class=\"small_input\" v-model=\"v$.rotation.$model\">\n                    <div class=\"error\" v-if=\"v$.rotation.$dirty && v$.rotation.$invalid\">{{\n                        v$.rotation.$errors[0].$message }}</div>\n                    <input type=\"range\" :min=\"-180\" :max=\"180\" step=\"1\" class=\"slider\" v-model=\"v$.rotation.$model\">\n                </div>\n                <div class=\"setting\">\n                    <label class=\"fieldTitle\">Hour lines</label>\n                    <div class=\"checkboxSetting\">\n                        <input type=\"radio\" id=\"solarLines\" value=\"solar\" v-model=\"hourLineStyle\">\n                        <label for=\"solarLines\" class=\"fieldOption\">Solar time</label>\n                    </div>\n                    <div class=\"checkboxSetting\">\n                        <input type=\"radio\" id=\"standardLines\" value=\"standard\" v-model=\"hourLineStyle\">\n                        <label for=\"standardLines\" class=\"fieldOption\">Adjusted for time zone</label>\n                    </div>\n                </div>\n\n                <br>\n                <div class=\"setting\">\n                    <label class=\"fieldTitle\">Numerals</label>\n                    <div class=\"checkboxSetting\">\n                        <input type=\"radio\" id=\"arabic\" value=\"arabic\" v-model=\"numerals\">\n                        <label for=\"arabic\" class=\"fieldOption\">Western Arabic (0-23)</label>\n                    </div>\n                    <div class=\"checkboxSetting\">\n                        <input type=\"radio\" id=\"roman\" value=\"roman\" v-model=\"numerals\">\n                        <label for=\"roman\" class=\"fieldOption\">Roman (I-XXIV)</label>\n                    </div>\n                </div>\n\n                <br>\n                <h2>Misc</h2>\n                <div class=\"checkboxSetting\">\n                    <input type=\"checkbox\" id=\"sunRaysPassThroughEarth\" v-model=\"sunRaysPassThroughEarth\">\n                    <label for=\"sunRaysPassThroughEarth\" class=\"fieldOption\">Sundial remains illuminated at\n                        night</label>\n                </div>\n\n                <br>\n            </div>\n\n        </div>\n\n\n\n        <!-- status overlay -->\n        <div class=\"status\">\n\n            <div style=\"display:flex; flex-direction: row; align-items: center\">\n                <div class=\"time_display\" v-show=\"!isEditingTime\" @click=\"showTimeEntryBox\"\n                    @keydown.space=\"showTimeEntryBox\" tabindex=\"0\">\n                    {{ timeText }}\n                </div>\n                <input v-show=\"isEditingTime\" ref=\"timeEntryBox\" class=\"timeEntryBox\" @blur=\"hideTimeEntryBox\"\n                    @keydown.enter=\"hideTimeEntryBox\" v-model=\"timeEntryValue\">\n                <div v-show=\"!isEditingTime\"\n                    style=\"display: flex; margin-left:10px; justify-content:end; flex-direction: column; align-items: stretch; padding-block: 9px\">\n                    <div class=\"subtitle\">local standard time</div>\n                    <div class=\"subtitle\">(UTC {{ timeZoneText }}) {{ isDaytime ? \"☀️\" : \"🌙\" }}</div>\n                </div>\n\n\n            </div>\n\n\n\n            <div class=\"subtitle\">{{ meanSolarTimeText }} mean solar time</div>\n            <div class=\"subtitle\">{{ apparentSolarTimeText }} apparent solar time</div>\n            <input type=\"range\" min=\"0\" max=\"1440\" step=\"10\" class=\"slider\" id=\"time\" v-model.number=\"localTime\">\n\n            <hr>\n            <div class=\"subtitle\" style=\"margin-top:13px\">{{dateText}}</div>\n            <input type=\"range\" min=\"0\" max=\"364\" step=\"1\" class=\"slider\" id=\"day\" v-model.number=\"day\">\n\n        </div>\n    </div>\n\n\n\n</template>\n\n\n<script lang=\"ts\">\n    import { Line2, OrbitControls } from '@tresjs/cientos'\n    import { onClickOutside } from '@vueuse/core'\n    import interpolate from \"color-interpolate\";\n    import { computed, defineComponent, nextTick, onMounted, reactive, ref, watch } from 'vue'\n    import SunObject from './components/SunObject.vue';\n    import { decimal, helpers, maxValue, minValue, required } from '@vuelidate/validators';\n    import useVuelidate from '@vuelidate/core';\n    import { BasicShadowMap, Vector3, Plane, Euler, Matrix4,} from 'three';\n    import { dateToString, calculateShadowDirection, horizontalToActualCoords, calculateSunHorizontalCoords, timeToString, timeZoneToString, infiniteLineIntersectWithSphereParameters, infiniteLineIntersectWithPlaneWithDir, longitudeToTimeZone, stringToTime, vertIntersectPlanes, sunPosAtEquinox } from '@/calculations';\n    import SundialObject from './components/SundialObject.vue';\n    import CameraOffsetHelper from './components/CameraOffsetHelper.vue';\n    import RendererHelper from './components/RendererHelper.vue';\n    export default defineComponent({\n        name:\"App\",\n        components: {SundialObject, SunObject}\n    })\n</script>\n\n<style>\n    #app {\n        font-family: sans-serif;\n        color: white;\n    }\n</style>\n\n<style scoped>\n    #overlay {\n        position:absolute;\n        width: 100%;\n        height:100%;\n        left:0;\n        top:0;\n        overflow: hidden;\n        display:flex;\n        flex-direction: row;\n        justify-content: space-between;\n        align-items: flex-end;\n        pointer-events: none;\n\n    }\n\n    #sidebar {\n        /* flex:1;\n        flex-grow: 0; */\n        pointer-events:auto;\n        width: 35%;\n        max-width: 500px;\n        min-width:150px;\n        background: rgba(39, 39, 39, 0.95);\n        /* position: relative; */\n        /* left: 0;\n        top:0; */\n        height: 100%;\n        /* padding-top: 20px;\n        padding-left:20px;\n        padding-right: 20px;\n        padding-bottom: 100px; */\n        \n        overflow-x: hidden;\n        overflow-y: scroll;\n    }\n    #sidebar h2 {\n        /* color:white; */\n        font-size: 15pt;\n        background-color: brown\n    }\n\n    #sidebarContent {\n        padding: 20px;\n        width:100%;\n        box-sizing: border-box;\n    }\n\n    .horizontal_settings {\n        flex-direction: row;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 20px;\n        row-gap: 10px;\n        margin-bottom: 10px;\n    }\n\n    .horizontal_settings .setting {\n        flex:1\n    }\n\n    /* .setting label {\n\n    } */\n\n    .fieldTitle {\n        display: block;\n        margin-bottom: 3px;\n        font-size: 11pt;\n        white-space: nowrap\n    }\n\n    .fieldOption {\n        display: inline;\n        /* margin-bottom: 3px; */\n        font-size: 11pt;\n        /* white-space: nowrap */\n    }\n\n    .setting .error {\n        min-width: 100%;\n        width: 0;\n        font-size: 9pt;\n        margin-top: 2px;\n        color: yellow;\n\n    }\n\n    .checkboxSetting label {\n        display: block;\n        /* font-weight: bold; */\n        margin-bottom: 3px;\n        font-size: 11pt;\n        display: inline\n    }\n\n    .checkboxSetting input {\n        margin-right: 10px;\n        display: inline;\n    }\n\n    .small_input {\n        /* width: none; */\n        width: 100%;\n        min-width: 80px;\n        max-width: 100px;\n    }\n\n\n    .slider {\n        width: 100%;\n        opacity: 0.7; /* Fully shown on mouse-over */\n\n    }\n\n    .slider:hover {\n        opacity: 1; /* Fully shown on mouse-over */\n    }\n\n\n    .status {\n        /* position: absolute; */\n        /* bottom:0;\n        right:0; */\n        pointer-events:auto;\n        flex:1;\n        font-family: monospace;\n        /* margin-right: 20px;\n        margin-bottom: 20px; */\n        margin:20px;\n        text-align: left;\n        color:v-bind(\"statusTextColor\");\n        max-width:400px;\n        width:100%\n    }\n\n    .status hr {\n        border-color: v-bind(\"statusTextColor\");\n    }\n\n    .time_display {\n        font-size: 40pt;\n        width: min-content;\n    }\n\n    .timeEntryBox {\n        font-size: 40pt;\n        width: 100%;\n        font-family: monospace;\n    }\n\n    .time_display:focus, .time_display:hover {\n        color:brown\n    }\n\n    .subtitle {\n        font-size: 12pt;\n    }\n\n    input[type=range] {\n        height: 20px;\n    }\n\n    input[type=range][orient=vertical] {\n        writing-mode: vertical-lr;\n        direction: rtl;\n        appearance: slider-vertical;\n        width: 20px;\n        vertical-align: bottom;\n    }\n\n\n\n    #coordBox {\n        background-color: white;\n        width: 100%\n    }\n\n    #markerPoint {\n        width: 10px;\n        height: 10px;\n        transform: translate(-5px, -5px);\n        border-radius: 5px;\n        background-color: brown;\n        grid-row: 1;\n        grid-column: 2;\n        position: absolute;\n        pointer-events: none;\n    }\n\n    #mapImage {\n        width:100%;\n        aspect-ratio: 2 / 1;\n        user-select: none\n    }\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=bcd10722&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=bcd10722&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-bcd10722\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './assets/global.css'\n\ncreateApp(App).mount('#app')\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/sundials/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunksundials\"] = self[\"webpackChunksundials\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(2578); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["render","_ctx","_cache","$props","$setup","$data","$options","_component_TresSphereGeometry","_resolveComponent","_component_TresMeshBasicMaterial","_component_TresMesh","_component_TresObject3D","_openBlock","_createBlock","position","default","_withCtx","_createVNode","args","color","_","defineComponent","name","props","required","type","Array","__exports__","rad","degrees","Math","PI","calculateSunHorizontalCoords","day","time","latitude","longitude","longRad","latRad","D_utc","D_tai","D_tt","L","g","lambda","sin","epsilon","rightAsc","atan2","cos","declination","asin","D_utc_of_last_midnight","trunc","H","T","GMST","pow","omega","deltaPsi","eqeq","GAST","LMST","h","azimuth","altitude","horizontalToActualCoords","multiplyer","x","y","z","sunPosAtEquinox","timeAngle","Vector3","calculateShadowDirection","plateNorm","sunPos","style","norm1","clone","cross","shadowDir","timeToString","hours","floor","toString","padStart","minutes","stringToTime","str","result","match","NaN","Number","parseInt","dateToString","dateObj","Date","parse","toLocaleDateString","undefined","month","timeZoneToString","timeZone","symbol","abs","mins","infiniteLineIntersectWithPlaneWithDir","plane","linePoint","lineDirection","ray","Ray","intersection","intersectPlane","dir","point","ray2","multiplyScalar","infiniteLineIntersectWithSphereParameters","sphereOrigin","sphereRadius","c","distanceToSquared","b","sub","multiply","dot","a","length","discriminant","sqrt","longitudeToTimeZone","round","vertIntersectPlanes","p1","p2","p3","n1","normal","n2","n3","x1","coplanarPoint","x2","x3","f1","crossVectors","f2","f3","det","Matrix3","set","determinant","vectorSum","add","planeIntersection","_component_TresMeshPhongMaterial","_component_Text3D","rotation","_Suspense","font","size","height","castShadow","receiveShadow","center","_createTextVNode","_toDisplayString","text","String","Boolean","components","Text3D","__default__","SundialLetter","_defineComponent","radius","gnomonPosition","origin","Object","Euler","hourLabels","setup","__props","relativeGnomonRotation","computed","gnomonCorrectedRotation","mat","Matrix4","makeRotationFromEuler","invert","value","setFromRotationMatrix","_component_TresCylinderGeometry","_unref","toArray","_createElementBlock","_Fragment","_renderList","hour","label","labelPoint","key","xOffset","camera","sizes","useTresContext","watch","width","zoomMultiple","isPerspectiveCamera","setViewOffset","immediate","renderer","setPixelRatio","window","devicePixelRatio","_withScopeId","n","_pushScopeId","_popScopeId","_hoisted_1","_hoisted_2","id","_hoisted_3","_hoisted_4","_createElementVNode","_hoisted_5","class","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","for","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","_hoisted_53","SundialObject","SunObject","_useCssVars","statusTextColor","sundialOrigin","gnomonRelativePosition","ref","sundialRadius","numeralDistanceFromSundialOrigin","sundialRotation","sundialNormal","applyEuler","localTime","autoSelectTimeZone","numerals","sunRaysPassThroughEarth","hourLineStyle","isEditingTime","timeEntryValue","timeEntryBox","showTimeEntryBox","nextTick","focus","hideTimeEntryBox","newTime","isNaN","onClickOutside","formDefaults","slant","timeZoneRegex","formState","reactive","formRules","decimal","minValue","maxValue","isATimeZone","helpers","withMessage","regex","v$","useVuelidate","newVal","$invalid","parseFloat","newValInt","mapImage","mapImageIsBeingClicked","setLatLngFromMap","e","offsetX","offsetY","toFixed","mapImageMouseMove","mapImageStartClicking","mapImageClick","onMounted","addEventListener","sidebarDims","clientWidth","clientHeight","sidebar","sidebarResizeObserver","ResizeObserver","observe","sunHorizontalCoords","sunCoords","isDaytime","timeText","dateText","meanSolarTime","meanSolarTimeText","apparentSolarTime","timeHours","timeMins","apparentSolarTimeText","timeZoneText","sunlightIntensity","skyColor","interpolate","gnomonAbsolutePosition","stylePlateIntersection","Plane","translate","rayDir","stylePlateIntersectionPoint","stylePlateIntersectionPointOrder","hourLineHours","keys","hourLineTimeAngles","map","i","offsetHour","hourLineDirections","hourLinesCalculationMethod","distanceTo","hourLinePoints","gnomon1","gnomonDir","gnomon2","pointOutsidePlate","projectOnPlane","normalize","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","hourLineSundialSphereIntersectionParameters","lambdas","plateToHourLineHeight","hourLines","lineDir","at","points","labelSphereIntersectLambdas","applyMatrix4","_component_TresPerspectiveCamera","_component_TresDirectionalLight","_component_TresAmbientLight","_component_TresGridHelper","TresCanvas","shadows","shadowMapType","BasicShadowMap","hourLine","Line2","intensity","OrbitControls","target","CameraOffsetHelper","RendererHelper","ref_key","_withDirectives","$event","$model","_vModelText","$dirty","$errors","$message","_createCommentVNode","min","max","step","orient","src","_imports_0","alt","draggable","onMousemove","onMousedown","onClick","_normalizeStyle","_isRef","_vModelCheckbox","_vModelRadio","onKeydown","_withKeys","tabindex","_vShow","onBlur","number","createApp","App","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","j","every","splice","r","getter","__esModule","d","definition","o","defineProperty","enumerable","get","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","p","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","push","__webpack_exports__"],"sourceRoot":""}