{"version":3,"file":"js/app.f198590f.js","mappings":"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","sources":["webpack://sundials/./src/components/SunObject.vue?5d99","webpack://sundials/./src/components/SunObject.vue","webpack://sundials/./src/components/SunObject.vue?d054","webpack://sundials/./src/calculations.ts","webpack://sundials/./src/components/SundialLetter.vue?4fb7","webpack://sundials/./src/components/SundialLetter.vue","webpack://sundials/./src/components/SundialLetter.vue?fc0a","webpack://sundials/./src/components/SundialFaceGrid.vue?a8d1","webpack://sundials/./src/components/SundialFaceGrid.vue","webpack://sundials/./src/components/SundialFaceGrid.vue?45a1","webpack://sundials/./src/components/DialAndGnomonSundial.vue?d235","webpack://sundials/./src/components/DialAndGnomonSundial.vue","webpack://sundials/./src/components/DialAndGnomonSundial.vue?bb24","webpack://sundials/./src/components/CameraHelper.vue","webpack://sundials/./src/components/CameraHelper.vue?1959","webpack://sundials/./src/components/CameraHelper.vue?a02a","webpack://sundials/./src/components/RendererHelper.vue?52e9","webpack://sundials/./src/components/RendererHelper.vue","webpack://sundials/./src/components/RendererHelper.vue?f3a6","webpack://sundials/./src/components/ThreeTimesExplanation.vue","webpack://sundials/./src/walkthrough.ts","webpack://sundials/./src/components/Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue?63e3","webpack://sundials/./src/components/Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue","webpack://sundials/./src/components/Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue?c1b9","webpack://sundials/./src/components/PointSundial.vue","webpack://sundials/./src/components/PointSundial.vue?d9d0","webpack://sundials/./src/components/PointSundial.vue?a8a6","webpack://sundials/./src/components/CompassObject.vue?6834","webpack://sundials/./src/components/CompassObject.vue","webpack://sundials/./src/components/CompassObject.vue?b517","webpack://sundials/./src/App.vue?2a5e","webpack://sundials/./src/App.vue","webpack://sundials/./src/App.vue?7ccd","webpack://sundials/./src/main.ts","webpack://sundials/webpack/bootstrap","webpack://sundials/webpack/runtime/chunk loaded","webpack://sundials/webpack/runtime/compat get default export","webpack://sundials/webpack/runtime/define property getters","webpack://sundials/webpack/runtime/global","webpack://sundials/webpack/runtime/hasOwnProperty shorthand","webpack://sundials/webpack/runtime/make namespace object","webpack://sundials/webpack/runtime/publicPath","webpack://sundials/webpack/runtime/jsonp chunk loading","webpack://sundials/webpack/startup"],"sourcesContent":["import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, openBlock as _openBlock, createBlock as _createBlock, createCommentVNode as _createCommentVNode, withCtx as _withCtx } from \"vue\"\n\nimport { PropType, computed } from 'vue';\n\n    \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SunObject',\n  props: {\n        position: {\n            required: true,\n            type: Object as PropType<{x:number, y:number, z:number}>,\n        },\n        transparent: {\n            required: false,\n            type: Boolean as PropType<boolean>,\n            default: false,\n        }\n    },\n  setup(__props) {\n\n    const props = __props\n\n    // have to copy this for some reason idk make it an array for good measure\n    const positionCopy = computed<[number, number, number]>(() => [props.position.x, props.position.y, props.position.z])\n    \n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresSphereGeometry = _resolveComponent(\"TresSphereGeometry\")!\n  const _component_TresMeshBasicMaterial = _resolveComponent(\"TresMeshBasicMaterial\")!\n  const _component_TresMesh = _resolveComponent(\"TresMesh\")!\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n\n  return (_openBlock(), _createBlock(_component_TresObject3D, { position: positionCopy.value }, {\n    default: _withCtx(() => [\n      _createVNode(_component_TresMesh, null, {\n        default: _withCtx(() => [\n          _createVNode(_component_TresSphereGeometry, { args: [0.5, 20, 16,] }),\n          (props.transparent)\n            ? (_openBlock(), _createBlock(_component_TresMeshBasicMaterial, {\n                key: 0,\n                color: \"#ffffff\",\n                transparent: true,\n                opacity: 0.3\n              }))\n            : (_openBlock(), _createBlock(_component_TresMeshBasicMaterial, {\n                key: 1,\n                color: \"#ffffff\"\n              }))\n        ]),\n        _: 1\n      })\n    ]),\n    _: 1\n  }, 8, [\"position\"]))\n}\n}\n\n})","<!-- 3D sphere representing the sun -->\n\n<script setup lang=\"ts\">\n    import { PropType, defineProps, computed } from 'vue';\n\n    const props = defineProps({\n        position: {\n            required: true,\n            type: Object as PropType<{x:number, y:number, z:number}>,\n        },\n        transparent: {\n            required: false,\n            type: Boolean as PropType<boolean>,\n            default: false,\n        }\n    })\n\n    // have to copy this for some reason idk make it an array for good measure\n    const positionCopy = computed<[number, number, number]>(() => [props.position.x, props.position.y, props.position.z])\n    \n\n</script>\n\n<template>\n    <!-- sun wrapper -->\n    <TresObject3D :position=\"positionCopy\">\n        <!-- sun -->\n        <TresMesh>\n            <TresSphereGeometry :args=\"[0.5, 20, 16,]\" />\n            <TresMeshBasicMaterial v-if=\"props.transparent\" color=\"#ffffff\" :transparent=\"true\" :opacity=\"0.3\" />\n            <TresMeshBasicMaterial v-else color=\"#ffffff\" />\n        </TresMesh>\n\n    </TresObject3D>\n</template>\n","import script from \"./SunObject.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SunObject.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { Euler, Matrix3, Plane, Quaternion, Ray, Vector3 } from \"three\";\n\nexport function rad(degrees: number) {\n    return degrees * Math.PI/180\n}\n\n\n/**\n * Compute the sun's position in horizontal coordinates, using the current date, time, latitude, and longitude.\n * @param day integer, 0 to 364\n * @param time number of minutes since UTC+0 00:00\n * @param latitude degrees\n * @param longitude degrees\n * @returns \n */\nexport function calculateSunHorizontalCoordsFromUTC(day: number, time: number, latitude: number, longitude: number) {\n\n    // 2023\n    const D_utc = 8400.5 + day + time / 1440;\n\n    const {rightAsc, declination} = calculateSunPositionInEquitorialCoords(D_utc)\n\n    /** Terrestrial Time */\n    const D_tt = D_utc_to_D_tt(D_utc)\n    /** Obliquity of the ecliptic */\n    const epsilon = calculateObliquityOfTheEcliptic(D_tt)\n    /**Mean longitude of the sun */\n    const L = calculateMeanLongitudeOfTheSun(D_tt)\n\n\n    // compute hour angle\n    // https://aa.usno.navy.mil/faq/GAST\n    const D_utc_of_last_midnight = Math.trunc(D_utc + 0.5)- 0.5\n    /** Hours since last midnight */\n    const H = (D_utc - D_utc_of_last_midnight) * 24\n    /**Centuries since noon on Jan 1st 2000 */\n    const T = D_tt/36525;\n    /** Greenwich apparent sidereal time (converted to hour angle) */\n    const GMST = (6.697375 + 0.065707485828 * D_utc_of_last_midnight + 1.0027379*H + 0.0854103*T + 0.0000258 * Math.pow(T, 2)) * Math.PI/12\n    const omega = rad(125.04) - rad(0.052954)*D_tt;\n    const deltaPsi = (-0.000319 * Math.sin(omega) - 0.000024 * Math.sin(2 * L)) * Math.PI / 12\n    const eqeq = deltaPsi * Math.cos(epsilon);\n    const GAST = GMST + eqeq;\n\n    const longRad = longitude * Math.PI / 180;\n    const latRad = latitude * Math.PI / 180;\n\n    /** local mean sidereal time */\n    const LMST = GAST + longRad;\n    /** hour angle */\n    const h = LMST - rightAsc;\n\n    return toHorizontalCoords(declination, h, latRad)\n\n}\n\nexport function calculateSunHorizontalCoordsFromApparentSolarTime(day: number, time: number, latitude: number, longitude: number) {\n   \n    // approximate the declination of the sun at noon\n    // strictly speaking the fn below should take a D_utc date/time. But this is max gonna be ~15 minutes off, and it's only the declination we care about anyway which doesn't change much in the course of a day\n    const {declination} = calculateSunPositionInEquitorialCoords(8400.5/*0am on 1/1/2023*/ + time/1440 - longitude/360 + day)\n\n    const hourAngle = (time - 12*60)/1440*Math.PI*2 // radians\n\n    return toHorizontalCoords(declination, hourAngle, latitude * Math.PI / 180)\n\n}\n\n/**\n * \n * @param day 0 to 364\n * @param time 0 to 1440, where 0 is 1 o'clock, 60 is 2 o'clock, etc \n * @param latitude degrees\n * @param longitude degrees\n * @param options - (max|min)Declination - clamp declinations to these if specified\n */\nexport function calculateSunHorizontalCoordsFromBabylonianTime(day: number, time: number, latitude: number, longitude: number, options?:{maxDeclination?:number, minDeclination?:number}) {\n\n    if (Math.abs(latitude) == 90) return null\n\n    // https://www.bcgnomonics.com/types-of-hours\n    // note: for the \"sunrise\" I am using the time when the center of the sun is first visible above the horizon (not accounting for atmospheric refraction)\n\n    const clampBounds = {min:options?.minDeclination, max:options?.maxDeclination}\n\n    // assume that the time between today's sunrise and tomorrow's is the mean (i.e. 24 hours in mst)\n    // get the declination at 18:00 (roughly halfway between today's and tomorrow's sunrise)\n    const sunriseEstDeclination = clamp(calculateSunPositionInEquitorialCoords(8401.25/*6pm on 1/1/2023*/ - longitude/360 + day).declination, clampBounds)\n    const sunriseHourAngle = -calculateSunsetHourAngleNoNull(sunriseEstDeclination, latitude)\n\n    const currentHourAngle = sunriseHourAngle + time/1440*2*Math.PI\n\n    const currentDeclination = clamp(calculateSunPositionInEquitorialCoords(8401/*noon on 1/1/2023*/ - longitude/360 + day + currentHourAngle/(Math.PI*2)).declination, clampBounds)\n\n    return toHorizontalCoords(currentDeclination, currentHourAngle, latitude * Math.PI / 180)\n    \n\n}\n\nexport function calculateSunHorizontalCoordsFromItalianTime(day: number, time: number, latitude: number, longitude: number, options?:{maxDeclination?:number, minDeclination?:number}) {\n\n    if (Math.abs(latitude) == 90) return null\n    const clampBounds = {min:options?.minDeclination, max:options?.maxDeclination}\n    const sunriseEstDeclination = clamp(calculateSunPositionInEquitorialCoords(8400.75/*6am on 1/1/2023*/ - longitude/360 + day).declination, clampBounds)\n    const sunsetHourAngle = calculateSunsetHourAngleNoNull(sunriseEstDeclination, latitude)\n    const currentHourAngle = sunsetHourAngle - 2*Math.PI + time/1440*2*Math.PI\n    const currentDeclination = clamp(calculateSunPositionInEquitorialCoords(8401/*noon on 1/1/2023*/ - longitude/360 + day + currentHourAngle/(Math.PI*2)).declination, clampBounds)\n\n    return toHorizontalCoords(currentDeclination, currentHourAngle, latitude * Math.PI / 180)\n}\n\n\n/**\n * \n * @param day 0 to 364\n * @param time 0 to 720, where 0 is 1 o'clock, 60 is 2 o'clock, etc \n * @param latitude degrees\n * @param longitude degrees\n * @param options - (max|min)Declination - clamp declinations to these if specified\n */\nexport function calculateSunHorizontalCoordsFromSeasonalTime(day: number, time: number, latitude: number, longitude: number, options?:{maxDeclination?:number, minDeclination?:number}) {\n\n    if (Math.abs(latitude) == 90) return null\n    const clampBounds = {min:options?.minDeclination, max:options?.maxDeclination}\n    const sunriseEstDeclination = clamp(calculateSunPositionInEquitorialCoords(8401/*noon on 1/1/2023*/ - longitude/360 + day).declination, clampBounds)\n    const sunsetHourAngle = calculateSunsetHourAngleNoNull(sunriseEstDeclination, latitude)\n    const sunriseHourAngle = -sunsetHourAngle\n    const currentHourAngle = sunriseHourAngle + (sunsetHourAngle-sunriseHourAngle) * time/720\n    const currentDeclination = clamp(calculateSunPositionInEquitorialCoords(8401/*noon on 1/1/2023*/ - longitude/360 + day + currentHourAngle/(Math.PI*2)).declination, clampBounds)\n\n    return toHorizontalCoords(currentDeclination, currentHourAngle, latitude * Math.PI / 180)\n}\n\n\n/**\n * @param D_utc Universal Coordinated Time\n * @returns International Atomic Time\n */\nexport function D_utc_to_D_tai(D_utc:number) {\n    // tai was 37 seconds ahead of UTC in 2023\n    return D_utc + 37 / (24 * 60 * 60)\n}\n\n/**\n * @param D_tai International Atomic Time\n * @returns Terrestrial Time\n */\nexport function D_tai_to_D_tt(D_tai:number) {\n    /**\n     * Terrestrial Time (32.184 seconds ahead of TAI)\n     * https://aa.usno.navy.mil/faq/TT\n     */ \n    return D_tai + 32.184 / (24 * 60 * 60);\n}\n\n/**\n * @param D_utc Universal Coordinated Time\n * @returns Terrestrial Time\n */\nexport function D_utc_to_D_tt(D_utc:number) {\n    return D_tai_to_D_tt(D_utc_to_D_tai(D_utc))\n}\n\n/**\n * (a.k.a epsilon)\n * @param D_tt Terrestrial Time\n * @returns  in radians\n */\nexport function calculateObliquityOfTheEcliptic(D_tt: number) {\n    return rad(23.4393) - rad(3.6e-7) * D_tt\n}\n\n/**\n * @param D_tt Terrestrial Time\n * @returns L in radians\n */\nexport function calculateMeanLongitudeOfTheSun(D_tt: number) {\n    return (rad(280.459) + rad(0.98564736) * D_tt) % (2 * Math.PI)\n}\n\n/**\n * @param declination radians\n * @param hourAngle radians\n * @param latitude radians\n * @returns \n */\nexport function toHorizontalCoords(declination:number, hourAngle:number, latitude:number) {\n    // https://en.wikipedia.org/wiki/Astronomical_coordinate_systems\n    const azimuth = -Math.atan2(Math.cos(declination) * Math.sin(hourAngle), -Math.sin(latitude) * Math.cos(declination) * Math.cos(hourAngle) + Math.cos(latitude) * Math.sin(declination));\n    const altitude = Math.asin(Math.sin(latitude) * Math.sin(declination) + Math.cos(latitude) * Math.cos(declination) * Math.cos(hourAngle));\n\n    return { azimuth, altitude }\n}\n\n/**\n * @param D_utc Universal Coordinated Time\n * @returns equitorial coords in radians\n */\nexport function calculateSunPositionInEquitorialCoords(D_utc: number): {rightAsc:number, declination:number} {\n     // using guide from here: https://en.wikipedia.org/wiki/Position_of_the_Sun\n     // and https://aa.usno.navy.mil/faq/sun_approx\n\n    /** Note about `D_utc`. Always within 1 second of `D_ut`, the observed value.\n     * Leap seconds are added/subtracted to `D_utc` to compensate. \n     * `D_utc` is the (fractional) number of days since noon on January 1st, 2000.\n     * Wikipedia page on position of the sun refers to this value as `n`.\n     * D_utc IS FRACTIONAL here!\n     * */\n\n    /** International Atomic Time */\n    const D_tai = D_utc_to_D_tai(D_utc)\n    /** Terrestrial Time */ \n    const D_tt = D_tai_to_D_tt(D_tai)\n    /** Mean longitude of the sun */\n    const L = calculateMeanLongitudeOfTheSun(D_tt)\n    /** Mean anomaly of the Sun */\n    const g = (rad(357.529) + rad(0.98560028) * D_tt) % (2 * Math.PI);\n    /**Geocentric apparent ecliptic longitude of the Sun (adjusted for aberration) */\n    const lambda = L + rad(1.915) * Math.sin(g) + rad(0.020) * Math.sin(2 * g);\n    /** Mean obliquity of the ecliptic */\n    const epsilon = calculateObliquityOfTheEcliptic(D_tt)\n\n\n    // convert to equitorial coords\n    const rightAsc = Math.atan2(Math.cos(epsilon) * Math.sin(lambda), Math.cos(lambda));\n    const declination = Math.asin(Math.sin(epsilon) * Math.sin(lambda));\n\n    return {rightAsc, declination}\n}\n\n/**\n * To get the sun*rise* hour angle, just use the negative of this.\n * @param declination at noon. radians\n * @param latitude radians\n * @returns hour angle (_0) in radians\n */\nexport function calculateSunsetHourAngle(declination: number, latitude: number) {\n    // https://en.wikipedia.org/wiki/Sunrise_equation\n\n    /** Altitude angle - adjusts for atmospheric refraction and diameter of the sun.\n     * Currently set to 0 to NOT account for the above effects.\n     */\n    const alpha = 0 /*rad(-0.833)*/\n    const numerator = Math.sin(alpha)-Math.sin(latitude)*Math.sin(declination)\n    const denominator = Math.cos(latitude)*Math.cos(declination)\n    if (denominator == 0 || Math.abs(numerator) > Math.abs(denominator)) return null\n    return Math.acos(numerator/denominator)\n\n}\n\n\n/**\n * calculateSunsetHourAngle could be null in extreme cases: sun could be above or below the horizon all day\n * if so, use the next day (or previous day) for which there is a sunrise/set.\n * i.e. if polar day, then the next sunset is at midnight (h=)\n * and for polar night, the next sunset is at midday (h=0)\n * @param declination \n * @param latitude \n * @returns \n */\nexport function calculateSunsetHourAngleNoNull(declination: number, latitude: number) {\n\n    const latRad = latitude/180*Math.PI\n\n    // const isPolarNight = Math.abs(latRad - sunriseEstDeclination) >= Math.PI\n    // const isPolarDay = Math.abs(latRad + sunriseEstDeclination) >= Math.PI\n    const substituteSunsetHourAngle = Math.abs(latRad + declination) > Math.abs(latRad - declination) ? Math.PI : 0\n    return calculateSunsetHourAngle(declination, latRad) ?? substituteSunsetHourAngle\n\n\n}\n\n\n/**\n * Compute coordinates of the sun at distance `multiplyer` from the origin\n * @param azimuth \n * @param altitude \n * @param multiplyer \n * @returns \n */\nexport function horizontalToActualCoords(azimuth: number, altitude: number, multiplyer=15) {\n    return {\n        x: multiplyer * Math.sin(azimuth) * Math.cos(altitude),\n        y: multiplyer * Math.sin(altitude),\n        z: multiplyer * -Math.cos(azimuth) * Math.cos(altitude)\n    }\n}\n\n/** Direction vector to the sun at an equinox (when the plane of the sun orbit is at 90 to the gnomon style)\n * \n * Ignoring eliptical orbit/apparent time effects\n * @param timeAngle Midnight to midnight, 0 to 2\n * @param latitude Latitude, in radians\n*/\nexport function sunPosAtEquinox(timeAngle:number, latitude:number) {\n    return new Vector3(Math.sin(timeAngle), -Math.cos(timeAngle) * Math.cos(latitude), -Math.cos(timeAngle) * Math.sin(latitude));\n}\n\n\n/**\n * Compute vector of the shadow path on the plate at a specific time\n * \n * Be careful when the style is parallel to the plane at the moment the sun sets\n * \n * @param timeAngle Midnight to midnight, 0 to 2\n * @param latitude Latitude, in radians\n * @param plateNorm Normal vector to the plane of the plate\n * @returns\n */\nexport function calculateShadowDirection(timeAngle: number, latitude: number, plateNorm:Vector3) {\n\n\n    /** Position of the sun at an equinox (when the plane of the sun orbit is at 90 to the gnomon style)\n     * \n     * Ignoring eliptical orbit/apparent time effects\n    */\n    const sunPos = sunPosAtEquinox(timeAngle, latitude);\n\n    /** unit vector of the gnomon style */\n    const style = new Vector3(0, Math.sin(latitude), -Math.cos(latitude));\n\n\n    // the direction of the shadow cast at this time can be found by the intersection of the planes:\n    // 1, containing the sunPos and the style\n    // 2, the plate\n    // to do this, find the cross product of the normal vectors to both planes\n\n    const norm1 = sunPos.clone().cross(style);\n    const shadowDir = norm1.clone().cross(plateNorm);\n\n    return shadowDir;\n\n}\n\n/**\n * Critical sun declination boundary at which a polar day occurs\n * @param latitude degrees\n * @returns degrees\n */\nexport function calculatePolarDayDeclination(latitude: number) {\n    if (latitude >= 0)\n        return 90 - latitude /*- 0.833*/\n    else {\n        return -90 - latitude /*- 0.833*/\n    }\n}\n\n\n/**\n * Convert time to string.\n * @param time Minutes from midnight.\n * @returns \n */\nexport function timeToString(time: number) {\n    // const timeObj = new Date();\n    // timeObj.setHours(Math.floor(time / 60));\n    // timeObj.setMinutes(time % 60)\n    // return timeObj.toLocaleTimeString(undefined, { hour: \"numeric\", minute: \"numeric\" })\n\n    const hours = Math.floor((((time / 60)%24)+24)%24).toString().padStart(2, \"0\");\n    const minutes = Math.floor(((time % 60)+60) % 60).toString().padStart(2, \"0\")\n\n    return `${hours}:${minutes}`\n}\n\n/**\n * Parses string times in format `xx:xx`\n * @param str \n * @returns The time, or NaN if could not be parsed.\n */\nexport function stringToTime(str: string) {\n    const result = str.match(/^\\s*([0-9]+)(?::([0-9]*))?\\s*$/);\n    if (!result) return NaN;\n\n    const hours = Number.parseInt(result[1]);\n    if (hours < 0 || hours > 23) return NaN;\n\n    let minutes = 0;\n    if (result[2] && result[2] != \"\") {\n        minutes = Number.parseInt(result[2]);\n        if (minutes < 0 || minutes > 59) return NaN;\n    }\n\n    return hours*60 + minutes;\n\n}\n\n/**\n * Convert day to string\n * @param day Days since 1st January in a non-leap year (0 to 364)\n * @returns \n */\nexport function dateToString(day: number) {\n    // add date to an arbitrary non-leap year\n    const dateObj = new Date(Date.parse(\"2001\") + day * 24 * 60 * 60 * 1000);\n    return dateObj.toLocaleDateString(\"en\", { month: \"long\", day: 'numeric' })\n}\n\n/**\n * Convert time zone to string\n * @param timeZone Minutes difference from UTC\n * @returns \n */\nexport function timeZoneToString(timeZone:number) {\n\n    const symbol = timeZone > 0 ? \"+\"\n        : timeZone < 0 ? \"-\"\n            : \"\";\n    const hours = Math.abs(Math.trunc(timeZone / 60));\n    const mins = Math.abs(timeZone % 60);\n    let result = symbol + hours.toString();\n    if (mins != 0) result += \":\" + mins.toString();\n    return result;\n\n}\n\n/**\n * Intersect an infinite line with a plane\n * @param plane The plane \n * @param linePoint A point on the line \n * @param lineDirection A vector in the direction of the line\n * @returns The point of intersection, if it exists\n */\nexport function infiniteLineIntersectWithPlaneWithDir(plane: Plane, linePoint: Vector3, lineDirection: Vector3) {\n\n    // rays are only infinite in 1 direction. Need 2 rays, try both\n    const ray = new Ray(linePoint, lineDirection);\n    let intersection = ray.intersectPlane(plane, new Vector3())\n    if (intersection) return {dir: 1, point: intersection}\n    \n    const ray2 = new Ray(linePoint, lineDirection.clone().multiplyScalar(-1));\n    intersection = ray2.intersectPlane(plane, new Vector3())\n    if (intersection) return {dir: -1, point:intersection};\n\n    return null;\n}\n\n/**\n * Intersect an infinite line with a plane\n * @param plane The plane \n * @param linePoint A point on the line \n * @param lineDirection A vector in the direction of the line\n * @returns The point of intersection, if it exists, and the direction from the line point traveled.\n */\nexport function infiniteLineIntersectWithPlane(plane: Plane, linePoint: Vector3, lineDirection: Vector3) {\n\n    const ptWithDir = infiniteLineIntersectWithPlaneWithDir(plane, linePoint, lineDirection);\n    if (ptWithDir) return ptWithDir.point;\n    return null;\n}\n\n/**\n * intersections with the sphere and r = linePoint +  * lineDirection\n * find values of , if they exist\n * @param sphereOrigin \n * @param sphereRadius \n * @param linePoint \n * @param lineDirection \n */\nexport function infiniteLineIntersectWithSphereParameters(sphereOrigin: Vector3, sphereRadius: number, linePoint: Vector3, lineDirection: Vector3) {\n\n    // intersections with the sphere and r = linePoint +  * lineDirection\n    // find values of \n    const c = sphereOrigin.distanceToSquared(linePoint) - Math.pow(sphereRadius, 2);\n    const b = sphereOrigin.clone().sub(linePoint).multiply(lineDirection).dot(new Vector3(1, 1, 1)) * -2;\n    const a = Math.pow(lineDirection.length(), 2);\n\n    const discriminant = Math.pow(b, 2) - 4 * a * c;\n    if (discriminant < 0) return [];\n\n    return [\n        (-b - Math.sqrt(discriminant)) / (2 * a),\n        (-b + Math.sqrt(discriminant)) / (2 * a)\n    ]\n \n}\n\n\nexport function infiniteLineIntersectWithSphere(sphereOrigin: Vector3, sphereRadius: number, linePoint: Vector3, lineDirection: Vector3) {\n\n    const roots = infiniteLineIntersectWithSphereParameters(sphereOrigin, sphereRadius, linePoint, lineDirection) ;\n    if (roots.length == 0) return null;\n\n    else return [\n        lineDirection.clone().multiplyScalar(roots[0]).add(linePoint),\n        lineDirection.clone().multiplyScalar(roots[1]).add(linePoint),\n    ]\n\n}\n\nexport function longitudeToTimeZone(longitude:number) {\n    return Math.round(longitude / 360 * 24) * 60;\n}\n\n\n/**\n * Taken from https://stackoverflow.com/a/62141424.\n * \n * Intersecrion point of 3 planes.\n * @returns \n */\nexport function vertIntersectPlanes(p1: Plane, p2: Plane, p3: Plane) {\n    const n1 = p1.normal, n2 = p2.normal, n3 = p3.normal;\n    const x1 = p1.coplanarPoint(new Vector3());\n    const x2 = p2.coplanarPoint(new Vector3());\n    const x3 = p3.coplanarPoint(new Vector3());\n    const f1 = new Vector3().crossVectors(n2, n3).multiplyScalar(x1.dot(n1));\n    const f2 = new Vector3().crossVectors(n3, n1).multiplyScalar(x2.dot(n2));\n    const f3 = new Vector3().crossVectors(n1, n2).multiplyScalar(x3.dot(n3));\n    const det = new Matrix3().set(n1.x, n1.y, n1.z, n2.x, n2.y, n2.z, n3.x, n3.y, n3.z).determinant();\n    if (det == 0) return null;\n    const vectorSum = new Vector3().add(f1).add(f2).add(f3);\n    const planeIntersection = new Vector3(vectorSum.x / det, vectorSum.y / det, vectorSum.z / det);\n    return planeIntersection;\n}\n\n\nexport function nonNullSequence<X>(arr: (X | null)[]): X[] {\n\n    // if all nulls just return empty list\n    if (arr.filter(x => x != null).length == 0) {\n        return []\n    }\n\n    const seq = []\n\n    const firstNullLoc = arr.indexOf(null)\n    if (firstNullLoc == -1/* there are no nulls */) {\n        return [...arr] as X[]\n    }\n\n    // collect the non-null elements into an array, dealing with wrap-around too\n    for (let j = firstNullLoc; j < firstNullLoc + arr.length; j++) {\n        const el = arr[j % arr.length]\n        if (!el) {\n            // null. If the seq is non-empty then we are at the end\n            if (seq.length != 0) {\n                break\n            }\n        } else {\n            seq.push(el)\n        }\n    }\n\n    return seq\n}\n\nexport function padWithRepeatedLastElement<X>(arr: X[], length: number) {\n    const numToPad = length - arr.length;\n    const lastValue = arr[arr.length - 1]\n    for (let k = 0; k < numToPad; k++) {\n        arr.push(lastValue)\n    }\n}\n\n/**\n * there may be nulls in the hour plot.\n * eg it may look like this:\n * [null null null null Vector3 Vector3 Vector3 null null ...]\n * collect the part of the list that is non null.\n * have to keep the number of points in the line constant otherwise cientos complains.\n * make the line 1 longer than the number of points, so they can be made closed if needed.\n * if the non-null line is shorter than needed, pad with the last value of the array.\n */\nexport function extractCloseAndPadSequence<X>(arr: (X|null)[], length:number, placeholder: X, dontClose?:boolean) : X[] {\n\n    const line = nonNullSequence(arr)\n\n\n    if (line.length == 0) {\n        // make an \"empty\" line where all points are the same - rendering it invisible\n        line.push(placeholder)\n    } else if (line.length == length - 1) {\n        // make it closed\n        if (!dontClose) line.push(line[0])\n    }\n\n    padWithRepeatedLastElement(line, length)\n\n    // testing, check that the line is straight\n\n    return line\n}\n\nexport function clamp(val: number, bounds:{min?:number, max?:number}) {\n    if (bounds.min && val < bounds.min) val = bounds.min\n    if (bounds.max && val > bounds.max) val = bounds.max\n    return val\n}\n\nexport function randomColor() {\n    let col = \"#\"\n    for (let i = 0; i < 6; i++)  {\n        col += \"0123456789abcdef\".charAt(Math.floor(Math.random() * 16))\n    }\n    return col\n}\n\n// sometimes switch statements will cause ts errors despite all cases being covered.\n// use this function for detecting when a case is not covered - place after switch.\n// eslint-disable-next-line\nexport function assertUnreachable(x: never) : never {\n    throw new Error(\"Didn't expect to get here\");\n}\n\n// https://stackoverflow.com/a/42770030\nexport function inverseEuler(euler: Euler) {\n    return new Euler().setFromQuaternion( new Quaternion().setFromEuler( euler ).invert() );\n}","import { defineComponent as _defineComponent } from 'vue'\nimport { toDisplayString as _toDisplayString, resolveComponent as _resolveComponent, createVNode as _createVNode, createTextVNode as _createTextVNode, unref as _unref, withCtx as _withCtx, Suspense as _Suspense, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { Text3D } from '@tresjs/cientos';\nimport { PropType, computed } from 'vue'\nimport { Vector3, Vector3Tuple } from \"three\";\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SundialLetter',\n  props: {\n    text: {\n        required: true,\n        type: String as PropType<string>\n    },\n    position: {\n        required: true,\n        type: Object as PropType<Vector3 | Vector3Tuple>,\n    },\n    castShadow: {\n        required: false,\n        default: false,\n        type: Boolean as PropType<boolean>\n    },\n    receiveShadow: {\n        required: false,\n        default: false,\n        type: Boolean as PropType<boolean>\n    },\n    size: {\n        required: false,\n        default: 0.2,\n        type: Number as PropType<number>\n    }\n},\n  setup(__props) {\n\n\nconst props = __props\n\nconst visible = computed(() => props.text != '')\nconst textHeight = computed(() => 0.03 * props.size/0.2)\nconst rotation = [-Math.PI/2, 0, 0] as [number, number, number]\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresMeshPhongMaterial = _resolveComponent(\"TresMeshPhongMaterial\")!\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n\n  return (_openBlock(), _createBlock(_component_TresObject3D, {\n    position: __props.position,\n    rotation: rotation,\n    visible: visible.value\n  }, {\n    default: _withCtx(() => [\n      (_openBlock(), _createBlock(_Suspense, null, {\n        default: _withCtx(() => [\n          _createVNode(_unref(Text3D), {\n            font: \"./fonts/PTSerif_Regular_Only_Numerals.json\",\n            size: __props.size,\n            \"bevel-enabled\": false,\n            height: textHeight.value,\n            \"cast-shadow\": __props.castShadow,\n            \"receive-shadow\": __props.receiveShadow,\n            \"need-updates\": \"\",\n            center: \"\"\n          }, {\n            default: _withCtx(() => [\n              _createTextVNode(_toDisplayString(__props.text) + \" \", 1),\n              _createVNode(_component_TresMeshPhongMaterial, { color: \"#737373\" })\n            ]),\n            _: 1\n          }, 8, [\"size\", \"height\", \"cast-shadow\", \"receive-shadow\"])\n        ]),\n        _: 1\n      }))\n    ]),\n    _: 1\n  }, 8, [\"position\", \"visible\"]))\n}\n}\n\n})","<!-- Letter displayed on the sundial plate. -->\n\n<script setup lang=\"ts\">\n\nimport { Text3D } from '@tresjs/cientos';\nimport { PropType, computed, defineProps } from 'vue'\nimport { Vector3, Vector3Tuple } from \"three\";\nconst props = defineProps({\n    text: {\n        required: true,\n        type: String as PropType<string>\n    },\n    position: {\n        required: true,\n        type: Object as PropType<Vector3 | Vector3Tuple>,\n    },\n    castShadow: {\n        required: false,\n        default: false,\n        type: Boolean as PropType<boolean>\n    },\n    receiveShadow: {\n        required: false,\n        default: false,\n        type: Boolean as PropType<boolean>\n    },\n    size: {\n        required: false,\n        default: 0.2,\n        type: Number as PropType<number>\n    }\n})\n\nconst visible = computed(() => props.text != '')\nconst textHeight = computed(() => 0.03 * props.size/0.2)\nconst rotation = [-Math.PI/2, 0, 0] as [number, number, number]\n\n</script>\n\n<template>\n    <TresObject3D\n        :position=\"position\"\n        :rotation=\"rotation\"\n        :visible=\"visible\"\n    >\n        <Suspense>\n            <Text3D\n                font=\"./fonts/PTSerif_Regular_Only_Numerals.json\"\n                :size=\"size\"\n                :bevel-enabled=\"false\"\n                :height=\"textHeight\"\n                :cast-shadow=\"castShadow\"\n                :receive-shadow=\"receiveShadow\"\n                need-updates\n                center\n            >\n                {{ text }}\n                <TresMeshPhongMaterial\n                    color=\"#737373\"\n                />\n            </Text3D>\n        </Suspense>\n    </TresObject3D>\n</template>\n","import script from \"./SundialLetter.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SundialLetter.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { resolveComponent as _resolveComponent, createVNode as _createVNode, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\"\n\nimport { Color, Euler, Vector3 } from 'three';\nimport { PropType, computed } from 'vue';\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'SundialFaceGrid',\n  props: {\n    sundialRotation: {\n        required: true,\n        type: Object as PropType<Euler>\n    },\n    show:{\n        required: true,\n        type: Boolean as PropType<boolean>\n    },\n    origin: {\n        required: true,\n        type: Object as PropType<Vector3>\n    },\n    radius: {\n        required: true,\n        type: Number as PropType<number>\n    },\n    colorPalette: {\n        required: true,\n        type: String as PropType<\"dark\" | \"light\">\n    }\n},\n  setup(__props) {\n\nconst props = __props\n\nconst size = computed(() => props.radius * 2);\nconst minorLineDivisions = computed(() => size.value*10);\nconst majorLineDivisions = computed(() => size.value)\n\nconst minorLineGridHelperArgsLight = computed(() => [size.value, minorLineDivisions.value, new Color(\"#909090\"), new Color(\"#909090\")] as const)\nconst majorLineGridHelperArgsLight = computed(() => [size.value, majorLineDivisions.value, new Color(\"#666666\"), new Color(\"#666666\")] as const)\n\nconst minorLineGridHelperArgsDark = computed(() => [size.value, minorLineDivisions.value, new Color(\"#909090\"), new Color(\"#909090\")] as const)\nconst majorLineGridHelperArgsDark = computed(() => [size.value, majorLineDivisions.value, new Color(\"#ffffff\"), new Color(\"#ffffff\")] as const)\n\nconst lightGridsVisible = computed(() => props.colorPalette == \"light\" && props.show)\nconst darkGridsVisible = computed(() => props.colorPalette == \"dark\" && props.show)\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresGridHelper = _resolveComponent(\"TresGridHelper\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_TresGridHelper, {\n      visible: lightGridsVisible.value,\n      args: minorLineGridHelperArgsLight.value,\n      position: props.origin,\n      rotation: props.sundialRotation\n    }, null, 8, [\"visible\", \"args\", \"position\", \"rotation\"]),\n    _createVNode(_component_TresGridHelper, {\n      visible: lightGridsVisible.value,\n      args: majorLineGridHelperArgsLight.value,\n      position: props.origin,\n      rotation: props.sundialRotation\n    }, null, 8, [\"visible\", \"args\", \"position\", \"rotation\"]),\n    _createVNode(_component_TresGridHelper, {\n      visible: darkGridsVisible.value,\n      args: minorLineGridHelperArgsDark.value,\n      position: props.origin,\n      rotation: props.sundialRotation\n    }, null, 8, [\"visible\", \"args\", \"position\", \"rotation\"]),\n    _createVNode(_component_TresGridHelper, {\n      visible: darkGridsVisible.value,\n      args: majorLineGridHelperArgsDark.value,\n      position: props.origin,\n      rotation: props.sundialRotation\n    }, null, 8, [\"visible\", \"args\", \"position\", \"rotation\"])\n  ], 64))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { Color, Euler, Vector3 } from 'three';\nimport { PropType, computed, defineProps } from 'vue';\n\nconst props = defineProps({\n    sundialRotation: {\n        required: true,\n        type: Object as PropType<Euler>\n    },\n    show:{\n        required: true,\n        type: Boolean as PropType<boolean>\n    },\n    origin: {\n        required: true,\n        type: Object as PropType<Vector3>\n    },\n    radius: {\n        required: true,\n        type: Number as PropType<number>\n    },\n    colorPalette: {\n        required: true,\n        type: String as PropType<\"dark\" | \"light\">\n    }\n})\n\nconst size = computed(() => props.radius * 2);\nconst minorLineDivisions = computed(() => size.value*10);\nconst majorLineDivisions = computed(() => size.value)\n\nconst minorLineGridHelperArgsLight = computed(() => [size.value, minorLineDivisions.value, new Color(\"#909090\"), new Color(\"#909090\")] as const)\nconst majorLineGridHelperArgsLight = computed(() => [size.value, majorLineDivisions.value, new Color(\"#666666\"), new Color(\"#666666\")] as const)\n\nconst minorLineGridHelperArgsDark = computed(() => [size.value, minorLineDivisions.value, new Color(\"#909090\"), new Color(\"#909090\")] as const)\nconst majorLineGridHelperArgsDark = computed(() => [size.value, majorLineDivisions.value, new Color(\"#ffffff\"), new Color(\"#ffffff\")] as const)\n\nconst lightGridsVisible = computed(() => props.colorPalette == \"light\" && props.show)\nconst darkGridsVisible = computed(() => props.colorPalette == \"dark\" && props.show)\n\n\n\n</script>\n\n<template>\n    <TresGridHelper :visible=\"lightGridsVisible\" :args=\"minorLineGridHelperArgsLight\" :position=\"props.origin\"\n        :rotation=\"props.sundialRotation\" />\n    <TresGridHelper :visible=\"lightGridsVisible\" :args=\"majorLineGridHelperArgsLight\" :position=\"props.origin\"\n        :rotation=\"props.sundialRotation\" />\n\n    <TresGridHelper :visible=\"darkGridsVisible\" :args=\"minorLineGridHelperArgsDark\" :position=\"props.origin\"\n        :rotation=\"props.sundialRotation\" />\n    <TresGridHelper :visible=\"darkGridsVisible\" :args=\"majorLineGridHelperArgsDark\" :position=\"props.origin\"\n        :rotation=\"props.sundialRotation\" />\n</template>","import script from \"./SundialFaceGrid.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./SundialFaceGrid.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, unref as _unref, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, createBlock as _createBlock, resolveComponent as _resolveComponent, withCtx as _withCtx } from \"vue\"\n\nimport SundialLetter from './SundialLetter.vue';\nimport { PropType, computed, ref, watch } from 'vue'\nimport { Euler, Matrix4, Plane, Vector3 } from 'three';\nimport { assertUnreachable, calculateShadowDirection, infiniteLineIntersectWithPlaneWithDir, infiniteLineIntersectWithSphereParameters, sunPosAtEquinox, vertIntersectPlanes } from '@/calculations';\nimport { Line2 } from '@tresjs/cientos'\nimport SundialFaceGrid from \"./SundialFaceGrid.vue\"\n\n\n    \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'DialAndGnomonSundial',\n  props: {\n        show: {\n            required: true,\n            type: Boolean as PropType<boolean>\n        },\n        latitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        longitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        radius: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        gnomonPosition: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        origin: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        rotation: {\n            required: true,\n            type: Object as PropType<Euler>\n        },\n        hourLineStyle: {\n            required: true,\n            type: String as PropType<\"solar\" | \"standard\">\n        },\n        timeZone: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        numeralDistanceFromSundialOrigin: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        showGrid: {\n            required: true,\n            type: Boolean as PropType<boolean>\n        },\n        gridColorPalette: {\n            required: true,\n            type: String as PropType<\"light\" | \"dark\">\n        }\n\n    },\n  setup(__props) {\n\n\n\n\nconst props = __props;\n\n    // copy props only when visible, then do calculations on the copied props.\n    const freezeProps = ref({...props})\n    watch(props, (newValue) => {\n        if (newValue.show) {\n            freezeProps.value = {...newValue}\n        }\n    }, {immediate: true})\n\n    const relativeGnomonRotation = computed(() => (90-freezeProps.value.latitude)*Math.PI/180);\n\n    // rotation of the gnomon relative to the sundial plate\n    const gnomonCorrectedRotation = computed(() => {\n        // apply the gnomon rotation and remove the object3d rotation\n\n        const mat = new Matrix4().makeRotationFromEuler(freezeProps.value.rotation).invert()\n            .multiply(new Matrix4().makeRotationFromEuler(new Euler(-relativeGnomonRotation.value, 0, 0)))\n\n        return new Euler().setFromRotationMatrix(mat);\n\n    })\n\n    let sundialNormal = computed(() => new Vector3(0, 1, 0).applyEuler(freezeProps.value.rotation));\n\n    let gnomonAbsolutePosition = computed(() => {\n        return new Vector3(...freezeProps.value.gnomonPosition)\n            .applyEuler(freezeProps.value.rotation)\n            .add(new Vector3(...freezeProps.value.origin))\n    })\n    /** if there is an interection return it, and whether the intersection is in the positive direction of the gnomon vector.*/\n    let stylePlateIntersection = computed(() => {\n        // intersect the plane of the plate with the line of the sundial gnomon.\n        const plane = new Plane(sundialNormal.value, 0).translate(new Vector3(...freezeProps.value.origin));\n        const rayDir = new Vector3(0, -(Math.sin(freezeProps.value.latitude * Math.PI / 180)), (Math.cos(freezeProps.value.latitude * Math.PI / 180)));\n        return infiniteLineIntersectWithPlaneWithDir(plane, gnomonAbsolutePosition.value, rayDir);\n    })\n    let stylePlateIntersectionPoint = computed(() => stylePlateIntersection.value?.point ?? null);\n    /** If the intersection with the plate lies on the line between the center of the gnomon and celestial north, then this value is -1. If south, then 1.*/\n    let stylePlateIntersectionPointOrder = computed(() => stylePlateIntersection.value?.dir ?? null)\n\n   \n    const hourLineHours = [...Array(24).keys()];\n\n    // The hours expressed in the range midnight to midnight, 0 to 2\n    const hourLineTimeAngles = computed(() => hourLineHours.map(i => {\n        let offsetHour;\n        if (freezeProps.value.hourLineStyle == 'standard') {\n            // need to adjust for time zones\n            offsetHour = i - freezeProps.value.timeZone / 60 + freezeProps.value.longitude * 24 / 360\n        }\n        else {\n            offsetHour = i;\n        }\n        return ((((offsetHour * 60) % 1440) + 1440) % 1440) * Math.PI * 2 / 1440\n    }))\n\n    // direction vector of each hour line on the sundial\n    const hourLineDirections = computed(() => hourLineTimeAngles.value.map(timeAngle => {\n        return calculateShadowDirection(\n            timeAngle,\n            freezeProps.value.latitude * Math.PI / 180,\n            new Vector3(...sundialNormal.value)\n        ).multiplyScalar((stylePlateIntersectionPointOrder.value ?? 1))\n        // the scalar multiple is to fix a bug with the numerals being offset by 12 hours in some cases.\n    }));\n\n    /** If the style plate intersection point is really far away from the sundial origin, or doesn't exist, then we need to calculate the hour lines differently. */\n    const hourLinesCalculationMethod = computed(() => {\n        if (stylePlateIntersectionPoint.value && stylePlateIntersectionPoint.value.distanceTo(freezeProps.value.origin) < 1000) {\n            return \"stylePlateIntersection\"\n        } else {\n            return \"otherIntersection\"\n        }\n    })\n\n    // the point used, in addition to the direction vector, to fully define the hour line.\n    const hourLinePoints = computed(() => {\n        switch (hourLinesCalculationMethod.value) {\n            case 'stylePlateIntersection':\n                return hourLineHours.map(() => stylePlateIntersectionPoint.value as Vector3)\n            case 'otherIntersection': {\n\n                /**\n                 * Instead of using the stylePlateIntersectionPoint for every line, use a different point for each line.\n                 * This point is at the intersection of 3 planes:\n                 * 1. The plane containing the mean sun position and style\n                 * 2. The surface of the sundial onto which the gnomon's shadow strikes (top surface)\n                 * 3. A plane that is perpendicular to the direction of the style, and which does not intersect with the 3d sundial object\n                 * */ \n                const latRad = freezeProps.value.latitude * Math.PI / 180;\n                const gnomon1 = gnomonAbsolutePosition.value;\n                const gnomonDir = new Vector3(0, Math.sin(latRad), -Math.cos(latRad))\n                const gnomon2 = gnomonDir.clone().add(gnomon1);\n                // a point 1 unit off the side of the sundial plate\n                const pointOutsidePlate = gnomonDir.clone()\n                    .projectOnPlane(sundialNormal.value)\n                    .normalize()\n                    .multiplyScalar((freezeProps.value.radius + 1) * -(stylePlateIntersectionPointOrder.value ?? 1))\n                    .add(freezeProps.value.origin);\n\n                const p2 = new Plane().setFromNormalAndCoplanarPoint(sundialNormal.value, freezeProps.value.origin);\n                const p3 = new Plane().setFromNormalAndCoplanarPoint(gnomonDir, pointOutsidePlate);\n\n                return hourLineTimeAngles.value.map((timeAngle) => {\n\n                    const sunPos = sunPosAtEquinox(timeAngle, latRad)\n                    const p1 = new Plane().setFromCoplanarPoints(sunPos.clone().add(gnomon1), gnomon1, gnomon2);\n                    const point = vertIntersectPlanes(p1, p2, p3) ?? pointOutsidePlate;\n                    return point;\n                })\n            }\n        }\n        assertUnreachable(hourLinesCalculationMethod.value);\n        return []\n        \n    })\n\n\n\n    // lambdas of the formula plateStyleIntersectionPoint + lambda * shadowDir such that it intersects the edge of the sundial plate.\n    let hourLineSundialSphereIntersectionParameters = computed(() => {\n\n        return hourLineHours.map((hour, i) => {\n            const point = hourLinePoints.value[i];\n            const dir = hourLineDirections.value[i];\n            // to get the portion of the line we want, intersect the hour line with a sphere centered on the sundial plate origin.\n            const lambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...freezeProps.value.origin), freezeProps.value.radius, point, dir);\n            if (lambdas.length == 0) return [];\n            // lambda = 0 is the plate/style intersection point. Negative values are on the wrong side.\n            if (lambdas[0] < 0 && lambdas[1] < 0) return [];\n            // only display positive values\n            if (lambdas[0] < 0) lambdas[0] = 0;\n            // we know that lambdas[1] > 0.\n            return lambdas\n        })\n\n    })\n\n    // vector to raise the sundial lines a bit off the plate\n    let plateToHourLineHeight = computed(() => sundialNormal.value.clone().normalize().multiplyScalar(0.007));\n\n    let hourLines = computed(() => hourLineHours.map((hour, i) => {\n        const linePoint = hourLinePoints.value[i];\n        const lineDir = hourLineDirections.value[i];\n        const lambdas = hourLineSundialSphereIntersectionParameters.value[i];\n\n        const labelPoint = (() => {\n            // where the label should be displayed.\n            // Intersect the hour line with a sphere of radius smaller than the sundial radius, centered on the sundial origin\n            const labelSphereIntersectLambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...freezeProps.value.origin), freezeProps.value.numeralDistanceFromSundialOrigin, linePoint, lineDir);\n            if (labelSphereIntersectLambdas.length == 0) return null;\n            if (labelSphereIntersectLambdas[1] < 0) return null;\n            const labelPoint = lineDir.clone().multiplyScalar(labelSphereIntersectLambdas[1]).add(linePoint);\n            // prevent numbers from getting too bunched up\n            if (hourLinesCalculationMethod.value == \"stylePlateIntersection\" && linePoint.distanceTo(labelPoint) < 2.5) return null;\n            // move to relative coordinate of sundial\n            labelPoint.sub(freezeProps.value.origin).applyMatrix4(new Matrix4().makeRotationFromEuler(freezeProps.value.rotation).invert())\n            return labelPoint.toArray();\n        })()\n\n\n        return {\n            hour: hour,\n            label: labelPoint ? hour.toString() : \"\",\n            points: (lambdas.length == 0) \n            ? [new Vector3(0, 0, 0), new Vector3(0, 0, 0)] \n            : [\n                lineDir.clone().multiplyScalar(lambdas[0]).add(linePoint).add(plateToHourLineHeight.value),\n                lineDir.clone().multiplyScalar(lambdas[1]).add(linePoint).add(plateToHourLineHeight.value),\n            ],\n            labelPoint: labelPoint ?? [0,0,0]\n        }\n    }));\n\nconst rotationCopy = computed(() => freezeProps.value.rotation.clone())\nconst plateGeometryArgs = computed<[number, number, number]>(() => [freezeProps.value.radius, freezeProps.value.radius, 0.1])\nconst sundialFaceOriginRaised = computed(() => freezeProps.value.origin.clone().add(plateToHourLineHeight.value))\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n  const _component_TresCylinderGeometry = _resolveComponent(\"TresCylinderGeometry\")!\n  const _component_TresMeshPhongMaterial = _resolveComponent(\"TresMeshPhongMaterial\")!\n  const _component_TresMesh = _resolveComponent(\"TresMesh\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_TresObject3D, { visible: __props.show }, {\n      default: _withCtx(() => [\n        _createVNode(SundialFaceGrid, {\n          sundialRotation: freezeProps.value.rotation,\n          show: freezeProps.value.showGrid,\n          origin: sundialFaceOriginRaised.value,\n          radius: freezeProps.value.radius,\n          colorPalette: freezeProps.value.gridColorPalette\n        }, null, 8, [\"sundialRotation\", \"show\", \"origin\", \"radius\", \"colorPalette\"]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(hourLines), ({points, hour}) => {\n          return (_openBlock(), _createBlock(_unref(Line2), {\n            key: hour,\n            \"line-width\": 1,\n            points: points,\n            color: \"#FFFFFF\"\n          }, null, 8, [\"points\"]))\n        }), 128))\n      ]),\n      _: 1\n    }, 8, [\"visible\"]),\n    _createVNode(_component_TresObject3D, {\n      visible: __props.show,\n      position: freezeProps.value.origin,\n      rotation: rotationCopy.value\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_TresMesh, {\n          position: [0,-0.05,0],\n          \"cast-shadow\": \"\",\n          \"receive-shadow\": \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_TresCylinderGeometry, { args: plateGeometryArgs.value }, null, 8, [\"args\"]),\n            _createVNode(_component_TresMeshPhongMaterial, { color: \"#f9ecec\" })\n          ]),\n          _: 1\n        }),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(_unref(hourLines), (hourLine) => {\n          return (_openBlock(), _createBlock(SundialLetter, {\n            key: hourLine.hour,\n            text: hourLine.label,\n            position: hourLine.labelPoint,\n            \"receive-shadow\": \"\"\n          }, null, 8, [\"text\", \"position\"]))\n        }), 128)),\n        _createVNode(_component_TresMesh, {\n          position: freezeProps.value.gnomonPosition,\n          rotation: gnomonCorrectedRotation.value,\n          \"cast-shadow\": \"\",\n          \"receive-shadow\": \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_TresCylinderGeometry, { args: [0.05, 0.05, 2] }),\n            _createVNode(_component_TresMeshPhongMaterial, { color: \"#b7b7b7\" })\n          ]),\n          _: 1\n        }, 8, [\"position\", \"rotation\"])\n      ]),\n      _: 1\n    }, 8, [\"visible\", \"position\", \"rotation\"])\n  ], 64))\n}\n}\n\n})","<!-- 3D object of the sundial -->\n<script setup lang=\"ts\">\n\n\n\nimport SundialLetter from './SundialLetter.vue';\nimport { PropType, computed, defineProps, ref, watch } from 'vue'\nimport { Euler, Matrix4, Plane, Vector3 } from 'three';\nimport { assertUnreachable, calculateShadowDirection, infiniteLineIntersectWithPlaneWithDir, infiniteLineIntersectWithSphereParameters, sunPosAtEquinox, vertIntersectPlanes } from '@/calculations';\nimport { Line2 } from '@tresjs/cientos'\nimport SundialFaceGrid from \"./SundialFaceGrid.vue\"\n\n\n    const props = defineProps(\n    {\n        show: {\n            required: true,\n            type: Boolean as PropType<boolean>\n        },\n        latitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        longitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        radius: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        gnomonPosition: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        origin: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        rotation: {\n            required: true,\n            type: Object as PropType<Euler>\n        },\n        hourLineStyle: {\n            required: true,\n            type: String as PropType<\"solar\" | \"standard\">\n        },\n        timeZone: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        numeralDistanceFromSundialOrigin: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        showGrid: {\n            required: true,\n            type: Boolean as PropType<boolean>\n        },\n        gridColorPalette: {\n            required: true,\n            type: String as PropType<\"light\" | \"dark\">\n        }\n\n    });\n\n    // copy props only when visible, then do calculations on the copied props.\n    const freezeProps = ref({...props})\n    watch(props, (newValue) => {\n        if (newValue.show) {\n            freezeProps.value = {...newValue}\n        }\n    }, {immediate: true})\n\n    const relativeGnomonRotation = computed(() => (90-freezeProps.value.latitude)*Math.PI/180);\n\n    // rotation of the gnomon relative to the sundial plate\n    const gnomonCorrectedRotation = computed(() => {\n        // apply the gnomon rotation and remove the object3d rotation\n\n        const mat = new Matrix4().makeRotationFromEuler(freezeProps.value.rotation).invert()\n            .multiply(new Matrix4().makeRotationFromEuler(new Euler(-relativeGnomonRotation.value, 0, 0)))\n\n        return new Euler().setFromRotationMatrix(mat);\n\n    })\n\n    let sundialNormal = computed(() => new Vector3(0, 1, 0).applyEuler(freezeProps.value.rotation));\n\n    let gnomonAbsolutePosition = computed(() => {\n        return new Vector3(...freezeProps.value.gnomonPosition)\n            .applyEuler(freezeProps.value.rotation)\n            .add(new Vector3(...freezeProps.value.origin))\n    })\n    /** if there is an interection return it, and whether the intersection is in the positive direction of the gnomon vector.*/\n    let stylePlateIntersection = computed(() => {\n        // intersect the plane of the plate with the line of the sundial gnomon.\n        const plane = new Plane(sundialNormal.value, 0).translate(new Vector3(...freezeProps.value.origin));\n        const rayDir = new Vector3(0, -(Math.sin(freezeProps.value.latitude * Math.PI / 180)), (Math.cos(freezeProps.value.latitude * Math.PI / 180)));\n        return infiniteLineIntersectWithPlaneWithDir(plane, gnomonAbsolutePosition.value, rayDir);\n    })\n    let stylePlateIntersectionPoint = computed(() => stylePlateIntersection.value?.point ?? null);\n    /** If the intersection with the plate lies on the line between the center of the gnomon and celestial north, then this value is -1. If south, then 1.*/\n    let stylePlateIntersectionPointOrder = computed(() => stylePlateIntersection.value?.dir ?? null)\n\n   \n    const hourLineHours = [...Array(24).keys()];\n\n    // The hours expressed in the range midnight to midnight, 0 to 2\n    const hourLineTimeAngles = computed(() => hourLineHours.map(i => {\n        let offsetHour;\n        if (freezeProps.value.hourLineStyle == 'standard') {\n            // need to adjust for time zones\n            offsetHour = i - freezeProps.value.timeZone / 60 + freezeProps.value.longitude * 24 / 360\n        }\n        else {\n            offsetHour = i;\n        }\n        return ((((offsetHour * 60) % 1440) + 1440) % 1440) * Math.PI * 2 / 1440\n    }))\n\n    // direction vector of each hour line on the sundial\n    const hourLineDirections = computed(() => hourLineTimeAngles.value.map(timeAngle => {\n        return calculateShadowDirection(\n            timeAngle,\n            freezeProps.value.latitude * Math.PI / 180,\n            new Vector3(...sundialNormal.value)\n        ).multiplyScalar((stylePlateIntersectionPointOrder.value ?? 1))\n        // the scalar multiple is to fix a bug with the numerals being offset by 12 hours in some cases.\n    }));\n\n    /** If the style plate intersection point is really far away from the sundial origin, or doesn't exist, then we need to calculate the hour lines differently. */\n    const hourLinesCalculationMethod = computed(() => {\n        if (stylePlateIntersectionPoint.value && stylePlateIntersectionPoint.value.distanceTo(freezeProps.value.origin) < 1000) {\n            return \"stylePlateIntersection\"\n        } else {\n            return \"otherIntersection\"\n        }\n    })\n\n    // the point used, in addition to the direction vector, to fully define the hour line.\n    const hourLinePoints = computed(() => {\n        switch (hourLinesCalculationMethod.value) {\n            case 'stylePlateIntersection':\n                return hourLineHours.map(() => stylePlateIntersectionPoint.value as Vector3)\n            case 'otherIntersection': {\n\n                /**\n                 * Instead of using the stylePlateIntersectionPoint for every line, use a different point for each line.\n                 * This point is at the intersection of 3 planes:\n                 * 1. The plane containing the mean sun position and style\n                 * 2. The surface of the sundial onto which the gnomon's shadow strikes (top surface)\n                 * 3. A plane that is perpendicular to the direction of the style, and which does not intersect with the 3d sundial object\n                 * */ \n                const latRad = freezeProps.value.latitude * Math.PI / 180;\n                const gnomon1 = gnomonAbsolutePosition.value;\n                const gnomonDir = new Vector3(0, Math.sin(latRad), -Math.cos(latRad))\n                const gnomon2 = gnomonDir.clone().add(gnomon1);\n                // a point 1 unit off the side of the sundial plate\n                const pointOutsidePlate = gnomonDir.clone()\n                    .projectOnPlane(sundialNormal.value)\n                    .normalize()\n                    .multiplyScalar((freezeProps.value.radius + 1) * -(stylePlateIntersectionPointOrder.value ?? 1))\n                    .add(freezeProps.value.origin);\n\n                const p2 = new Plane().setFromNormalAndCoplanarPoint(sundialNormal.value, freezeProps.value.origin);\n                const p3 = new Plane().setFromNormalAndCoplanarPoint(gnomonDir, pointOutsidePlate);\n\n                return hourLineTimeAngles.value.map((timeAngle) => {\n\n                    const sunPos = sunPosAtEquinox(timeAngle, latRad)\n                    const p1 = new Plane().setFromCoplanarPoints(sunPos.clone().add(gnomon1), gnomon1, gnomon2);\n                    const point = vertIntersectPlanes(p1, p2, p3) ?? pointOutsidePlate;\n                    return point;\n                })\n            }\n        }\n        assertUnreachable(hourLinesCalculationMethod.value);\n        return []\n        \n    })\n\n\n\n    // lambdas of the formula plateStyleIntersectionPoint + lambda * shadowDir such that it intersects the edge of the sundial plate.\n    let hourLineSundialSphereIntersectionParameters = computed(() => {\n\n        return hourLineHours.map((hour, i) => {\n            const point = hourLinePoints.value[i];\n            const dir = hourLineDirections.value[i];\n            // to get the portion of the line we want, intersect the hour line with a sphere centered on the sundial plate origin.\n            const lambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...freezeProps.value.origin), freezeProps.value.radius, point, dir);\n            if (lambdas.length == 0) return [];\n            // lambda = 0 is the plate/style intersection point. Negative values are on the wrong side.\n            if (lambdas[0] < 0 && lambdas[1] < 0) return [];\n            // only display positive values\n            if (lambdas[0] < 0) lambdas[0] = 0;\n            // we know that lambdas[1] > 0.\n            return lambdas\n        })\n\n    })\n\n    // vector to raise the sundial lines a bit off the plate\n    let plateToHourLineHeight = computed(() => sundialNormal.value.clone().normalize().multiplyScalar(0.007));\n\n    let hourLines = computed(() => hourLineHours.map((hour, i) => {\n        const linePoint = hourLinePoints.value[i];\n        const lineDir = hourLineDirections.value[i];\n        const lambdas = hourLineSundialSphereIntersectionParameters.value[i];\n\n        const labelPoint = (() => {\n            // where the label should be displayed.\n            // Intersect the hour line with a sphere of radius smaller than the sundial radius, centered on the sundial origin\n            const labelSphereIntersectLambdas = infiniteLineIntersectWithSphereParameters(new Vector3(...freezeProps.value.origin), freezeProps.value.numeralDistanceFromSundialOrigin, linePoint, lineDir);\n            if (labelSphereIntersectLambdas.length == 0) return null;\n            if (labelSphereIntersectLambdas[1] < 0) return null;\n            const labelPoint = lineDir.clone().multiplyScalar(labelSphereIntersectLambdas[1]).add(linePoint);\n            // prevent numbers from getting too bunched up\n            if (hourLinesCalculationMethod.value == \"stylePlateIntersection\" && linePoint.distanceTo(labelPoint) < 2.5) return null;\n            // move to relative coordinate of sundial\n            labelPoint.sub(freezeProps.value.origin).applyMatrix4(new Matrix4().makeRotationFromEuler(freezeProps.value.rotation).invert())\n            return labelPoint.toArray();\n        })()\n\n\n        return {\n            hour: hour,\n            label: labelPoint ? hour.toString() : \"\",\n            points: (lambdas.length == 0) \n            ? [new Vector3(0, 0, 0), new Vector3(0, 0, 0)] \n            : [\n                lineDir.clone().multiplyScalar(lambdas[0]).add(linePoint).add(plateToHourLineHeight.value),\n                lineDir.clone().multiplyScalar(lambdas[1]).add(linePoint).add(plateToHourLineHeight.value),\n            ],\n            labelPoint: labelPoint ?? [0,0,0]\n        }\n    }));\n\nconst rotationCopy = computed(() => freezeProps.value.rotation.clone())\nconst plateGeometryArgs = computed<[number, number, number]>(() => [freezeProps.value.radius, freezeProps.value.radius, 0.1])\nconst sundialFaceOriginRaised = computed(() => freezeProps.value.origin.clone().add(plateToHourLineHeight.value))\n\n</script>\n\n<template>\n\n    <!-- hour lines (calculated in world coordinates)-->\n    <TresObject3D :visible=\"show\">\n\n        <!-- grid -->\n        <SundialFaceGrid :sundialRotation=\"freezeProps.rotation\" :show=\"freezeProps.showGrid\"\n            :origin=\"sundialFaceOriginRaised\" :radius=\"freezeProps.radius\"\n            :colorPalette=\"freezeProps.gridColorPalette\" />\n\n        <template v-for=\"{points, hour} in hourLines\" v-bind:key=\"hour\">\n            <Line2 :line-width=\"1\" :points=\"points\" color=\"#FFFFFF\" />\n        </template>\n    </TresObject3D>\n\n    <TresObject3D :visible=\"show\" :position=\"freezeProps.origin\" :rotation=\"rotationCopy\">\n\n        <!-- plate -->\n        <TresMesh :position=\"[0,-0.05,0]\" cast-shadow receive-shadow>\n            <TresCylinderGeometry :args=\"plateGeometryArgs\" />\n            <TresMeshPhongMaterial color=\"#f9ecec\" />\n        </TresMesh>\n\n        <!-- numerals -->\n        <template v-for=\"hourLine in hourLines\" :key=\"hourLine.hour\">\n            <SundialLetter :text=\"hourLine.label\" :position=\"hourLine.labelPoint\" receive-shadow />\n        </template>\n\n        <!-- Style/gnomon -->\n        <TresMesh :position=\"freezeProps.gnomonPosition\" :rotation=\"gnomonCorrectedRotation\" cast-shadow receive-shadow>\n            <TresCylinderGeometry :args=\"[0.05, 0.05, 2]\" />\n            <TresMeshPhongMaterial color=\"#b7b7b7\" />\n        </TresMesh>\n    </TresObject3D>\n\n</template>\n\n","import script from \"./DialAndGnomonSundial.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./DialAndGnomonSundial.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!-- Make the focus point of the camera a bit off center on the canvas -->\n\n<script lang=\"ts\" setup>\nimport { useTresContext, useLoop} from '@tresjs/core';\nimport { Euler, OrthographicCamera, PerspectiveCamera, Plane, Quaternion, Vector3} from 'three';\nimport { PropType, watch, defineProps, defineEmits, ref } from 'vue';\nimport { OrbitControls, MapControls } from 'three-stdlib';\nimport { infiniteLineIntersectWithPlane } from '@/calculations';\n\n\nconst {camera,  sizes, renderer, invalidate, cameras, setCameraActive} = useTresContext();\n\nconst props = defineProps({\n    xOffset: {\n        required: true,\n        type: Number as PropType<number>\n    },\n    zoomPerSecond : {\n        required: false,\n        default:1,\n        type: Number as PropType<number>\n    },\n    timeAdvanceSpeed: {\n        required: true,\n        type: Number as PropType<number>\n    },\n    target: {\n        required: true,\n        type: Object as PropType<Vector3>\n    },\n    sundialRotation: {\n        required: true,\n        type: Object as PropType<Euler>\n    },\n    sundialOrigin: {\n        required: true,\n        type: Object as PropType<Vector3>\n    },\n    snapCamera: {\n        required: true,\n        type: Boolean as PropType<boolean>\n    }\n});\n\nconst emit = defineEmits<{\n    // cameraPosChange:[pos:Vector3],\n    cameraQuaternionChange:[quaternion:Quaternion]\n    onAdvanceTime: [mins: number]\n}>()\n\n// Make the focus point of the camera a bit off center (horizontal) on the canvas\n// because of the sidebar\nwatch(() => [sizes.width.value, sizes.height.value, props.xOffset, camera.value], () => {\n    const zoomMultiple = (sizes.width.value + Math.abs(props.xOffset) * 2) / sizes.width.value;\n    if (camera.value) {\n        (camera.value as PerspectiveCamera | OrthographicCamera).setViewOffset(\n            sizes.width.value * zoomMultiple,\n            sizes.height.value * zoomMultiple,\n            props.xOffset > 0 ? props.xOffset * 2 : 0,\n            sizes.height.value * (zoomMultiple - 1) / 2,\n            sizes.width.value,\n            sizes.height.value);\n    }\n}, {immediate: true})\n\n\n// start/stop render loop\nconst { onBeforeRender, pause, resume } = useLoop()\nwatch(() => [props.zoomPerSecond, props.timeAdvanceSpeed], () => {\n    if (props.zoomPerSecond != 1 || props.timeAdvanceSpeed != 0) {\n        resume()\n    } else {\n        pause()\n    }\n}, {immediate: true})\n\n\nlet leftoverMinFractionFromLastFrame = ref<number>(0)\n\nonBeforeRender(({ delta }) => {\n    // adjust zoom\n    if (camera.value && props.zoomPerSecond != 1) {\n        const zoomThisFrame = Math.pow(props.zoomPerSecond, delta)\n        if (props.snapCamera) {\n            let c = (camera.value as OrthographicCamera);\n            if (c.isOrthographicCamera) {\n                c.zoom /= zoomThisFrame\n                controls2d.update()\n            }\n        } else {\n            camera.value.position.multiplyScalar(zoomThisFrame)\n        }\n    }\n\n    // adjust sundial time\n    if (props.timeAdvanceSpeed != 0) {\n        const fractionalMinsToAdd = delta * props.timeAdvanceSpeed / 70 * 1000 + leftoverMinFractionFromLastFrame.value\n        const wholeMins = Math.floor(fractionalMinsToAdd)\n        leftoverMinFractionFromLastFrame.value = fractionalMinsToAdd % 1\n        if (wholeMins > 0) {\n            emit('onAdvanceTime', wholeMins)\n        }\n    }\n})\n\n\n\n\nwatch(() => [\n    camera.value?.position.x,\n    camera.value?.position.y,\n    camera.value?.position.z,\n], () => {\n    if (camera.value) {\n        // I think this is necessary because we're adding the controls outside of tresjs\n        invalidate()\n    }\n}, {immediate: true})\n\nwatch(() => [\n    camera.value?.quaternion.w,\n    camera.value?.quaternion.x,\n    camera.value?.quaternion.y,\n    camera.value?.quaternion.z,\n], () => {\n    if (camera.value) {\n        emit(\"cameraQuaternionChange\", camera.value.quaternion.clone())\n    }\n}, {immediate: true})\n\n\nconst camHeight2d = 5\n\n\nconst oldSundialRotation = ref<Euler>();\nlet controls3d: OrbitControls;\nlet controls2d: MapControls;\n\n// switch between cameras\nwatch(() => [props.snapCamera, cameras], () => {\n\n    if (controls2d) controls2d.enabled = props.snapCamera\n    if (controls3d) controls3d.enabled = !props.snapCamera\n\n    for (let cam of cameras.value) {\n        if ((props.snapCamera && (cam as OrthographicCamera).isOrthographicCamera) ||\n            (!props.snapCamera && (cam as PerspectiveCamera).isPerspectiveCamera)) {\n            setCameraActive(cam.uuid)\n            return\n        }\n    }\n}, { immediate: true })\n\n// create the controls when each camera is first active\n// dont use the extend({OrbitControls}) + <TresOrbitControls/> pattern because I can't find a way to call update()\nwatch(() => [renderer.value, camera.value, props.snapCamera], () => {\n    if (!controls3d && renderer.value && camera.value && !props.snapCamera) {\n        camera.value?.position.set(7, 7, 7);\n        controls3d = new OrbitControls((camera.value) as PerspectiveCamera, renderer.value.domElement)\n        controls3d.target = props.target\n        controls3d.enableDamping = false;\n        controls3d.rotateSpeed = 0.5\n        controls3d.enablePan = false\n        controls3d.enabled = !props.snapCamera\n        controls3d.update()\n    }\n    if (!controls2d && renderer.value && camera.value && props.snapCamera) {\n\n        // cam position\n        const sundialNormal = new Vector3(0, 1, 0).applyEuler(props.sundialRotation)\n        const camPosition = props.sundialOrigin.clone().add(sundialNormal.clone().multiplyScalar(camHeight2d))\n        camera.value.position.set(camPosition.x, camPosition.y, camPosition.z)\n        camera.value.up.set(...new Vector3(0, 0, -1).applyEuler(props.sundialRotation).toArray())\n        // cast to prevent ts errors\n        let c = (camera.value as OrthographicCamera); \n        c.zoom = 0.07 * window.innerHeight\n\n        controls2d = new MapControls(camera.value as OrthographicCamera, renderer.value.domElement)\n        controls2d.target.set(...props.sundialOrigin.toArray())\n        controls2d.enableDamping = false\n        controls2d.panSpeed = 0.79\n        // todo: try to get the screen to pan at the same speed as the mouse (it depends on window dimensions)\n        // OrthographicOrbitControls is a thing but not in the main three package I believe\n        controls2d.screenSpacePanning = true\n        controls2d.zoomToCursor = true\n        controls2d.enabled = props.snapCamera\n        controls2d.update()\n\n        oldSundialRotation.value = props.sundialRotation.clone()\n    }\n}, {immediate:true})\n\n\n\n// move orthographic camera when sundial rotation changes\n// do this by comparing the new rotation to the old rotation\nwatch(() => [props.sundialRotation, props.snapCamera], () => {\n    if (controls2d && camera.value && oldSundialRotation.value && props.snapCamera) {\n\n        const oldNormal = new Vector3(0, 1, 0).applyEuler(oldSundialRotation.value)\n        const oldPlane = new Plane(oldNormal, 0).translate(props.sundialOrigin);\n        const newTarget = infiniteLineIntersectWithPlane(oldPlane, camera.value.position, camera.value.getWorldDirection(new Vector3()))\n            // move sundial to (0,0,0)\n            ?.sub(props.sundialOrigin)\n            // un-apply old sundial rotation\n            .applyQuaternion(new Quaternion().setFromEuler(oldSundialRotation.value).invert())\n            // set y coord to 0 to cancel inaccuracies\n            .setComponent(1, 0)\n            // apply new sundial rotation\n            .applyEuler(props.sundialRotation)\n            // re-apply sundial origin\n            .add(props.sundialOrigin)\n        if (!newTarget) return\n        const newNormal = new Vector3(0, 1, 0).applyEuler(props.sundialRotation)\n        const newPosition = newTarget.clone().add(newNormal.clone().multiplyScalar(camHeight2d))\n\n        controls2d.target.set(...newTarget.toArray())\n        camera.value.position.set(...newPosition.toArray())\n        camera.value.up.set(...new Vector3(0, 0, -1).applyEuler(props.sundialRotation).toArray())\n        controls2d.update()\n        \n        oldSundialRotation.value = props.sundialRotation.clone()\n    }\n\n})\n\n</script>\n\n","import { defineComponent as _defineComponent } from 'vue'\nimport { useTresContext, useLoop} from '@tresjs/core';\nimport { Euler, OrthographicCamera, PerspectiveCamera, Plane, Quaternion, Vector3} from 'three';\nimport { PropType, watch, ref } from 'vue';\nimport { OrbitControls, MapControls } from 'three-stdlib';\nimport { infiniteLineIntersectWithPlane } from '@/calculations';\n\n\nconst camHeight2d = 5\n\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CameraHelper',\n  props: {\n    xOffset: {\n        required: true,\n        type: Number as PropType<number>\n    },\n    zoomPerSecond : {\n        required: false,\n        default:1,\n        type: Number as PropType<number>\n    },\n    timeAdvanceSpeed: {\n        required: true,\n        type: Number as PropType<number>\n    },\n    target: {\n        required: true,\n        type: Object as PropType<Vector3>\n    },\n    sundialRotation: {\n        required: true,\n        type: Object as PropType<Euler>\n    },\n    sundialOrigin: {\n        required: true,\n        type: Object as PropType<Vector3>\n    },\n    snapCamera: {\n        required: true,\n        type: Boolean as PropType<boolean>\n    }\n},\n  emits: [\"cameraQuaternionChange\", \"onAdvanceTime\"],\n  setup(__props, { emit: __emit }) {\n\nconst {camera,  sizes, renderer, invalidate, cameras, setCameraActive} = useTresContext();\n\nconst props = __props;\n\nconst emit = __emit\n\n// Make the focus point of the camera a bit off center (horizontal) on the canvas\n// because of the sidebar\nwatch(() => [sizes.width.value, sizes.height.value, props.xOffset, camera.value], () => {\n    const zoomMultiple = (sizes.width.value + Math.abs(props.xOffset) * 2) / sizes.width.value;\n    if (camera.value) {\n        (camera.value as PerspectiveCamera | OrthographicCamera).setViewOffset(\n            sizes.width.value * zoomMultiple,\n            sizes.height.value * zoomMultiple,\n            props.xOffset > 0 ? props.xOffset * 2 : 0,\n            sizes.height.value * (zoomMultiple - 1) / 2,\n            sizes.width.value,\n            sizes.height.value);\n    }\n}, {immediate: true})\n\n\n// start/stop render loop\nconst { onBeforeRender, pause, resume } = useLoop()\nwatch(() => [props.zoomPerSecond, props.timeAdvanceSpeed], () => {\n    if (props.zoomPerSecond != 1 || props.timeAdvanceSpeed != 0) {\n        resume()\n    } else {\n        pause()\n    }\n}, {immediate: true})\n\n\nlet leftoverMinFractionFromLastFrame = ref<number>(0)\n\nonBeforeRender(({ delta }) => {\n    // adjust zoom\n    if (camera.value && props.zoomPerSecond != 1) {\n        const zoomThisFrame = Math.pow(props.zoomPerSecond, delta)\n        if (props.snapCamera) {\n            let c = (camera.value as OrthographicCamera);\n            if (c.isOrthographicCamera) {\n                c.zoom /= zoomThisFrame\n                controls2d.update()\n            }\n        } else {\n            camera.value.position.multiplyScalar(zoomThisFrame)\n        }\n    }\n\n    // adjust sundial time\n    if (props.timeAdvanceSpeed != 0) {\n        const fractionalMinsToAdd = delta * props.timeAdvanceSpeed / 70 * 1000 + leftoverMinFractionFromLastFrame.value\n        const wholeMins = Math.floor(fractionalMinsToAdd)\n        leftoverMinFractionFromLastFrame.value = fractionalMinsToAdd % 1\n        if (wholeMins > 0) {\n            emit('onAdvanceTime', wholeMins)\n        }\n    }\n})\n\n\n\n\nwatch(() => [\n    camera.value?.position.x,\n    camera.value?.position.y,\n    camera.value?.position.z,\n], () => {\n    if (camera.value) {\n        // I think this is necessary because we're adding the controls outside of tresjs\n        invalidate()\n    }\n}, {immediate: true})\n\nwatch(() => [\n    camera.value?.quaternion.w,\n    camera.value?.quaternion.x,\n    camera.value?.quaternion.y,\n    camera.value?.quaternion.z,\n], () => {\n    if (camera.value) {\n        emit(\"cameraQuaternionChange\", camera.value.quaternion.clone())\n    }\n}, {immediate: true})\n\n\nconst oldSundialRotation = ref<Euler>();\nlet controls3d: OrbitControls;\nlet controls2d: MapControls;\n\n// switch between cameras\nwatch(() => [props.snapCamera, cameras], () => {\n\n    if (controls2d) controls2d.enabled = props.snapCamera\n    if (controls3d) controls3d.enabled = !props.snapCamera\n\n    for (let cam of cameras.value) {\n        if ((props.snapCamera && (cam as OrthographicCamera).isOrthographicCamera) ||\n            (!props.snapCamera && (cam as PerspectiveCamera).isPerspectiveCamera)) {\n            setCameraActive(cam.uuid)\n            return\n        }\n    }\n}, { immediate: true })\n\n// create the controls when each camera is first active\n// dont use the extend({OrbitControls}) + <TresOrbitControls/> pattern because I can't find a way to call update()\nwatch(() => [renderer.value, camera.value, props.snapCamera], () => {\n    if (!controls3d && renderer.value && camera.value && !props.snapCamera) {\n        camera.value?.position.set(7, 7, 7);\n        controls3d = new OrbitControls((camera.value) as PerspectiveCamera, renderer.value.domElement)\n        controls3d.target = props.target\n        controls3d.enableDamping = false;\n        controls3d.rotateSpeed = 0.5\n        controls3d.enablePan = false\n        controls3d.enabled = !props.snapCamera\n        controls3d.update()\n    }\n    if (!controls2d && renderer.value && camera.value && props.snapCamera) {\n\n        // cam position\n        const sundialNormal = new Vector3(0, 1, 0).applyEuler(props.sundialRotation)\n        const camPosition = props.sundialOrigin.clone().add(sundialNormal.clone().multiplyScalar(camHeight2d))\n        camera.value.position.set(camPosition.x, camPosition.y, camPosition.z)\n        camera.value.up.set(...new Vector3(0, 0, -1).applyEuler(props.sundialRotation).toArray())\n        // cast to prevent ts errors\n        let c = (camera.value as OrthographicCamera); \n        c.zoom = 0.07 * window.innerHeight\n\n        controls2d = new MapControls(camera.value as OrthographicCamera, renderer.value.domElement)\n        controls2d.target.set(...props.sundialOrigin.toArray())\n        controls2d.enableDamping = false\n        controls2d.panSpeed = 0.79\n        // todo: try to get the screen to pan at the same speed as the mouse (it depends on window dimensions)\n        // OrthographicOrbitControls is a thing but not in the main three package I believe\n        controls2d.screenSpacePanning = true\n        controls2d.zoomToCursor = true\n        controls2d.enabled = props.snapCamera\n        controls2d.update()\n\n        oldSundialRotation.value = props.sundialRotation.clone()\n    }\n}, {immediate:true})\n\n\n\n// move orthographic camera when sundial rotation changes\n// do this by comparing the new rotation to the old rotation\nwatch(() => [props.sundialRotation, props.snapCamera], () => {\n    if (controls2d && camera.value && oldSundialRotation.value && props.snapCamera) {\n\n        const oldNormal = new Vector3(0, 1, 0).applyEuler(oldSundialRotation.value)\n        const oldPlane = new Plane(oldNormal, 0).translate(props.sundialOrigin);\n        const newTarget = infiniteLineIntersectWithPlane(oldPlane, camera.value.position, camera.value.getWorldDirection(new Vector3()))\n            // move sundial to (0,0,0)\n            ?.sub(props.sundialOrigin)\n            // un-apply old sundial rotation\n            .applyQuaternion(new Quaternion().setFromEuler(oldSundialRotation.value).invert())\n            // set y coord to 0 to cancel inaccuracies\n            .setComponent(1, 0)\n            // apply new sundial rotation\n            .applyEuler(props.sundialRotation)\n            // re-apply sundial origin\n            .add(props.sundialOrigin)\n        if (!newTarget) return\n        const newNormal = new Vector3(0, 1, 0).applyEuler(props.sundialRotation)\n        const newPosition = newTarget.clone().add(newNormal.clone().multiplyScalar(camHeight2d))\n\n        controls2d.target.set(...newTarget.toArray())\n        camera.value.position.set(...newPosition.toArray())\n        camera.value.up.set(...new Vector3(0, 0, -1).applyEuler(props.sundialRotation).toArray())\n        controls2d.update()\n        \n        oldSundialRotation.value = props.sundialRotation.clone()\n    }\n\n})\n\n\nreturn () => {}\n}\n\n})","import script from \"./CameraHelper.vue?vue&type=script&lang=ts&setup=true\"\nexport * from \"./CameraHelper.vue?vue&type=script&lang=ts&setup=true\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { useTresContext } from '@tresjs/core';\n    \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'RendererHelper',\n  setup(__props) {\n\n    const { renderer } = useTresContext();\n    renderer.value.setPixelRatio(window.devicePixelRatio);\n    renderer.value.localClippingEnabled = true;\n\nreturn () => {}\n}\n\n})","<!-- Fix problem with blurry image on mobile devices, and enable local clipping -->\n\n<script setup lang=\"ts\" >\n    import { useTresContext } from '@tresjs/core';\n    const { renderer } = useTresContext();\n    renderer.value.setPixelRatio(window.devicePixelRatio);\n    renderer.value.localClippingEnabled = true;\n</script>\n\n","import script from \"./RendererHelper.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./RendererHelper.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { render } from \"./ThreeTimesExplanation.vue?vue&type=template&id=35ba8230&scoped=true\"\nconst script = {}\n\nimport \"./ThreeTimesExplanation.vue?vue&type=style&index=0&id=35ba8230&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render],['__scopeId',\"data-v-35ba8230\"]])\n\nexport default __exports__","import { Step } from \"vue3-tour\"\n\nconst tourSteps: Step[] = [\n    {\n        target: '#app',\n        content: `Click and drag on the sundial to look around, and use the mouse wheel to adjust the zoom.\nZoom out to see the sun's position!`,\n        params: {\n            placement: 'bottom',\n            enableScrolling: false,\n        },\n    },\n    {\n        target: '[data-v-walkthrough=\"status\"]',\n        content: `Use the sliders to change the <strong>Time</strong> and <strong>Date</strong>.\nYou can also click on the digital clock to set the time manually.`,\n        params: {\n            placement: 'auto',\n            enableScrolling: false,\n            highlight: true\n        },\n    },\n    {\n        target: '[data-v-walkthrough=\"map\"]',\n        content: `Sundials work differently depending on the location on Earth.\nSet the location by clicking on the map, or by typing the <strong>Latitude</strong> and <strong>Longitude</strong>.`,\n        params: {\n            placement: 'right',\n            enableScrolling: false,\n            highlight: true,\n        },\n    },\n    {\n        target: '[data-v-walkthrough=\"time-zone\"]',\n        content: `The <strong>Time Zone</strong> is set automatically based on the longitude. Instead, to manually input the time zone, uncheck <strong>Automatically set time zone</strong> and type in the <strong>Time Zone</strong> box.\n`,\n        params: {\n            placement: 'right',\n            enableScrolling: false,\n            highlight: true,\n        },\n    },\n    {\n        target: '[data-v-walkthrough=\"sundial-type\"]',\n        content: `Choose between 2 types of sundial. <strong>Traditional sundial</strong> uses a <i>gnomon</i> to cast a shadow, and <strong>Point shadow trace</strong> uses a <i>nodus</i>, showing where the shadow of a single point falls throughout the day and year.`,\n        params: {\n            placement: 'right',\n            // enableScrolling: false,\n            highlight: true\n        },\n    },\n    {\n        target: '[data-v-walkthrough=\"slant-and-rotation\"]',\n        content: `The <strong>Slant</strong> and <strong>Rotation</strong> of the sundial can be changed. \nE.g. to simulate a wall-mounted sundial, set the <strong>Slant</strong> to 90 and the <strong>Rotation</strong> to the direction the wall is facing.<br>\nAdditionally, the <strong>Gnomon height</strong> (or Nodus height in Point shadow trace mode) adjusts the distance from the center of the shadow-casting object to the plate. The unit is arbitrary, because it's only the scale that matters.`,\n        params: {\n            placement: 'right',\n            // enableScrolling: false,\n            highlight: true\n        },\n    },\n    {\n        target: '[data-v-walkthrough=\"hour-lines\"]',\n        content: `Sundials often measure <strong>Apparent solar time</strong>, where solar noon is the time at which the sun is highest in the sky.\nHowever, you may want the sundial to measure an approximation of standard time, taking the longitude and time zone into account. To do this, select <strong>Adjusted for time zone and longitude</strong>. Note that depending on the time of year the reading can be inaccurate by up to 16 min 33 s due to the varying length of the solar day (see <a href=\"https://en.wikipedia.org/wiki/Equation_of_time\" target=\"_blank\">https://en.wikipedia.org/wiki/Equation_of_time</a>).`,\n        params: {\n            placement: 'right',\n            // enableScrolling: false,\n            highlight: true\n        },\n    },\n]\n\n\n\nexport { tourSteps }","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, openBlock as _openBlock, createBlock as _createBlock } from \"vue\"\n\nimport { normalizeColor, useTresContext } from '@tresjs/core'\nimport { Vector2, Vector3, Plane } from 'three'\nimport { Line2 } from 'three/examples/jsm/lines/Line2'\nimport { LineGeometry } from 'three/examples/jsm/lines/LineGeometry'\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial'\nimport { computed, onUnmounted, shallowRef, watch } from 'vue'\nimport type { TresColor } from '@tresjs/core'\nimport type { Color } from 'three'\n\n\n\ntype Points = (Vector3 | Vector2 | [number, number, number] | [number, number] | number)[]\ntype VertexColors = Array<TresColor>\nexport interface LineProps {\n  points: Points\n  vertexColors?: VertexColors | null\n  color?: TresColor\n  lineWidth?: number\n  worldUnits?: boolean\n  alphaToCoverage?: boolean\n  dashed?: boolean\n  dashSize?: number\n  gapSize?: number\n  dashScale?: number\n  dashOffset?: number,\n  // #####\n  clippingPlanes?: Plane[] | null\n  // #####\n}\n\ntype PropsType = typeof props\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot',\n  props: {\n    points: {},\n    vertexColors: { default: null },\n    color: { default: 'white' },\n    lineWidth: { default: 1 },\n    worldUnits: { type: Boolean, default: false },\n    alphaToCoverage: { type: Boolean, default: false },\n    dashed: { type: Boolean, default: false },\n    dashSize: { default: 1 },\n    gapSize: { default: 1 },\n    dashScale: { default: 1 },\n    dashOffset: { default: 0 },\n    clippingPlanes: { default: null }\n  },\n  setup(__props: any, { expose: __expose }) {\n\nconst props = __props\n\nfunction getInterpolatedVertexColors(vertexColors: VertexColors | null, numPoints: number): Color[] {\n  if (!vertexColors || vertexColors.length === 0) {\n    return Array.from({ length: numPoints }).fill(normalizeColor(props.color)) as Color[]\n  }\n  if (vertexColors.length === 1) {\n    return Array.from({ length: numPoints }).fill(normalizeColor(vertexColors[0])) as Color[]\n  }\n  if (vertexColors.length === numPoints) {\n    return vertexColors.map(normalizeColor)\n  }\n\n  const numSegments = numPoints - 1\n  const mappedColors = vertexColors.map(normalizeColor)\n  if (closed) { mappedColors.push(mappedColors[0].clone()) }\n\n  const iColors: Color[] = [mappedColors[0]]\n  const divisions = numSegments / (mappedColors.length - 1)\n  for (let i = 1; i < numSegments; i++) {\n    const alpha = (i % divisions) / divisions\n    const colorIndex = Math.floor(i / divisions)\n    iColors.push(mappedColors[colorIndex].clone().lerp(mappedColors[colorIndex + 1], alpha))\n  }\n  iColors.push(mappedColors[mappedColors.length - 1])\n\n  return iColors\n}\n\nconst lineMaterial = new LineMaterial()\nconst lineGeometry = new LineGeometry()\nconst line = new Line2(lineGeometry, lineMaterial)\nconst { sizes, invalidate } = useTresContext()\nconst hasVertexColors = computed(() => Array.isArray(props.vertexColors))\n\nfunction updateLineMaterial(material: LineMaterial, props: PropsType) {\n  material.color = normalizeColor(props.color)\n  material.linewidth = props.lineWidth\n  material.alphaToCoverage = props.alphaToCoverage\n  material.worldUnits = props.worldUnits\n  material.vertexColors = Array.isArray(props.vertexColors)\n  material.dashed = props.dashed\n  material.dashScale = props.dashScale\n  material.dashSize = props.dashSize\n  material.dashOffset = props.dashOffset\n  material.gapSize = props.gapSize\n  material.needsUpdate = true\n  // #####\n  material.clippingPlanes = props.clippingPlanes\n  // #####\n}\n\nfunction updateLineGeometry(geometry: LineGeometry, points: Points, vertexColors: VertexColors | null) {\n  const pValues = points.map((p) => {\n    if (p instanceof Vector3) {\n      return [p.x, p.y, p.z]\n    }\n    else if (p instanceof Vector2) {\n      return [p.x, p.y, 0]\n    }\n    else if (Array.isArray(p) && p.length === 2) {\n      return [p[0], p[1], 0]\n    }\n    else {\n      return p\n    }\n  }).flat()\n  geometry.setPositions(pValues.flat())\n\n  const colors = getInterpolatedVertexColors(vertexColors, points.length).map(c => c.toArray()).flat()\n  geometry.setColors(colors)\n\n  line.computeLineDistances()\n}\n\nupdateLineMaterial(lineMaterial, props)\nupdateLineGeometry(lineGeometry, props.points, props.vertexColors)\nline.computeLineDistances()\n\nwatch(() => [\n  props.color,\n  props.lineWidth,\n  props.alphaToCoverage,\n  props.worldUnits,\n  hasVertexColors,\n  props.dashed,\n  props.dashScale,\n  props.dashSize,\n  props.dashOffset,\n  // #####\n  props.clippingPlanes\n  // #####\n], () => {\n  updateLineMaterial(lineMaterial, props)\n  invalidate()\n})\nwatch(() => [props.points, props.vertexColors], () => {\n  updateLineGeometry(lineGeometry, props.points, props.vertexColors)\n  invalidate()\n})\nwatch(() => [sizes.height, sizes.width], () => {\n  lineMaterial.resolution = new Vector2(sizes.width.value, sizes.height.value)\n  invalidate()\n})\n\nonUnmounted(() => {\n  lineGeometry.dispose()\n  lineMaterial.dispose()\n})\n\nconst lineRef = shallowRef()\n__expose({ instance: lineRef })\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_primitive = _resolveComponent(\"primitive\")!\n\n  return (_openBlock(), _createBlock(_component_primitive, {\n    ref: lineRef.value,\n    object: _unref(line)\n  }, null, 8, [\"object\"]))\n}\n}\n\n})","\n<!-- \n########################################################################################## \nCopy of cientos line2, but with added support for clipping planes. \n ##########################################################################################\n-->\n\n<script setup lang=\"ts\">\nimport { normalizeColor, useTresContext } from '@tresjs/core'\nimport { Vector2, Vector3, Plane } from 'three'\nimport { Line2 } from 'three/examples/jsm/lines/Line2'\nimport { LineGeometry } from 'three/examples/jsm/lines/LineGeometry'\nimport { LineMaterial } from 'three/examples/jsm/lines/LineMaterial'\nimport { computed, onUnmounted, shallowRef, watch } from 'vue'\nimport type { TresColor } from '@tresjs/core'\nimport type { Color } from 'three'\n\nimport { withDefaults, defineProps, defineExpose } from \"vue\";\n\ntype Points = (Vector3 | Vector2 | [number, number, number] | [number, number] | number)[]\ntype VertexColors = Array<TresColor>\nexport interface LineProps {\n  points: Points\n  vertexColors?: VertexColors | null\n  color?: TresColor\n  lineWidth?: number\n  worldUnits?: boolean\n  alphaToCoverage?: boolean\n  dashed?: boolean\n  dashSize?: number\n  gapSize?: number\n  dashScale?: number\n  dashOffset?: number,\n  // #####\n  clippingPlanes?: Plane[] | null\n  // #####\n}\n\nconst props = withDefaults(defineProps<LineProps>(), {\n  vertexColors: null,\n  color: 'white',\n  lineWidth: 1,\n  worldUnits: false,\n  alphaToCoverage: false,\n  dashed: false,\n  dashSize: 1,\n  gapSize: 1,\n  dashScale: 1,\n  dashOffset: 0,\n  // #####\n  clippingPlanes: null\n  // #####\n})\n\ntype PropsType = typeof props\n\nfunction getInterpolatedVertexColors(vertexColors: VertexColors | null, numPoints: number): Color[] {\n  if (!vertexColors || vertexColors.length === 0) {\n    return Array.from({ length: numPoints }).fill(normalizeColor(props.color)) as Color[]\n  }\n  if (vertexColors.length === 1) {\n    return Array.from({ length: numPoints }).fill(normalizeColor(vertexColors[0])) as Color[]\n  }\n  if (vertexColors.length === numPoints) {\n    return vertexColors.map(normalizeColor)\n  }\n\n  const numSegments = numPoints - 1\n  const mappedColors = vertexColors.map(normalizeColor)\n  if (closed) { mappedColors.push(mappedColors[0].clone()) }\n\n  const iColors: Color[] = [mappedColors[0]]\n  const divisions = numSegments / (mappedColors.length - 1)\n  for (let i = 1; i < numSegments; i++) {\n    const alpha = (i % divisions) / divisions\n    const colorIndex = Math.floor(i / divisions)\n    iColors.push(mappedColors[colorIndex].clone().lerp(mappedColors[colorIndex + 1], alpha))\n  }\n  iColors.push(mappedColors[mappedColors.length - 1])\n\n  return iColors\n}\n\nconst lineMaterial = new LineMaterial()\nconst lineGeometry = new LineGeometry()\nconst line = new Line2(lineGeometry, lineMaterial)\nconst { sizes, invalidate } = useTresContext()\nconst hasVertexColors = computed(() => Array.isArray(props.vertexColors))\n\nfunction updateLineMaterial(material: LineMaterial, props: PropsType) {\n  material.color = normalizeColor(props.color)\n  material.linewidth = props.lineWidth\n  material.alphaToCoverage = props.alphaToCoverage\n  material.worldUnits = props.worldUnits\n  material.vertexColors = Array.isArray(props.vertexColors)\n  material.dashed = props.dashed\n  material.dashScale = props.dashScale\n  material.dashSize = props.dashSize\n  material.dashOffset = props.dashOffset\n  material.gapSize = props.gapSize\n  material.needsUpdate = true\n  // #####\n  material.clippingPlanes = props.clippingPlanes\n  // #####\n}\n\nfunction updateLineGeometry(geometry: LineGeometry, points: Points, vertexColors: VertexColors | null) {\n  const pValues = points.map((p) => {\n    if (p instanceof Vector3) {\n      return [p.x, p.y, p.z]\n    }\n    else if (p instanceof Vector2) {\n      return [p.x, p.y, 0]\n    }\n    else if (Array.isArray(p) && p.length === 2) {\n      return [p[0], p[1], 0]\n    }\n    else {\n      return p\n    }\n  }).flat()\n  geometry.setPositions(pValues.flat())\n\n  const colors = getInterpolatedVertexColors(vertexColors, points.length).map(c => c.toArray()).flat()\n  geometry.setColors(colors)\n\n  line.computeLineDistances()\n}\n\nupdateLineMaterial(lineMaterial, props)\nupdateLineGeometry(lineGeometry, props.points, props.vertexColors)\nline.computeLineDistances()\n\nwatch(() => [\n  props.color,\n  props.lineWidth,\n  props.alphaToCoverage,\n  props.worldUnits,\n  hasVertexColors,\n  props.dashed,\n  props.dashScale,\n  props.dashSize,\n  props.dashOffset,\n  // #####\n  props.clippingPlanes\n  // #####\n], () => {\n  updateLineMaterial(lineMaterial, props)\n  invalidate()\n})\nwatch(() => [props.points, props.vertexColors], () => {\n  updateLineGeometry(lineGeometry, props.points, props.vertexColors)\n  invalidate()\n})\nwatch(() => [sizes.height, sizes.width], () => {\n  lineMaterial.resolution = new Vector2(sizes.width.value, sizes.height.value)\n  invalidate()\n})\n\nonUnmounted(() => {\n  lineGeometry.dispose()\n  lineMaterial.dispose()\n})\n\nconst lineRef = shallowRef()\ndefineExpose({ instance: lineRef })\n</script>\n\n<template>\n  <primitive\n    :ref=\"lineRef\"\n    :object=\"line\"\n  />\n</template>","import script from \"./Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","<!-- 3D object of the sundial -->\n\n<script setup lang=\"ts\">\n\nimport { PropType, computed, defineProps, ref, watch } from 'vue'\nimport { Euler, Matrix4, Plane, Ray, Vector3 } from 'three';\nimport Line2Clipped from './Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue';\nimport { Line2 } from \"@tresjs/cientos\";\nimport { calculateObliquityOfTheEcliptic, calculateShadowDirection, calculateSunHorizontalCoordsFromApparentSolarTime, calculateSunHorizontalCoordsFromBabylonianTime, calculateSunHorizontalCoordsFromUTC, extractCloseAndPadSequence, horizontalToActualCoords, rad, toHorizontalCoords, assertUnreachable, calculateSunHorizontalCoordsFromItalianTime, calculateSunHorizontalCoordsFromSeasonalTime, calculatePolarDayDeclination } from '@/calculations';\nimport SundialLetter from './SundialLetter.vue';\nimport SundialFaceGrid from './SundialFaceGrid.vue';\n\n    // declination plots - plotting the path of the shadow throughout a day at a specific declination\n    type DeclinationPlotLabel = \"december-solstice\" | \"june-solstice\" | \"equinox\" | \"polar-day\" | \"polar-night\"\n\n    const props = defineProps(\n    {\n        show: {\n            required: true,\n            type: Boolean as PropType<boolean>\n        },\n        latitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        longitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        radius: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        gnomonPosition: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        origin: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        rotation: {\n            required: true,\n            type: Object as PropType<Euler>\n        },\n        hourLineStyle: {\n            required: true,\n            type: String as PropType<\"modern-local\" | \"modern-mean-solar\" | \"modern-apparent-solar\" | \"babylonian\" | \"italian\" | \"seasonal\">\n        },\n        timeZone: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        declinationPlots: {\n            required: true,\n            type: Array as PropType<DeclinationPlotLabel[]>\n        },\n        localTime: {\n            required:true,\n            type: Number as PropType<number>,\n        },\n        day: {\n            required: true,\n            type: Number as PropType<number>,\n        },\n        showGrid: {\n            required:true,\n            type: Boolean as PropType<boolean>\n        }, \n        gridColorPalette: {\n            required: true,\n            type: String as PropType<\"light\" | \"dark\">\n        }\n\n    })\n\n\n    // copy props only when visible, then do calculations on the copied props.\n    const freezeProps = ref({ ...props })\n    watch(props, (newValue) => {\n        if (newValue.show) {\n            freezeProps.value = { ...newValue }\n        }\n    }, { immediate: true })\n\n\n    const gnomonAbsolutePosition = computed(() => {\n        return new Vector3(...freezeProps.value.gnomonPosition)\n            .applyEuler(freezeProps.value.rotation)\n            .add(new Vector3(...freezeProps.value.origin))\n    })\n    let sundialNormal = computed(() => new Vector3(0, 1, 0).applyEuler(freezeProps.value.rotation));\n\n\n    const platePlane = computed(() => new Plane(sundialNormal.value, 0).translate(new Vector3(...freezeProps.value.origin)))\n    // vector used to raise the plot above the surface.\n    const plateToPlotVector = computed(() => sundialNormal.value.clone().normalize().multiplyScalar(0.007))\n\n\n    /**\n     * Affected by context: latitude, longitude, platePlane.\n     * Coordinates produced are raised slightly above the plate with plateToPlotVector\n     * @param hour 0 to 23 (hours from midnight. To `timeStandard` standard.)\n     * @param day 0 to 364\n     * @param timeStandard mean solar time or utc+0 time.\n     */\n    function projectionOnPlate(hour: number, day: number, hourLineStyle: typeof props.hourLineStyle) : Vector3 | null {\n\n        let horizontalCoords: { azimuth:number, altitude: number }\n\n        switch (hourLineStyle) {\n            case 'modern-local':\n                /**@todo move adjustment for time zone to here (currently in the labels code somewhere) */\n                horizontalCoords = calculateSunHorizontalCoordsFromUTC(day, hour * 60 - freezeProps.value.timeZone, freezeProps.value.latitude, freezeProps.value.longitude)\n                break\n            case 'modern-mean-solar':\n                // mean solar time is equivalent to standard time at longitude=0\n                horizontalCoords = calculateSunHorizontalCoordsFromUTC(day, hour * 60, freezeProps.value.latitude, 0)\n                break\n            case 'modern-apparent-solar':\n                horizontalCoords = calculateSunHorizontalCoordsFromApparentSolarTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude)\n                break\n            case 'babylonian': {\n                const hc = calculateSunHorizontalCoordsFromBabylonianTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude, { maxDeclination: Math.max(polarDayDeclination.value, polarNightDeclination.value), minDeclination: Math.min(polarDayDeclination.value, polarNightDeclination.value)})\n                if (!hc) return null\n                else horizontalCoords = hc\n                break\n            }\n            case 'italian': {\n                const hc = calculateSunHorizontalCoordsFromItalianTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude, { maxDeclination: Math.max(polarDayDeclination.value, polarNightDeclination.value), minDeclination: Math.min(polarDayDeclination.value, polarNightDeclination.value) })\n                if (!hc) return null\n                else horizontalCoords = hc\n                break\n            }\n            case 'seasonal':{\n                const hc = calculateSunHorizontalCoordsFromSeasonalTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude, { maxDeclination: Math.max(polarDayDeclination.value, polarNightDeclination.value), minDeclination: Math.min(polarDayDeclination.value, polarNightDeclination.value) })\n                if (!hc) return null\n                else horizontalCoords = hc\n                break\n            }\n        }\n\n        // sun pos\n\n\n        const sunPos = horizontalToActualCoords(horizontalCoords.azimuth, horizontalCoords.altitude)\n\n        // shadow projection on plate\n        const ray = new Ray(gnomonAbsolutePosition.value, new Vector3(-sunPos.x, -sunPos.y, -sunPos.z))\n        const intersection = ray.intersectPlane(platePlane.value, new Vector3())\n\n        return intersection?.add(plateToPlotVector.value) ?? null\n    }\n\n\n    const hourLinePlotRangeType = computed(() => [\"modern-local\", \"modern-mean-solar\"].includes(freezeProps.value.hourLineStyle) ? \"full-year\" : \"half-year\")\n    const hourLinePlotHours = [...Array(24).keys()];\n    const hourLinePlotDays = computed(() => {\n        if (hourLinePlotRangeType.value == \"full-year\") {\n            return [...Array(37).keys()].map(x => 10*x)\n        } else {\n            // only use half the year, between the 2 solstices\n            return [...Array(37).keys()].map(x => 171 + Math.round((x/36)*(354-171)))\n        }\n    })\n    /**[hour][day] -> projection point. */\n    const hourLinePlotPoints = computed(() => \n        hourLinePlotHours.map(hour => \n            hourLinePlotDays.value.map(day => \n                projectionOnPlate(hour, day, freezeProps.value.hourLineStyle)\n            )\n        )\n    )\n\n    // remove nulls from points, make lines closed, pad with repeated last element, label each line with the hour\n    const hourLinePlotLines = computed(() => \n        [...hourLinePlotPoints.value.entries()].map(([i, points]) => \n            ({\n                hour: hourLinePlotHours[i],\n                line: (() => {\n                    const _line = extractCloseAndPadSequence(points, hourLinePlotDays.value.length + 1, new Vector3(0, 0, 0), /*dont close*/hourLinePlotRangeType.value == \"half-year\")\n\n                    // // all this stuff is trying to find non-linear sections of the line because I was having problems\n                    // let delta = new Vector3().subVectors(_line[1], _line[0])\n                    // for (let j = 1; j < _line.length - 1; j++) {\n                    //     let newDelta = new Vector3().subVectors(_line[j+1], _line[j])\n                    //     if (delta.length() > 0.01 && newDelta.length() > 0.01) {\n                    //         // check they are pointing in the same direction\n                    //         const deltaUnit = delta.clone().normalize()\n                    //         const newDeltaUnit = newDelta.clone().normalize()\n                    //         if (deltaUnit.distanceTo(newDeltaUnit) > 0.01) {\n                    //             console.log(\"what\")\n                    //         }\n                    //     }\n                    //     delta = newDelta\n                    // }\n                    return _line\n                })(),\n                show: !(freezeProps.value.hourLineStyle == \"seasonal\" && i > 12)\n            })\n        )\n    )\n\n\n    \n    \n\n    const declinationPlotHours = [...Array(48).keys()].map(x => x/2)\n    const obliquityOfTheEcliptic2023 = calculateObliquityOfTheEcliptic(8400.5 + 132)\n    // Note. commented out 0.833's were to adjust for the sun diameter and atmonspheric refraction,\n    // but the latter is so variable dependent on temp, pressure, etc that it doesn't really make sense to adjust for this\n    const polarDayAndNightVisible = computed(() => Math.abs(freezeProps.value.latitude) > 90 - obliquityOfTheEcliptic2023 * 180 / Math.PI /*+/- 0.833*/)\n    // critical declinations at current lattitude that would cause a polar day/night\n    // again, not adjusting for diameter of solar disc or atmospheric refraction.\n    const polarDayDeclination = computed(() => rad(calculatePolarDayDeclination(freezeProps.value.latitude)))\n    const polarNightDeclination = computed(() => -polarDayDeclination.value)\n    const declinationPlotsParams = computed<{\n        label: DeclinationPlotLabel,\n        declination: number,\n        color: string,\n        show:boolean\n    }[]>(() => [\n        {\n            label: \"december-solstice\",\n            declination: -obliquityOfTheEcliptic2023,\n            color: \"#ffffff\",\n            show: freezeProps.value.declinationPlots.includes(\"december-solstice\")\n        },\n        {\n            label: \"june-solstice\",\n            declination: obliquityOfTheEcliptic2023,\n            color: \"#ffffff\",\n            show: freezeProps.value.declinationPlots.includes(\"june-solstice\")\n        },\n        {\n            label: \"equinox\", // line aka equinoctial line\n            declination: 0,\n            color: \"#ffffff\",\n            show: freezeProps.value.declinationPlots.includes(\"equinox\")\n        },\n        {\n            label: \"polar-day\",\n            declination: polarDayDeclination.value,\n            color: \"#EE442F\", // https://venngage.com/blog/color-blind-friendly-palette/\n            show: polarDayAndNightVisible.value && freezeProps.value.declinationPlots.includes(\"polar-day\")\n        },\n        {\n            label: \"polar-night\",\n            declination: polarNightDeclination.value,\n            color: \"#601A4A\",\n            show: polarDayAndNightVisible.value && freezeProps.value.declinationPlots.includes(\"polar-night\")\n        },\n    ])\n\n    const declinationPlots = computed(() => \n        declinationPlotsParams.value.map((params) => {\n            const points = declinationPlotHours.map((hour) => {\n                const hourAngle = (hour - 12) / 24 * Math.PI * 2 // radians\n                const { azimuth, altitude } = toHorizontalCoords(params.declination, hourAngle, freezeProps.value.latitude * Math.PI / 180)\n                const { x, y, z } = horizontalToActualCoords(azimuth, altitude)\n                const plateIntersection = new Ray(gnomonAbsolutePosition.value, new Vector3(-x, -y, -z)).intersectPlane(platePlane.value, new Vector3())\n                // elevate slightly off plate\n                return plateIntersection?.add(plateToPlotVector.value) ?? null\n            })\n            const line = extractCloseAndPadSequence(points, declinationPlotHours.length + 1, new Vector3(0, 0, 0));\n\n            return {...params, line}\n        })\n    )\n\n        \n    // define clipping planes for the plot.\n    const relativeClippingPlanesArgs = computed(() => [\n        {\n            normal: new Vector3(1, 0, 0),\n            coplanarPoint: new Vector3(-freezeProps.value.radius, 0, 0).add(freezeProps.value.origin)\n        },\n        {\n            normal: new Vector3(-1, 0, 0),\n            coplanarPoint: new Vector3(freezeProps.value.radius, 0, 0).add(freezeProps.value.origin)\n        },\n        {\n            normal: new Vector3(0, 0, 1),\n            coplanarPoint: new Vector3(0, 0, -freezeProps.value.radius).add(freezeProps.value.origin)\n        },\n        {\n            normal: new Vector3(0, 0, -1),\n            coplanarPoint: new Vector3(0, 0, freezeProps.value.radius).add(freezeProps.value.origin)\n        },\n    ]);\n\n    const clippingPlanes = computed(() => {\n\n        const planes : Plane[] = []\n\n        for (let {normal, coplanarPoint} of relativeClippingPlanesArgs.value) {\n            planes.push(new Plane().setFromNormalAndCoplanarPoint(\n                normal.clone()\n                    .applyEuler(freezeProps.value.rotation),\n                coplanarPoint.clone()\n                    .add(freezeProps.value.origin.clone().multiplyScalar(-1))\n                    .applyEuler(freezeProps.value.rotation)\n                    .add(freezeProps.value.origin),\n            ))\n        }\n\n        return planes\n    })\n\n\n    \n    // work out what declination line (summer/winter) to put the numerals on.\n    const declinationLineOfNumerals = computed <DeclinationPlotLabel>(() => {\n        // make a ray starting from the nodus, pointing towards the north star.\n        // if this ray intersercts the sundial plate plane (infinitely extended), then use the winter solstice. Otherwise use the summer solstice.\n        const ray = new Ray(gnomonAbsolutePosition.value, new Vector3(0, Math.cos(rad(90-freezeProps.value.latitude)), -Math.sin(rad(90-freezeProps.value.latitude))))\n        const intersect = ray.intersectsPlane(platePlane.value)\n\n        switch (freezeProps.value.hourLineStyle) {\n            case 'modern-local':\n            case 'modern-mean-solar':\n            case 'modern-apparent-solar':\n                return intersect ? \"december-solstice\" : \"june-solstice\" \n            case 'babylonian':\n            case 'italian':\n                if (polarDayAndNightVisible.value) return intersect != (freezeProps.value.latitude < 0) ? \"polar-night\" : \"polar-day\"\n                else return intersect ? \"december-solstice\" : \"june-solstice\" \n            case 'seasonal':\n                // if close to/in the arctic/antarctic circle the lines can get very bunched up\n                if (polarDayAndNightVisible.value) return \"polar-day\"\n                else return intersect ? \"december-solstice\" : \"june-solstice\" \n            default:\n                return assertUnreachable(freezeProps.value.hourLineStyle)\n        }\n        \n    })\n\n\n   \n    /**Normalized direction vector (or approx) of each hour line */\n    const hourLineDirections = computed(() => {\n        switch (freezeProps.value.hourLineStyle) {\n            case 'modern-local':\n            case 'modern-mean-solar':\n            case 'modern-apparent-solar':\n            {\n                // Approach: calculate the shadow projection angle using the same code as the trad sundial.\n\n                // The hours expressed in the range midnight to midnight, 0 to 2\n                const hourLineTimeAngles = hourLinePlotHours.map(i => {\n                    let offsetHour;\n                    if (freezeProps.value.hourLineStyle == 'modern-local') {\n                        // need to adjust for longitude\n                        offsetHour = i + freezeProps.value.longitude * 24 / 360\n                    }\n                    else {\n                        offsetHour = i;\n                    }\n                    return ((((offsetHour * 60) % 1440) + 1440) % 1440) * Math.PI * 2 / 1440\n                })\n\n                return hourLineTimeAngles.map(timeAngle => \n                    calculateShadowDirection(\n                        timeAngle - (freezeProps.value.hourLineStyle == \"modern-local\" ? freezeProps.value.timeZone / 1440 * Math.PI * 2 : 0),\n                        freezeProps.value.latitude * Math.PI / 180,\n                        sundialNormal.value\n                    )\n                    .normalize()\n                    .multiplyScalar(declinationLineOfNumerals.value == \"december-solstice\" ? 1 : -1)\n                )\n            }\n            case 'babylonian':\n            case 'italian':\n            case 'seasonal':\n                {\n                    // get the label to appear on the correct side of the line\n                    // place on the INSIDE of the line\n                    // placing labels on the outside would make it difficult to mentally connect the labels and hour lines in some cases\n                    const hourLineDirectionMultiplyer = (() => {\n                        switch (declinationLineOfNumerals.value) {\n                            case 'december-solstice':\n                                return -1\n                            case 'june-solstice':\n                            case 'equinox':\n                                return 1\n                            case 'polar-day':\n                                return freezeProps.value.latitude > 0 ? 1 : -1\n                            case 'polar-night':\n                                return freezeProps.value.latitude > 0 ? -1 : 1\n                        }\n                    })()\n                    \n                    // approach: use dir between 2 points.\n                    return hourLinePlotLines.value.map(({line}) => \n                        new Vector3().subVectors(line[line.length-1], line[0])\n                        .normalize()\n                        .multiplyScalar(hourLineDirectionMultiplyer)\n\n                    )\n                }\n            default:\n                return assertUnreachable(freezeProps.value.hourLineStyle)\n        }\n    })\n\n    const numeralDistanceFromDeclinationLine = 0.2\n    const hourLineDigitMinDistanceToInsideBorder = 0.15;\n\n\n    /**\n    * Day upon which the labels are plotted.\n    * NOTE polar night/day use the same values as december/june solstice respectively - \n    * This is because the projected point is clamped to the polar night/day lines later (where applicable.)\n    */\n    const declinationLineOfNumeralsDay = computed(() => {\n        switch (declinationLineOfNumerals.value) {\n            case \"december-solstice\":\n                return 354\n            case \"june-solstice\":\n                return 171\n            case \"polar-day\":\n                return freezeProps.value.latitude > 0 ? 171 : 354\n            case \"polar-night\":\n                return freezeProps.value.latitude > 0 ? 354 : 171\n            case 'equinox':\n                return 78\n            default:\n                return assertUnreachable(declinationLineOfNumerals.value)\n        }\n    })\n\n    // world coords\n    const hourLineDigitPositions = computed(() => \n        hourLinePlotHours.map((hour, i) => {\n            const pos = projectionOnPlate(hour, declinationLineOfNumeralsDay.value, freezeProps.value.hourLineStyle)\n                ?.add(\n                    hourLineDirections.value[i]\n                    .clone()\n                    .multiplyScalar(numeralDistanceFromDeclinationLine)\n                );\n            if (!pos) return null\n\n            // check if pos is on the plate\n            // reuse the clipping planes\n            for (let plane of clippingPlanes.value) {\n                const p = plane.clone()\n                p.constant -= hourLineDigitMinDistanceToInsideBorder;\n                if (p.distanceToPoint(pos) < 0) {\n                    return null\n                }\n            }\n\n            return pos\n        })\n\n    )\n\n    /** In case any hour systems need to start counting from a number other than 0 this can be accounted for here. */\n    const firstHourNumber = computed(() => {\n        switch (freezeProps.value.hourLineStyle) {\n            case 'modern-local':\n            case 'modern-mean-solar':\n            case 'modern-apparent-solar':\n            case 'italian':\n            case 'seasonal': \n            case 'babylonian':\n                return 0\n            default:\n                return assertUnreachable(freezeProps.value.hourLineStyle)\n        }\n    })\n\n    // relative coords\n    const hourLineDigits = computed(() => {\n\n        return hourLinePlotHours.map((hour, i) => ({\n            hour:hour,\n            label:hourLineDigitPositions.value[i] ? ((hour + firstHourNumber.value).toString()) : \"\",\n            // transform to relative coords\n            pos: hourLineDigitPositions.value[i]\n                ?.sub(freezeProps.value.origin)\n                .applyMatrix4(new Matrix4().makeRotationFromEuler(freezeProps.value.rotation).invert())\n                ?? new Vector3(0,0,0),\n            show: !(freezeProps.value.hourLineStyle == \"seasonal\" && i > 12)\n        }))\n    })\n\n    const fontSize = computed(() => {\n        // changing the text size causes a big lag spike\n        // only do it when this sundial is actually shown\n        if (!freezeProps.value.show) return 0.12\n\n        const nodusHeight = new Vector3(0,0,0).distanceTo(freezeProps.value.gnomonPosition)\n        if (nodusHeight < 1) return 0.055\n        else return 0.12\n    })\n\n    const crosshairLocation = computed(() => {\n        return projectionOnPlate(freezeProps.value.localTime / 60, freezeProps.value.day, \"modern-local\")\n    })\n    const crosshairSize = 0.1\n\nconst plateGeometryArgs = computed<[number, number, number]>(() => [freezeProps.value.radius * 2, 0.1, freezeProps.value.radius * 2])\nconst rotationCopy = computed(() => freezeProps.value.rotation.clone())\nconst lineToNodusPoints = computed<[number, number, number][]>(() => [[0,0,0], freezeProps.value.gnomonPosition.toArray()])\nconst gnomonPositionCopy = computed(() => freezeProps.value.gnomonPosition.clone())\nconst crosshairLocationNonNull = computed(() => crosshairLocation.value ?? new Vector3(0,0,0))\nconst crosshairLocationExists = computed(() => !!crosshairLocation.value)\nconst crosshairPoints0 = [new Vector3(-crosshairSize / 4 * Math.sqrt(2), 0, -crosshairSize / 4 * Math.sqrt(2)), new Vector3(crosshairSize / 4 * Math.sqrt(2), 0, crosshairSize / 4 * Math.sqrt(2))]\nconst crosshairPoints1 = [new Vector3(-crosshairSize / 4 * Math.sqrt(2), 0, crosshairSize / 4 * Math.sqrt(2)), new Vector3(crosshairSize / 4 * Math.sqrt(2), 0, -crosshairSize / 4 * Math.sqrt(2))]\nconst sundialFaceOriginRaised = computed(() => freezeProps.value.origin.clone().add(plateToPlotVector.value))\n\n\n\n</script>\n\n\n<template>\n\n\n\n    <!-- plot -->\n    <TresObject3D :visible=\"props.show\">\n\n        <!-- grid -->\n        <SundialFaceGrid :sundialRotation=\"freezeProps.rotation\" :show=\"props.showGrid\" :origin=\"sundialFaceOriginRaised\"\n            :radius=\"freezeProps.radius\" :colorPalette=\"freezeProps.gridColorPalette\"/>\n\n        <!-- hour lines -->\n        <template v-for=\"hourLine of hourLinePlotLines\" :key=\"hourLine.hour\">\n            <TresObject3D :visible=\"hourLine.show\">\n                <Line2Clipped :line-width=\"1\" :points=\"hourLine.line\" color=\"#ffffff\"\n                    :clipping-planes=\"clippingPlanes\" />\n            </TresObject3D>\n        </template>\n        <!-- declination plots -->\n        <template v-for=\"yearlyPlot of declinationPlots\" :key=\"yearlyPlot.label\">\n            <TresObject3D :visible=\"yearlyPlot.show\">\n                <Line2Clipped :line-width=\"1\" :points=\"yearlyPlot.line\" :color=\"yearlyPlot.color\"\n                    :clipping-planes=\"clippingPlanes\" />\n\n            </TresObject3D>\n        </template>\n\n        <!-- crosshair -->\n        <TresObject3D :position=\"crosshairLocationNonNull\" :visible=\"crosshairLocationExists\" :rotation=\"rotationCopy\">\n            <Line2Clipped :line-width=\"1\" :points=\"crosshairPoints0\" color=\"#000000\"\n                :clipping-planes=\"clippingPlanes\" />\n            <Line2Clipped :line-width=\"1\" :points=\"crosshairPoints1\" color=\"#000000\"\n                :clipping-planes=\"clippingPlanes\" />\n        </TresObject3D>\n\n    </TresObject3D>\n\n    <TresObject3D :visible=\"props.show\" :position=\"freezeProps.origin\" :rotation=\"rotationCopy\">\n\n        <!-- plate -->\n        <TresMesh :position=\"[0, -0.05, 0]\" cast-shadow receive-shadow>\n            <TresBoxGeometry :args=\"plateGeometryArgs\" />\n            <TresMeshPhongMaterial color=\"#f9ecec\" />\n        </TresMesh>\n\n        <!-- digits -->\n        <template v-for=\"digit of hourLineDigits\" :key=\"digit.hour\">\n            <TresObject3D :visible=\"digit.show\">\n                <SundialLetter receive-shadow :position=\"digit.pos\" :text=\"digit.label\" :size=\"fontSize\" />\n            </TresObject3D>\n        </template>\n\n        <!-- nodus -->\n        <TresMesh :position=\"gnomonPositionCopy\" cast-shadow receive-shadow>\n            <TresSphereGeometry :args=\"[0.08, 20, 16]\" />\n            <TresMeshPhongMaterial color=\"#b7b7b7\" />\n        </TresMesh>\n\n        <!-- line to nodus -->\n        <Line2 :line-width=\"2\" :points=\"lineToNodusPoints\" color=\"#ffffff\" />\n\n\n    </TresObject3D>\n\n</template>","import { defineComponent as _defineComponent } from 'vue'\nimport { createVNode as _createVNode, renderList as _renderList, Fragment as _Fragment, openBlock as _openBlock, createElementBlock as _createElementBlock, resolveComponent as _resolveComponent, withCtx as _withCtx, createBlock as _createBlock, unref as _unref } from \"vue\"\n\nimport { PropType, computed, ref, watch } from 'vue'\nimport { Euler, Matrix4, Plane, Ray, Vector3 } from 'three';\nimport Line2Clipped from './Line2FromCientosPackageAndItsTheSameButYouCanAlsoUseClippingPlanesSoItsNot.vue';\nimport { Line2 } from \"@tresjs/cientos\";\nimport { calculateObliquityOfTheEcliptic, calculateShadowDirection, calculateSunHorizontalCoordsFromApparentSolarTime, calculateSunHorizontalCoordsFromBabylonianTime, calculateSunHorizontalCoordsFromUTC, extractCloseAndPadSequence, horizontalToActualCoords, rad, toHorizontalCoords, assertUnreachable, calculateSunHorizontalCoordsFromItalianTime, calculateSunHorizontalCoordsFromSeasonalTime, calculatePolarDayDeclination } from '@/calculations';\nimport SundialLetter from './SundialLetter.vue';\nimport SundialFaceGrid from './SundialFaceGrid.vue';\n\n    // declination plots - plotting the path of the shadow throughout a day at a specific declination\n    type DeclinationPlotLabel = \"december-solstice\" | \"june-solstice\" | \"equinox\" | \"polar-day\" | \"polar-night\"\n\n    const numeralDistanceFromDeclinationLine = 0.2\n    const hourLineDigitMinDistanceToInsideBorder = 0.15;\n\n\n    /**\n    * Day upon which the labels are plotted.\n    * NOTE polar night/day use the same values as december/june solstice respectively - \n    * This is because the projected point is clamped to the polar night/day lines later (where applicable.)\n    */\n    const crosshairSize = 0.1\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'PointSundial',\n  props: {\n        show: {\n            required: true,\n            type: Boolean as PropType<boolean>\n        },\n        latitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        longitude: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        radius: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        gnomonPosition: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        origin: {\n            required: true,\n            type: Object as PropType<Vector3>\n        },\n        rotation: {\n            required: true,\n            type: Object as PropType<Euler>\n        },\n        hourLineStyle: {\n            required: true,\n            type: String as PropType<\"modern-local\" | \"modern-mean-solar\" | \"modern-apparent-solar\" | \"babylonian\" | \"italian\" | \"seasonal\">\n        },\n        timeZone: {\n            required: true,\n            type: Number as PropType<number>\n        },\n        declinationPlots: {\n            required: true,\n            type: Array as PropType<DeclinationPlotLabel[]>\n        },\n        localTime: {\n            required:true,\n            type: Number as PropType<number>,\n        },\n        day: {\n            required: true,\n            type: Number as PropType<number>,\n        },\n        showGrid: {\n            required:true,\n            type: Boolean as PropType<boolean>\n        }, \n        gridColorPalette: {\n            required: true,\n            type: String as PropType<\"light\" | \"dark\">\n        }\n\n    },\n  setup(__props) {\n\n\nconst props = __props\n\n\n    // copy props only when visible, then do calculations on the copied props.\n    const freezeProps = ref({ ...props })\n    watch(props, (newValue) => {\n        if (newValue.show) {\n            freezeProps.value = { ...newValue }\n        }\n    }, { immediate: true })\n\n\n    const gnomonAbsolutePosition = computed(() => {\n        return new Vector3(...freezeProps.value.gnomonPosition)\n            .applyEuler(freezeProps.value.rotation)\n            .add(new Vector3(...freezeProps.value.origin))\n    })\n    let sundialNormal = computed(() => new Vector3(0, 1, 0).applyEuler(freezeProps.value.rotation));\n\n\n    const platePlane = computed(() => new Plane(sundialNormal.value, 0).translate(new Vector3(...freezeProps.value.origin)))\n    // vector used to raise the plot above the surface.\n    const plateToPlotVector = computed(() => sundialNormal.value.clone().normalize().multiplyScalar(0.007))\n\n\n    /**\n     * Affected by context: latitude, longitude, platePlane.\n     * Coordinates produced are raised slightly above the plate with plateToPlotVector\n     * @param hour 0 to 23 (hours from midnight. To `timeStandard` standard.)\n     * @param day 0 to 364\n     * @param timeStandard mean solar time or utc+0 time.\n     */\n    function projectionOnPlate(hour: number, day: number, hourLineStyle: typeof props.hourLineStyle) : Vector3 | null {\n\n        let horizontalCoords: { azimuth:number, altitude: number }\n\n        switch (hourLineStyle) {\n            case 'modern-local':\n                /**@todo move adjustment for time zone to here (currently in the labels code somewhere) */\n                horizontalCoords = calculateSunHorizontalCoordsFromUTC(day, hour * 60 - freezeProps.value.timeZone, freezeProps.value.latitude, freezeProps.value.longitude)\n                break\n            case 'modern-mean-solar':\n                // mean solar time is equivalent to standard time at longitude=0\n                horizontalCoords = calculateSunHorizontalCoordsFromUTC(day, hour * 60, freezeProps.value.latitude, 0)\n                break\n            case 'modern-apparent-solar':\n                horizontalCoords = calculateSunHorizontalCoordsFromApparentSolarTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude)\n                break\n            case 'babylonian': {\n                const hc = calculateSunHorizontalCoordsFromBabylonianTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude, { maxDeclination: Math.max(polarDayDeclination.value, polarNightDeclination.value), minDeclination: Math.min(polarDayDeclination.value, polarNightDeclination.value)})\n                if (!hc) return null\n                else horizontalCoords = hc\n                break\n            }\n            case 'italian': {\n                const hc = calculateSunHorizontalCoordsFromItalianTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude, { maxDeclination: Math.max(polarDayDeclination.value, polarNightDeclination.value), minDeclination: Math.min(polarDayDeclination.value, polarNightDeclination.value) })\n                if (!hc) return null\n                else horizontalCoords = hc\n                break\n            }\n            case 'seasonal':{\n                const hc = calculateSunHorizontalCoordsFromSeasonalTime(day, hour * 60, freezeProps.value.latitude, freezeProps.value.longitude, { maxDeclination: Math.max(polarDayDeclination.value, polarNightDeclination.value), minDeclination: Math.min(polarDayDeclination.value, polarNightDeclination.value) })\n                if (!hc) return null\n                else horizontalCoords = hc\n                break\n            }\n        }\n\n        // sun pos\n\n\n        const sunPos = horizontalToActualCoords(horizontalCoords.azimuth, horizontalCoords.altitude)\n\n        // shadow projection on plate\n        const ray = new Ray(gnomonAbsolutePosition.value, new Vector3(-sunPos.x, -sunPos.y, -sunPos.z))\n        const intersection = ray.intersectPlane(platePlane.value, new Vector3())\n\n        return intersection?.add(plateToPlotVector.value) ?? null\n    }\n\n\n    const hourLinePlotRangeType = computed(() => [\"modern-local\", \"modern-mean-solar\"].includes(freezeProps.value.hourLineStyle) ? \"full-year\" : \"half-year\")\n    const hourLinePlotHours = [...Array(24).keys()];\n    const hourLinePlotDays = computed(() => {\n        if (hourLinePlotRangeType.value == \"full-year\") {\n            return [...Array(37).keys()].map(x => 10*x)\n        } else {\n            // only use half the year, between the 2 solstices\n            return [...Array(37).keys()].map(x => 171 + Math.round((x/36)*(354-171)))\n        }\n    })\n    /**[hour][day] -> projection point. */\n    const hourLinePlotPoints = computed(() => \n        hourLinePlotHours.map(hour => \n            hourLinePlotDays.value.map(day => \n                projectionOnPlate(hour, day, freezeProps.value.hourLineStyle)\n            )\n        )\n    )\n\n    // remove nulls from points, make lines closed, pad with repeated last element, label each line with the hour\n    const hourLinePlotLines = computed(() => \n        [...hourLinePlotPoints.value.entries()].map(([i, points]) => \n            ({\n                hour: hourLinePlotHours[i],\n                line: (() => {\n                    const _line = extractCloseAndPadSequence(points, hourLinePlotDays.value.length + 1, new Vector3(0, 0, 0), /*dont close*/hourLinePlotRangeType.value == \"half-year\")\n\n                    // // all this stuff is trying to find non-linear sections of the line because I was having problems\n                    // let delta = new Vector3().subVectors(_line[1], _line[0])\n                    // for (let j = 1; j < _line.length - 1; j++) {\n                    //     let newDelta = new Vector3().subVectors(_line[j+1], _line[j])\n                    //     if (delta.length() > 0.01 && newDelta.length() > 0.01) {\n                    //         // check they are pointing in the same direction\n                    //         const deltaUnit = delta.clone().normalize()\n                    //         const newDeltaUnit = newDelta.clone().normalize()\n                    //         if (deltaUnit.distanceTo(newDeltaUnit) > 0.01) {\n                    //             console.log(\"what\")\n                    //         }\n                    //     }\n                    //     delta = newDelta\n                    // }\n                    return _line\n                })(),\n                show: !(freezeProps.value.hourLineStyle == \"seasonal\" && i > 12)\n            })\n        )\n    )\n\n\n    \n    \n\n    const declinationPlotHours = [...Array(48).keys()].map(x => x/2)\n    const obliquityOfTheEcliptic2023 = calculateObliquityOfTheEcliptic(8400.5 + 132)\n    // Note. commented out 0.833's were to adjust for the sun diameter and atmonspheric refraction,\n    // but the latter is so variable dependent on temp, pressure, etc that it doesn't really make sense to adjust for this\n    const polarDayAndNightVisible = computed(() => Math.abs(freezeProps.value.latitude) > 90 - obliquityOfTheEcliptic2023 * 180 / Math.PI /*+/- 0.833*/)\n    // critical declinations at current lattitude that would cause a polar day/night\n    // again, not adjusting for diameter of solar disc or atmospheric refraction.\n    const polarDayDeclination = computed(() => rad(calculatePolarDayDeclination(freezeProps.value.latitude)))\n    const polarNightDeclination = computed(() => -polarDayDeclination.value)\n    const declinationPlotsParams = computed<{\n        label: DeclinationPlotLabel,\n        declination: number,\n        color: string,\n        show:boolean\n    }[]>(() => [\n        {\n            label: \"december-solstice\",\n            declination: -obliquityOfTheEcliptic2023,\n            color: \"#ffffff\",\n            show: freezeProps.value.declinationPlots.includes(\"december-solstice\")\n        },\n        {\n            label: \"june-solstice\",\n            declination: obliquityOfTheEcliptic2023,\n            color: \"#ffffff\",\n            show: freezeProps.value.declinationPlots.includes(\"june-solstice\")\n        },\n        {\n            label: \"equinox\", // line aka equinoctial line\n            declination: 0,\n            color: \"#ffffff\",\n            show: freezeProps.value.declinationPlots.includes(\"equinox\")\n        },\n        {\n            label: \"polar-day\",\n            declination: polarDayDeclination.value,\n            color: \"#EE442F\", // https://venngage.com/blog/color-blind-friendly-palette/\n            show: polarDayAndNightVisible.value && freezeProps.value.declinationPlots.includes(\"polar-day\")\n        },\n        {\n            label: \"polar-night\",\n            declination: polarNightDeclination.value,\n            color: \"#601A4A\",\n            show: polarDayAndNightVisible.value && freezeProps.value.declinationPlots.includes(\"polar-night\")\n        },\n    ])\n\n    const declinationPlots = computed(() => \n        declinationPlotsParams.value.map((params) => {\n            const points = declinationPlotHours.map((hour) => {\n                const hourAngle = (hour - 12) / 24 * Math.PI * 2 // radians\n                const { azimuth, altitude } = toHorizontalCoords(params.declination, hourAngle, freezeProps.value.latitude * Math.PI / 180)\n                const { x, y, z } = horizontalToActualCoords(azimuth, altitude)\n                const plateIntersection = new Ray(gnomonAbsolutePosition.value, new Vector3(-x, -y, -z)).intersectPlane(platePlane.value, new Vector3())\n                // elevate slightly off plate\n                return plateIntersection?.add(plateToPlotVector.value) ?? null\n            })\n            const line = extractCloseAndPadSequence(points, declinationPlotHours.length + 1, new Vector3(0, 0, 0));\n\n            return {...params, line}\n        })\n    )\n\n        \n    // define clipping planes for the plot.\n    const relativeClippingPlanesArgs = computed(() => [\n        {\n            normal: new Vector3(1, 0, 0),\n            coplanarPoint: new Vector3(-freezeProps.value.radius, 0, 0).add(freezeProps.value.origin)\n        },\n        {\n            normal: new Vector3(-1, 0, 0),\n            coplanarPoint: new Vector3(freezeProps.value.radius, 0, 0).add(freezeProps.value.origin)\n        },\n        {\n            normal: new Vector3(0, 0, 1),\n            coplanarPoint: new Vector3(0, 0, -freezeProps.value.radius).add(freezeProps.value.origin)\n        },\n        {\n            normal: new Vector3(0, 0, -1),\n            coplanarPoint: new Vector3(0, 0, freezeProps.value.radius).add(freezeProps.value.origin)\n        },\n    ]);\n\n    const clippingPlanes = computed(() => {\n\n        const planes : Plane[] = []\n\n        for (let {normal, coplanarPoint} of relativeClippingPlanesArgs.value) {\n            planes.push(new Plane().setFromNormalAndCoplanarPoint(\n                normal.clone()\n                    .applyEuler(freezeProps.value.rotation),\n                coplanarPoint.clone()\n                    .add(freezeProps.value.origin.clone().multiplyScalar(-1))\n                    .applyEuler(freezeProps.value.rotation)\n                    .add(freezeProps.value.origin),\n            ))\n        }\n\n        return planes\n    })\n\n\n    \n    // work out what declination line (summer/winter) to put the numerals on.\n    const declinationLineOfNumerals = computed <DeclinationPlotLabel>(() => {\n        // make a ray starting from the nodus, pointing towards the north star.\n        // if this ray intersercts the sundial plate plane (infinitely extended), then use the winter solstice. Otherwise use the summer solstice.\n        const ray = new Ray(gnomonAbsolutePosition.value, new Vector3(0, Math.cos(rad(90-freezeProps.value.latitude)), -Math.sin(rad(90-freezeProps.value.latitude))))\n        const intersect = ray.intersectsPlane(platePlane.value)\n\n        switch (freezeProps.value.hourLineStyle) {\n            case 'modern-local':\n            case 'modern-mean-solar':\n            case 'modern-apparent-solar':\n                return intersect ? \"december-solstice\" : \"june-solstice\" \n            case 'babylonian':\n            case 'italian':\n                if (polarDayAndNightVisible.value) return intersect != (freezeProps.value.latitude < 0) ? \"polar-night\" : \"polar-day\"\n                else return intersect ? \"december-solstice\" : \"june-solstice\" \n            case 'seasonal':\n                // if close to/in the arctic/antarctic circle the lines can get very bunched up\n                if (polarDayAndNightVisible.value) return \"polar-day\"\n                else return intersect ? \"december-solstice\" : \"june-solstice\" \n            default:\n                return assertUnreachable(freezeProps.value.hourLineStyle)\n        }\n        \n    })\n\n\n   \n    /**Normalized direction vector (or approx) of each hour line */\n    const hourLineDirections = computed(() => {\n        switch (freezeProps.value.hourLineStyle) {\n            case 'modern-local':\n            case 'modern-mean-solar':\n            case 'modern-apparent-solar':\n            {\n                // Approach: calculate the shadow projection angle using the same code as the trad sundial.\n\n                // The hours expressed in the range midnight to midnight, 0 to 2\n                const hourLineTimeAngles = hourLinePlotHours.map(i => {\n                    let offsetHour;\n                    if (freezeProps.value.hourLineStyle == 'modern-local') {\n                        // need to adjust for longitude\n                        offsetHour = i + freezeProps.value.longitude * 24 / 360\n                    }\n                    else {\n                        offsetHour = i;\n                    }\n                    return ((((offsetHour * 60) % 1440) + 1440) % 1440) * Math.PI * 2 / 1440\n                })\n\n                return hourLineTimeAngles.map(timeAngle => \n                    calculateShadowDirection(\n                        timeAngle - (freezeProps.value.hourLineStyle == \"modern-local\" ? freezeProps.value.timeZone / 1440 * Math.PI * 2 : 0),\n                        freezeProps.value.latitude * Math.PI / 180,\n                        sundialNormal.value\n                    )\n                    .normalize()\n                    .multiplyScalar(declinationLineOfNumerals.value == \"december-solstice\" ? 1 : -1)\n                )\n            }\n            case 'babylonian':\n            case 'italian':\n            case 'seasonal':\n                {\n                    // get the label to appear on the correct side of the line\n                    // place on the INSIDE of the line\n                    // placing labels on the outside would make it difficult to mentally connect the labels and hour lines in some cases\n                    const hourLineDirectionMultiplyer = (() => {\n                        switch (declinationLineOfNumerals.value) {\n                            case 'december-solstice':\n                                return -1\n                            case 'june-solstice':\n                            case 'equinox':\n                                return 1\n                            case 'polar-day':\n                                return freezeProps.value.latitude > 0 ? 1 : -1\n                            case 'polar-night':\n                                return freezeProps.value.latitude > 0 ? -1 : 1\n                        }\n                    })()\n                    \n                    // approach: use dir between 2 points.\n                    return hourLinePlotLines.value.map(({line}) => \n                        new Vector3().subVectors(line[line.length-1], line[0])\n                        .normalize()\n                        .multiplyScalar(hourLineDirectionMultiplyer)\n\n                    )\n                }\n            default:\n                return assertUnreachable(freezeProps.value.hourLineStyle)\n        }\n    })\n\n    const declinationLineOfNumeralsDay = computed(() => {\n        switch (declinationLineOfNumerals.value) {\n            case \"december-solstice\":\n                return 354\n            case \"june-solstice\":\n                return 171\n            case \"polar-day\":\n                return freezeProps.value.latitude > 0 ? 171 : 354\n            case \"polar-night\":\n                return freezeProps.value.latitude > 0 ? 354 : 171\n            case 'equinox':\n                return 78\n            default:\n                return assertUnreachable(declinationLineOfNumerals.value)\n        }\n    })\n\n    // world coords\n    const hourLineDigitPositions = computed(() => \n        hourLinePlotHours.map((hour, i) => {\n            const pos = projectionOnPlate(hour, declinationLineOfNumeralsDay.value, freezeProps.value.hourLineStyle)\n                ?.add(\n                    hourLineDirections.value[i]\n                    .clone()\n                    .multiplyScalar(numeralDistanceFromDeclinationLine)\n                );\n            if (!pos) return null\n\n            // check if pos is on the plate\n            // reuse the clipping planes\n            for (let plane of clippingPlanes.value) {\n                const p = plane.clone()\n                p.constant -= hourLineDigitMinDistanceToInsideBorder;\n                if (p.distanceToPoint(pos) < 0) {\n                    return null\n                }\n            }\n\n            return pos\n        })\n\n    )\n\n    /** In case any hour systems need to start counting from a number other than 0 this can be accounted for here. */\n    const firstHourNumber = computed(() => {\n        switch (freezeProps.value.hourLineStyle) {\n            case 'modern-local':\n            case 'modern-mean-solar':\n            case 'modern-apparent-solar':\n            case 'italian':\n            case 'seasonal': \n            case 'babylonian':\n                return 0\n            default:\n                return assertUnreachable(freezeProps.value.hourLineStyle)\n        }\n    })\n\n    // relative coords\n    const hourLineDigits = computed(() => {\n\n        return hourLinePlotHours.map((hour, i) => ({\n            hour:hour,\n            label:hourLineDigitPositions.value[i] ? ((hour + firstHourNumber.value).toString()) : \"\",\n            // transform to relative coords\n            pos: hourLineDigitPositions.value[i]\n                ?.sub(freezeProps.value.origin)\n                .applyMatrix4(new Matrix4().makeRotationFromEuler(freezeProps.value.rotation).invert())\n                ?? new Vector3(0,0,0),\n            show: !(freezeProps.value.hourLineStyle == \"seasonal\" && i > 12)\n        }))\n    })\n\n    const fontSize = computed(() => {\n        // changing the text size causes a big lag spike\n        // only do it when this sundial is actually shown\n        if (!freezeProps.value.show) return 0.12\n\n        const nodusHeight = new Vector3(0,0,0).distanceTo(freezeProps.value.gnomonPosition)\n        if (nodusHeight < 1) return 0.055\n        else return 0.12\n    })\n\n    const crosshairLocation = computed(() => {\n        return projectionOnPlate(freezeProps.value.localTime / 60, freezeProps.value.day, \"modern-local\")\n    })\n    const plateGeometryArgs = computed<[number, number, number]>(() => [freezeProps.value.radius * 2, 0.1, freezeProps.value.radius * 2])\nconst rotationCopy = computed(() => freezeProps.value.rotation.clone())\nconst lineToNodusPoints = computed<[number, number, number][]>(() => [[0,0,0], freezeProps.value.gnomonPosition.toArray()])\nconst gnomonPositionCopy = computed(() => freezeProps.value.gnomonPosition.clone())\nconst crosshairLocationNonNull = computed(() => crosshairLocation.value ?? new Vector3(0,0,0))\nconst crosshairLocationExists = computed(() => !!crosshairLocation.value)\nconst crosshairPoints0 = [new Vector3(-crosshairSize / 4 * Math.sqrt(2), 0, -crosshairSize / 4 * Math.sqrt(2)), new Vector3(crosshairSize / 4 * Math.sqrt(2), 0, crosshairSize / 4 * Math.sqrt(2))]\nconst crosshairPoints1 = [new Vector3(-crosshairSize / 4 * Math.sqrt(2), 0, crosshairSize / 4 * Math.sqrt(2)), new Vector3(crosshairSize / 4 * Math.sqrt(2), 0, -crosshairSize / 4 * Math.sqrt(2))]\nconst sundialFaceOriginRaised = computed(() => freezeProps.value.origin.clone().add(plateToPlotVector.value))\n\n\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n  const _component_TresBoxGeometry = _resolveComponent(\"TresBoxGeometry\")!\n  const _component_TresMeshPhongMaterial = _resolveComponent(\"TresMeshPhongMaterial\")!\n  const _component_TresMesh = _resolveComponent(\"TresMesh\")!\n  const _component_TresSphereGeometry = _resolveComponent(\"TresSphereGeometry\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_TresObject3D, {\n      visible: props.show\n    }, {\n      default: _withCtx(() => [\n        _createVNode(SundialFaceGrid, {\n          sundialRotation: freezeProps.value.rotation,\n          show: props.showGrid,\n          origin: sundialFaceOriginRaised.value,\n          radius: freezeProps.value.radius,\n          colorPalette: freezeProps.value.gridColorPalette\n        }, null, 8, [\"sundialRotation\", \"show\", \"origin\", \"radius\", \"colorPalette\"]),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hourLinePlotLines.value, (hourLine) => {\n          return (_openBlock(), _createBlock(_component_TresObject3D, {\n            key: hourLine.hour,\n            visible: hourLine.show\n          }, {\n            default: _withCtx(() => [\n              _createVNode(Line2Clipped, {\n                \"line-width\": 1,\n                points: hourLine.line,\n                color: \"#ffffff\",\n                \"clipping-planes\": clippingPlanes.value\n              }, null, 8, [\"points\", \"clipping-planes\"])\n            ]),\n            _: 2\n          }, 1032, [\"visible\"]))\n        }), 128)),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(declinationPlots.value, (yearlyPlot) => {\n          return (_openBlock(), _createBlock(_component_TresObject3D, {\n            key: yearlyPlot.label,\n            visible: yearlyPlot.show\n          }, {\n            default: _withCtx(() => [\n              _createVNode(Line2Clipped, {\n                \"line-width\": 1,\n                points: yearlyPlot.line,\n                color: yearlyPlot.color,\n                \"clipping-planes\": clippingPlanes.value\n              }, null, 8, [\"points\", \"color\", \"clipping-planes\"])\n            ]),\n            _: 2\n          }, 1032, [\"visible\"]))\n        }), 128)),\n        _createVNode(_component_TresObject3D, {\n          position: crosshairLocationNonNull.value,\n          visible: crosshairLocationExists.value,\n          rotation: rotationCopy.value\n        }, {\n          default: _withCtx(() => [\n            _createVNode(Line2Clipped, {\n              \"line-width\": 1,\n              points: crosshairPoints0,\n              color: \"#000000\",\n              \"clipping-planes\": clippingPlanes.value\n            }, null, 8, [\"clipping-planes\"]),\n            _createVNode(Line2Clipped, {\n              \"line-width\": 1,\n              points: crosshairPoints1,\n              color: \"#000000\",\n              \"clipping-planes\": clippingPlanes.value\n            }, null, 8, [\"clipping-planes\"])\n          ]),\n          _: 1\n        }, 8, [\"position\", \"visible\", \"rotation\"])\n      ]),\n      _: 1\n    }, 8, [\"visible\"]),\n    _createVNode(_component_TresObject3D, {\n      visible: props.show,\n      position: freezeProps.value.origin,\n      rotation: rotationCopy.value\n    }, {\n      default: _withCtx(() => [\n        _createVNode(_component_TresMesh, {\n          position: [0, -0.05, 0],\n          \"cast-shadow\": \"\",\n          \"receive-shadow\": \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_TresBoxGeometry, { args: plateGeometryArgs.value }, null, 8, [\"args\"]),\n            _createVNode(_component_TresMeshPhongMaterial, { color: \"#f9ecec\" })\n          ]),\n          _: 1\n        }),\n        (_openBlock(true), _createElementBlock(_Fragment, null, _renderList(hourLineDigits.value, (digit) => {\n          return (_openBlock(), _createBlock(_component_TresObject3D, {\n            key: digit.hour,\n            visible: digit.show\n          }, {\n            default: _withCtx(() => [\n              _createVNode(SundialLetter, {\n                \"receive-shadow\": \"\",\n                position: digit.pos,\n                text: digit.label,\n                size: fontSize.value\n              }, null, 8, [\"position\", \"text\", \"size\"])\n            ]),\n            _: 2\n          }, 1032, [\"visible\"]))\n        }), 128)),\n        _createVNode(_component_TresMesh, {\n          position: gnomonPositionCopy.value,\n          \"cast-shadow\": \"\",\n          \"receive-shadow\": \"\"\n        }, {\n          default: _withCtx(() => [\n            _createVNode(_component_TresSphereGeometry, { args: [0.08, 20, 16] }),\n            _createVNode(_component_TresMeshPhongMaterial, { color: \"#b7b7b7\" })\n          ]),\n          _: 1\n        }, 8, [\"position\"]),\n        _createVNode(_unref(Line2), {\n          \"line-width\": 2,\n          points: lineToNodusPoints.value,\n          color: \"#ffffff\"\n        }, null, 8, [\"points\"])\n      ]),\n      _: 1\n    }, 8, [\"visible\", \"position\", \"rotation\"])\n  ], 64))\n}\n}\n\n})","import script from \"./PointSundial.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./PointSundial.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, createVNode as _createVNode, Suspense as _Suspense, withCtx as _withCtx, openBlock as _openBlock, createBlock as _createBlock, resolveComponent as _resolveComponent } from \"vue\"\n\nimport { GLTFModel } from '@tresjs/cientos';\nimport {PropType, computed} from 'vue';\nimport {Euler, Quaternion} from 'three';\n\n/**\n * Note: assuming that compass camera is looking in the negative Z direction\n */\n\n\nexport default /*@__PURE__*/_defineComponent({\n  __name: 'CompassObject',\n  props: {\n    sundialCameraQuaternion: {\n        required: false,\n        type: Object as PropType<Quaternion>\n    }\n},\n  setup(__props) {\n\nconst props = __props\n\nconst constCompassQuaternion = new Quaternion().setFromEuler(new Euler(0, Math.PI, 0, \"XYZ\"))\n\nconst quaternion = computed(() => {\n    if (!props.sundialCameraQuaternion) return new Quaternion()\n    return props.sundialCameraQuaternion.clone().invert()\n        .multiply(constCompassQuaternion)\n})\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_TresObject3D = _resolveComponent(\"TresObject3D\")!\n\n  return (_openBlock(), _createBlock(_component_TresObject3D, { quaternion: quaternion.value }, {\n    default: _withCtx(() => [\n      (_openBlock(), _createBlock(_Suspense, null, {\n        default: _withCtx(() => [\n          _createVNode(_unref(GLTFModel), { path: \"./objects3d/compass.glb\" })\n        ]),\n        _: 1\n      }))\n    ]),\n    _: 1\n  }, 8, [\"quaternion\"]))\n}\n}\n\n})","<script setup lang=\"ts\">\nimport { GLTFModel } from '@tresjs/cientos';\nimport {defineProps, PropType, computed} from 'vue';\nimport {Euler, Quaternion} from 'three';\n\n/**\n * Note: assuming that compass camera is looking in the negative Z direction\n */\n\nconst props = defineProps({\n    sundialCameraQuaternion: {\n        required: false,\n        type: Object as PropType<Quaternion>\n    }\n})\n\nconst constCompassQuaternion = new Quaternion().setFromEuler(new Euler(0, Math.PI, 0, \"XYZ\"))\n\nconst quaternion = computed(() => {\n    if (!props.sundialCameraQuaternion) return new Quaternion()\n    return props.sundialCameraQuaternion.clone().invert()\n        .multiply(constCompassQuaternion)\n})\n\n</script>\n\n<template>\n    <TresObject3D :quaternion=\"quaternion\">\n        <Suspense>\n            <GLTFModel path=\"./objects3d/compass.glb\" />\n        </Suspense>\n    </TresObject3D>\n</template>","import script from \"./CompassObject.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./CompassObject.vue?vue&type=script&setup=true&lang=ts\"\n\nconst __exports__ = script;\n\nexport default __exports__","import { useCssVars as _useCssVars, defineComponent as _defineComponent } from 'vue'\nimport { unref as _unref, resolveComponent as _resolveComponent, createVNode as _createVNode, isRef as _isRef, withCtx as _withCtx, createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, normalizeStyle as _normalizeStyle, vModelCheckbox as _vModelCheckbox, vModelRadio as _vModelRadio, createTextVNode as _createTextVNode, withKeys as _withKeys, vShow as _vShow, Fragment as _Fragment } from \"vue\"\nimport _imports_0 from './assets/github-mark-white.svg'\nimport _imports_1 from './assets/world-map-coordinates-correct.png'\nimport _imports_2 from './assets/sundialicon.svg'\nimport _imports_3 from './assets/pointshadowtraceicon.svg'\nimport _imports_4 from './assets/snapmode.svg'\nimport _imports_5 from './assets/orbitmode.svg'\n\n\nconst _hoisted_1 = { style: {\"width\":\"100%\",\"height\":\"100%\",\"position\":\"fixed\",\"left\":\"0\",\"top\":\"0\"} }\nconst _hoisted_2 = { id: \"overlay\" }\nconst _hoisted_3 = { id: \"sidebarContent\" }\nconst _hoisted_4 = { \"data-v-walkthrough\": \"map\" }\nconst _hoisted_5 = { class: \"horizontal_settings\" }\nconst _hoisted_6 = { class: \"setting\" }\nconst _hoisted_7 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_8 = { class: \"setting\" }\nconst _hoisted_9 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_10 = { class: \"setting\" }\nconst _hoisted_11 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_12 = { style: {\"display\":\"grid\",\"grid-template-columns\":\"min-content auto\",\"grid-template-rows\":\"min-content auto\"} }\nconst _hoisted_13 = { style: {\"position\":\"relative\",\"aspect-ratio\":\"2 / 1\"} }\nconst _hoisted_14 = {\n  class: \"setting\",\n  \"data-v-walkthrough\": \"time-zone\"\n}\nconst _hoisted_15 = {\n  class: \"setting\",\n  \"data-v-walkthrough\": \"sundial-type\"\n}\nconst _hoisted_16 = {\n  class: \"checkboxSetting\",\n  style: {\"display\":\"flex\",\"flex-direction\":\"row\",\"align-items\":\"center\"}\n}\nconst _hoisted_17 = {\n  class: \"checkboxSetting\",\n  style: {\"display\":\"flex\",\"flex-direction\":\"row\",\"align-items\":\"center\"}\n}\nconst _hoisted_18 = { \"data-v-walkthrough\": \"slant-and-rotation\" }\nconst _hoisted_19 = { class: \"setting\" }\nconst _hoisted_20 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_21 = { class: \"setting\" }\nconst _hoisted_22 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_23 = { class: \"setting\" }\nconst _hoisted_24 = { class: \"fieldTitle\" }\nconst _hoisted_25 = {\n  key: 0,\n  class: \"error\"\n}\nconst _hoisted_26 = {\n  class: \"setting\",\n  \"data-v-walkthrough\": \"hour-lines\"\n}\nconst _hoisted_27 = { key: 0 }\nconst _hoisted_28 = { class: \"checkboxSetting\" }\nconst _hoisted_29 = { class: \"checkboxSetting\" }\nconst _hoisted_30 = {\n  key: 1,\n  style: {\"margin-left\":\"10px\"}\n}\nconst _hoisted_31 = { class: \"checkboxSetting\" }\nconst _hoisted_32 = { class: \"checkboxSetting\" }\nconst _hoisted_33 = { class: \"checkboxSetting\" }\nconst _hoisted_34 = { class: \"checkboxSetting\" }\nconst _hoisted_35 = { class: \"checkboxSetting\" }\nconst _hoisted_36 = { class: \"checkboxSetting\" }\nconst _hoisted_37 = { key: 0 }\nconst _hoisted_38 = { class: \"setting\" }\nconst _hoisted_39 = { class: \"checkboxSetting\" }\nconst _hoisted_40 = { class: \"checkboxSetting\" }\nconst _hoisted_41 = { class: \"checkboxSetting\" }\nconst _hoisted_42 = { class: \"checkboxSetting\" }\nconst _hoisted_43 = {\n  for: \"showPolarDayLine\",\n  class: \"fieldOption\"\n}\nconst _hoisted_44 = { class: \"variable-readout\" }\nconst _hoisted_45 = { class: \"checkboxSetting\" }\nconst _hoisted_46 = {\n  for: \"showPolarNightLine\",\n  class: \"fieldOption\"\n}\nconst _hoisted_47 = { class: \"variable-readout\" }\nconst _hoisted_48 = { class: \"checkboxSetting\" }\nconst _hoisted_49 = { class: \"checkboxSetting\" }\nconst _hoisted_50 = { class: \"checkboxSetting\" }\nconst _hoisted_51 = { id: \"topRightControls\" }\nconst _hoisted_52 = {\n  id: \"compassContainer\",\n  title: \"North direction\"\n}\nconst _hoisted_53 = [\"title\"]\nconst _hoisted_54 = {\n  src: _imports_4,\n  height: \"100%\",\n  alt: \"Snap-to-top camera mode\"\n}\nconst _hoisted_55 = {\n  src: _imports_5,\n  height: \"100%\",\n  alt: \"Orbit camera mode\"\n}\nconst _hoisted_56 = {\n  id: \"status\",\n  \"data-v-walkthrough\": \"status\"\n}\nconst _hoisted_57 = { style: {\"display\":\"flex\",\"flex-direction\":\"row\",\"align-items\":\"center\"} }\nconst _hoisted_58 = { style: {\"display\":\"flex\",\"margin-left\":\"10px\",\"justify-content\":\"end\",\"flex-direction\":\"column\",\"align-items\":\"stretch\",\"padding-block\":\"9px\"} }\nconst _hoisted_59 = { class: \"subtitle\" }\nconst _hoisted_60 = { class: \"subtitle\" }\nconst _hoisted_61 = { class: \"subtitle\" }\nconst _hoisted_62 = { style: {\"display\":\"flex\",\"flex-direction\":\"row\"} }\nconst _hoisted_63 = { class: \"popper_content\" }\nconst _hoisted_64 = { style: {\"text-align\":\"left\"} }\nconst _hoisted_65 = {\n  class: \"subtitle\",\n  style: {\"margin-top\":\"13px\"}\n}\n\nimport { TresCanvas } from '@tresjs/core';\n    import { onClickOutside } from '@vueuse/core'\n    import interpolate from \"color-interpolate\";\n    import { computed, getCurrentInstance, nextTick, onMounted, reactive, ref, watch } from 'vue'\n    import SunObject from './components/SunObject.vue';\n    import { decimal, helpers, maxValue, minValue, required } from '@vuelidate/validators';\n    import useVuelidate from '@vuelidate/core';\n    import { BasicShadowMap, Vector3, Euler, Quaternion } from 'three';\n    import { dateToString, clamp, horizontalToActualCoords, calculateSunHorizontalCoordsFromUTC, timeToString, timeZoneToString, longitudeToTimeZone, stringToTime, calculatePolarDayDeclination, calculateObliquityOfTheEcliptic } from '@/calculations';\n    import DialAndGnomonSundial from './components/DialAndGnomonSundial.vue';\n    import CameraHelper from './components/CameraHelper.vue';\n    import RendererHelper from './components/RendererHelper.vue';\n    import ThreeTimesExplanation from './components/ThreeTimesExplanation.vue';\n    import { tourSteps as walkthroughSteps } from './walkthrough';\n    import Popper from 'vue3-popper';\n    import PointSundial from './components/PointSundial.vue';\n    import CompassObject from \"./components/CompassObject.vue\"\n    \n    /*\n     * Config\n     */\n    const traditionalSundialRadius = 5;\n    const pointSundialRadius = 4;\n    const numeralDistanceFromSundialOrigin = 4;\n    const zoomSpeed = 3;\n\n    \n    /*\n     * Independent variables \n     */\n    /** 0 to 24*60 */\n    \nexport default /*@__PURE__*/_defineComponent({\n  __name: 'App',\n  setup(__props) {\n\n_useCssVars(_ctx => ({\n  \"093f104b\": (statusTextColor.value)\n}))\n\n\n    const sundialOrigin = new Vector3(0, -0.5, 0);\n    const cameraTarget = new Vector3(0, -1, 0)//sundialOrigin.clone();\n    let localTime = ref<number>(12 * 60);\n    /** 0 to 364 (integer) */\n    let day = ref<number>(162);\n    let longitude = ref<number>(0);\n    let latitude = ref<number>(0);\n    let autoSelectTimeZone = ref(true);\n    /** +/- minutes UTC */\n    let timeZone = ref<number>(0);\n    let sunRaysPassThroughEarth = ref(false);\n    let traditionalSundialHourLineStyle = ref<\"solar\"|\"standard\">(\"standard\");\n    let pointShadowTraceHourLineStyle = ref<\"modern-local\"|\"modern-mean-solar\"|\"modern-apparent-solar\"|\"babylonian\"|\"italian\"|\"seasonal\">(\"modern-local\");\n    let sundialType = ref<\"dialAndGnomon\" | \"pointSundial\">(\"dialAndGnomon\")\n    let slant = ref<number>(0);\n    let rotation = ref<number>(0);\n    /**Camera position multiplier per second. <1 zoom in, >1 zoom out */\n    let currentZoomPerSecond = ref<number>(1);   \n    let gnomonHeight = ref<number>(1)\n    let showEquinoxLine = ref<boolean>(false)\n    let showJuneSolsticeLine = ref<boolean>(true);\n    let showDecemberSolsticeLine = ref<boolean>(true)\n    let showPolarDayLine = ref<boolean>(true);\n    let showPolarNightLine = ref<boolean>(true);\n    let timeAdvanceSpeed = ref<number>(0)\n    let alwaysDaySkyColor = ref<boolean>(false);\n    let showSundialFaceGrid = ref<boolean>(false);\n    let snapCamera = ref<boolean>(false);\n\n    /**\n     * readonly variables\n     */\n    let cameraQuaternion = ref<Quaternion>()\n\n    /*\n     * Allow the time to be input manually.\n     */\n    let isEditingTime = ref<boolean>(false);\n    /** What's in the time manual entry box */\n    let timeEntryValue = ref<string>(\"\");\n    const timeEntryBox = ref<HTMLInputElement | null>(null);   \n    function showTimeEntryBox() {\n        if (isEditingTime.value == false) {\n            isEditingTime.value = true;\n            timeEntryValue.value = timeToString(localTime.value);\n\n            nextTick(() => timeEntryBox.value?.focus());\n            \n        }\n    }\n    function updateTimeFromEntryBox() {\n        if (!timeEntryBox.value) return;\n\n        const newTime = stringToTime(timeEntryBox.value.value);\n        if (isNaN(newTime)) return;\n\n        localTime.value = newTime;\n    }\n    function hideTimeEntryBox() {\n        if (isEditingTime.value == true) {\n            isEditingTime.value = false\n            \n            updateTimeFromEntryBox()\n        }\n    }\n    onClickOutside(timeEntryBox, hideTimeEntryBox)\n\n    // make the 3 times explanation popup disappear when escape key pressed\n    onMounted(() => {\n        document.addEventListener(\"keydown\", (event) => {\n            if (event.key == \"Escape\") {\n                setShowThreeTimesExplanation(false)\n            }\n        })\n    })\n   \n\n\n    /*\n     * Sidebar form validation \n     */\n    const formDefaults = {\n        latitude:\"45.00\",\n        longitude:\"0.00\",\n        timeZone:\"+0:00\",\n        slant:\"0\",\n        rotation:\"0\",\n        gnomonHeight:\"1\"\n    }\n\n    /** used to parse time zone user input*/\n    const timeZoneRegex = /^\\s*([+-]?)\\s*((?:0?[0-9])|1[0-9])(?::((?:0[0-9])|[1-5][0-9]))?\\s*$/;\n\n    let formState = reactive(formDefaults);\n    const formRules = computed<Record<keyof typeof formDefaults, object>>(() => ({\n        latitude: {\n            required,\n            decimal,\n            minValue:minValue(-90),\n            maxValue:maxValue(90)\n        },\n        longitude: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        timeZone: {\n            isATimeZone: helpers.withMessage(\"Your time zone should look like +/-HH(:MM)\", helpers.regex(timeZoneRegex))\n        },\n        slant: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        rotation: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        gnomonHeight: {\n            required,\n            decimal,\n            minValue:minValue(0.5),\n            maxValue:maxValue(3)\n        }\n    }))\n    const v$ = useVuelidate(formRules, formState)\n\n    // parse and updadte whenever valid entries are changed in the form.\n    watch(() => formState.longitude, newVal => {\n        if (!v$.value.longitude.$invalid) {\n            longitude.value = Number.parseFloat(newVal);\n            // set the time zone as well.\n            if (autoSelectTimeZone.value) {\n                formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n            }\n        }\n    }, { immediate: true })\n    watch(() => formState.latitude, newVal => {\n        if (!v$.value.latitude.$invalid) latitude.value = Number.parseFloat(newVal);\n    }, {immediate:true})\n    watch(() => formState.timeZone, newVal => {\n        const result = newVal.match(timeZoneRegex);\n        if (result) {\n            const newValInt = (result[1] == \"-\" ? -1 : 1) * (Number.parseInt(result[2]) * 60 + Number.parseInt(result[3] ?? 0));\n            // change the local time so that the global time remains consistent\n            localTime.value = (((localTime.value + newValInt - timeZone.value) % 1440) + 1440) % 1440\n            timeZone.value = newValInt;\n        }\n    }, {immediate:true})\n    watch(() => formState.slant, newVal => {\n        if (!v$.value.slant.$invalid) slant.value = Number.parseFloat(newVal) * Math.PI/180;\n    }, {immediate: true})\n    watch(() => formState.rotation, newVal => {\n        if (!v$.value.rotation.$invalid) rotation.value = -Number.parseFloat(newVal) * Math.PI / 180;\n    }, { immediate: true })\n    watch(() => formState.gnomonHeight, newVal => {\n        if (!v$.value.gnomonHeight.$invalid) gnomonHeight.value = Number.parseFloat(newVal);\n    }, { immediate: true })\n\n\n    const visibleDeclinationPlots = computed(() => {\n        const plots: InstanceType<typeof PointSundial>[\"$props\"][\"declinationPlots\"] = []\n        if (showEquinoxLine.value) plots.push(\"equinox\");\n        if (showDecemberSolsticeLine.value) plots.push(\"december-solstice\")\n        if (showJuneSolsticeLine.value) plots.push(\"june-solstice\")\n        if (showPolarDayLine.value) plots.push(\"polar-day\")\n        if (showPolarNightLine.value) plots.push(\"polar-night\")\n        return plots\n    })\n\n    /*\n    * Help popups\n    */\n    const instance = getCurrentInstance();\n    let showThreeTimesExplanation = ref(false);\n    function toggleWalkthrough() {\n        const wt = instance?.appContext.config.globalProperties.$tours['walkthrough'];\n        if (!wt) return;\n        if (wt.isRunning.value) {\n            wt.stop()\n        } else {\n            hideAllPoppers()\n            wt.start()\n        }\n    }\n    function hideAllPoppers() {\n        instance?.appContext.config.globalProperties.$tours['walkthrough'].finish()\n        showThreeTimesExplanation.value = false;\n    }\n    function setShowThreeTimesExplanation(show: boolean) {\n        if (show) {\n            hideAllPoppers()\n        }\n        showThreeTimesExplanation.value = show\n    }\n    const threeTimesExplanationPopper = ref();\n    onClickOutside(threeTimesExplanationPopper, () => setShowThreeTimesExplanation(false))\n\n    /**\n     * Set the latitude and longitude when the user clicks on the map.\n     */ \n    let mapImage = ref<HTMLImageElement>();\n    let mapImageIsBeingClicked = ref(false);\n    function setLatLngFromMap(offsetX: number, offsetY: number) {\n        if (mapImage.value) {\n            const longitude = clamp(offsetX / mapImage.value.width * 360 - 180, {min:-180, max:180})\n            const latitude = clamp(90 - offsetY / mapImage.value.height * 180, {min:-90, max:90});\n            formState.longitude = longitude.toFixed(1);\n            formState.latitude = latitude.toFixed(1);\n        }\n    }\n    function mapImageMouseMove(e:MouseEvent) {\n        if (mapImageIsBeingClicked.value) setLatLngFromMap(e.offsetX, e.offsetY)\n    }\n    function mapImageTouchMove(e:TouchEvent) {\n        // for touchscreens\n        const rect = mapImage.value?.getBoundingClientRect()\n        if (!rect) return\n        const touch = e.touches[0]\n        setLatLngFromMap(touch.clientX - rect.left, touch.clientY - rect.top)\n\n    }\n    function mapImageStartClicking() {\n        mapImageIsBeingClicked.value = true;\n    }\n    function mapImageClick(e:MouseEvent) {\n        setLatLngFromMap(e.offsetX, e.offsetY)\n    }\n\n    // global mouse released fn\n    onMounted(() => {\n        window.addEventListener(\"mouseup\", () => {\n            mapImageIsBeingClicked.value = false;\n        })\n    })\n\n    // get the dimensions of the sidebar for layout\n    let sidebarDims = ref({ clientWidth: 0, clientHeight: 0 });\n    const sidebar = ref<HTMLDivElement>();\n    const sidebarResizeObserver = new ResizeObserver(() => {\n        const clientWidth = sidebar.value?.clientWidth ?? 0;\n        const clientHeight = sidebar.value?.clientHeight ?? 0;\n        sidebarDims.value = { clientWidth, clientHeight }\n    })\n    onMounted(() => {\n        sidebarResizeObserver.observe(sidebar.value as HTMLDivElement);\n    })\n\n\n    // set the time zone as the user clicks the checkbox\n    watch(() => autoSelectTimeZone.value, value => {\n        if (value) {\n            formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n        }\n    })\n\n    function timeAdvanceButtonClicked() {\n        if (timeAdvanceSpeed.value == 0) {\n            timeAdvanceSpeed.value = 1\n        } else {\n            timeAdvanceSpeed.value *= 4\n            if (timeAdvanceSpeed.value > 16) {\n                timeAdvanceSpeed.value = 0\n            }\n        }\n    }\n    function advanceTime(mins:number) {\n        localTime.value += mins\n        if (localTime.value >= 1440) {\n            localTime.value %= 1440\n            day.value = (day.value + 1) % 365\n        }\n    }\n\n    /**\n     * computed values\n     */\n    const sundialRotation = computed(() => new Euler(Math.abs(slant.value), rotation.value + (slant.value < 0 ? Math.PI : 0), 0, \"YXZ\"));\n    /** relative to sundial origin and rotation */\n    const gnomonRelativePosition = computed(() => new Vector3(0, gnomonHeight.value, 0));\n    const nodusRelativePosition = computed(() => new Vector3(0, gnomonHeight.value, 0));\n    /** convert local time to UTC +0 */\n    const time = computed(() => (((localTime.value - timeZone.value) % 1440) + 1440) % 1440)\n    const sunHorizontalCoords = computed(() => calculateSunHorizontalCoordsFromUTC(day.value, time.value, latitude.value, longitude.value));\n    const sunCoords = computed(() => horizontalToActualCoords(sunHorizontalCoords.value.azimuth, sunHorizontalCoords.value.altitude))\n    // let gnomonRotation = computed(() => (90-latitude.value)*Math.PI/180);\n    const isDaytime = computed(() => sunHorizontalCoords.value.altitude >= 0);\n    const statusTextColor = computed(() => isDaytime.value || alwaysDaySkyColor.value ? \"black\" : \"white\")\n    const timeText = computed(() => timeToString(localTime.value))\n    const dateText = computed(() => dateToString(day.value));\n    // mst is within 1 second of UTC at 0 longitude so this is fine\n    const meanSolarTime = computed(() => time.value + ((longitude.value/360)*24*60));\n    const meanSolarTimeText = computed(() => timeToString(meanSolarTime.value));\n    const apparentSolarTime = computed(() => {\n        // use the already-computed sun position. This isn't actualy dependent on the latitude irl. Just seemed the easiest way to do it here.\n        // to calculate this, rotate sun position (90-latitude) anticlockwise about x axis (west to east axis). Then work out projected angle in the x/z (horizontal) plane.\n        const latRad = latitude.value * Math.PI/180;\n        const timeHours = Math.atan2(sunCoords.value.y * Math.cos(latRad) + sunCoords.value.z * Math.sin(latRad), sunCoords.value.x) * 12 / Math.PI + 6;\n        const timeMins = (((timeHours % 24) + 24) % 24) * 60;\n        return timeMins;\n    })\n    const apparentSolarTimeText = computed(() => timeToString(apparentSolarTime.value))\n    const timeZoneText = computed(() => timeZoneToString(timeZone.value))\n    const sunlightIntensity = computed(() => {\n        // a very unscientific way of calculating the apparent sunlight intensity.\n        // stays at the same value until close to sunset (reasoning is that people's eyes adjust during the daytime)\n        if (sunHorizontalCoords.value.altitude > 0.1) return 1;\n        if (sunHorizontalCoords.value.altitude > 0) return sunHorizontalCoords.value.altitude/0.1;\n        return 0;\n    })\n    const skyColor = computed(() => {\n        if (alwaysDaySkyColor.value) {\n            return \"#87CEEB\"\n        }\n        // 1: day, 0: night.\n        let skyColorBrightness = 0\n        if (sunHorizontalCoords.value.altitude > 0.1) skyColorBrightness = 1;\n        else if (sunHorizontalCoords.value.altitude > -0.1) skyColorBrightness = (sunHorizontalCoords.value.altitude+0.1) / 0.2;\n        // make the sky look nice innit\n        return interpolate([\"#02407a\", \"#87CEEB\"])(skyColorBrightness);\n    })\n    /** brightness of sunlight on the sundial face, [0,1] */\n    const sunlightSundialFaceIntensity = computed(() => {\n        const sundialNormal = new Vector3(0, 1, 0).applyEuler(sundialRotation.value)\n        const sunVector = new Vector3(sunCoords.value.x, sunCoords.value.y, sunCoords.value.z)\n        // dot product: a.b = |a||b|cos.\n        // cos is the intensity\n        const intensity = sundialNormal.dot(sunVector) / (sundialNormal.length() * sunVector.length())\n        if (intensity <= 0) return 0\n        else return intensity * sunlightIntensity.value\n    })\n    const gridColorPalette = computed(() => sunlightSundialFaceIntensity.value >= 0.5 ? \"light\" : \"dark\")\n\n\n    const timeAdvanceButtonText = computed(() => {\n        if (timeAdvanceSpeed.value == 0) {\n            return \"\"\n        } else {\n            return timeAdvanceSpeed.value + \"x\"\n        }\n    })\n\n\n    const polarDayDeclination = computed(() => {\n        const decl = calculatePolarDayDeclination(latitude.value);\n        if (Math.abs(decl) * Math.PI/180 > calculateObliquityOfTheEcliptic(8400.5 + 132 /*2023*/)) {\n            return null\n        } else {\n            return decl\n        }\n    })\n    const polarDayDeclinationText = computed(() => polarDayDeclination.value ? polarDayDeclination.value.toFixed(1) + \"\" : \"n/a\")\n    const polarNightDeclinationText = computed(() => polarDayDeclination.value ? (-polarDayDeclination.value).toFixed(1) + \"\" : \"n/a\")\n\n    // previously all this stuff was inlined in the template\n    // move all inline processing stuff in the <Tres...> tag props here because this is necessary to make tresjs render frames on demand\n    // I have done this with most of the 3d components as well\n    const showDialAndGnomonSundial = computed(() => sundialType.value === \"dialAndGnomon\")\n    const showPointSundial = computed(() => sundialType.value === \"pointSundial\")\n    const sunCoordsArray = computed<[number, number, number]>(() => [sunCoords.value.x, sunCoords.value.y, sunCoords.value.z])\n    const directionalLightIntensity = computed(() => sunRaysPassThroughEarth.value ? 1 : sunlightIntensity.value)\n    const cameraXOffset = computed(() => -(sidebarDims.value.clientWidth)/2)\n    const gridHelperArgs = [50, 50, '#AAAAAA', '#AAAAAA'] as const\n    const gridHelperPosition = [0, -8, 0] as const\n    const compassCameraPosition = [0, 0, 10] as const\n    const compassCameraLookAt = [0, 0, 0] as const\n\n\nreturn (_ctx: any,_cache: any) => {\n  const _component_v_tour = _resolveComponent(\"v-tour\")!\n  const _component_TresPerspectiveCamera = _resolveComponent(\"TresPerspectiveCamera\")!\n  const _component_TresOrthographicCamera = _resolveComponent(\"TresOrthographicCamera\")!\n  const _component_TresDirectionalLight = _resolveComponent(\"TresDirectionalLight\")!\n  const _component_TresAmbientLight = _resolveComponent(\"TresAmbientLight\")!\n  const _component_TresGridHelper = _resolveComponent(\"TresGridHelper\")!\n\n  return (_openBlock(), _createElementBlock(_Fragment, null, [\n    _createVNode(_component_v_tour, {\n      name: \"walkthrough\",\n      steps: _unref(walkthroughSteps),\n      options: {\n        labels: {\n            buttonSkip: 'Close',\n            buttonPrevious: 'Previous',\n            buttonNext: 'Next',\n            buttonStop: 'Finish'\n        }\n    }\n    }, null, 8, [\"steps\"]),\n    _createElementVNode(\"div\", _hoisted_1, [\n      _createVNode(_unref(TresCanvas), {\n        \"clear-color\": skyColor.value,\n        shadows: \"\",\n        shadowMapType: _unref(BasicShadowMap),\n        \"render-mode\": \"on-demand\",\n        id: \"sundial\"\n      }, {\n        default: _withCtx(() => [\n          _createVNode(_component_TresPerspectiveCamera),\n          _createVNode(_component_TresOrthographicCamera),\n          _createVNode(DialAndGnomonSundial, {\n            show: showDialAndGnomonSundial.value,\n            latitude: _unref(latitude),\n            longitude: _unref(longitude),\n            origin: _unref(sundialOrigin),\n            rotation: sundialRotation.value,\n            \"gnomon-position\": gnomonRelativePosition.value,\n            radius: traditionalSundialRadius,\n            hourLineStyle: _unref(traditionalSundialHourLineStyle),\n            \"time-zone\": _unref(timeZone),\n            numeralDistanceFromSundialOrigin: numeralDistanceFromSundialOrigin,\n            showGrid: _unref(showSundialFaceGrid),\n            gridColorPalette: gridColorPalette.value\n          }, null, 8, [\"show\", \"latitude\", \"longitude\", \"origin\", \"rotation\", \"gnomon-position\", \"hourLineStyle\", \"time-zone\", \"showGrid\", \"gridColorPalette\"]),\n          _createVNode(PointSundial, {\n            show: showPointSundial.value,\n            latitude: _unref(latitude),\n            longitude: _unref(longitude),\n            origin: _unref(sundialOrigin),\n            rotation: sundialRotation.value,\n            \"gnomon-position\": nodusRelativePosition.value,\n            radius: pointSundialRadius,\n            hourLineStyle: _unref(pointShadowTraceHourLineStyle),\n            \"time-zone\": _unref(timeZone),\n            declinationPlots: visibleDeclinationPlots.value,\n            localTime: _unref(localTime),\n            day: _unref(day),\n            showGrid: _unref(showSundialFaceGrid),\n            gridColorPalette: gridColorPalette.value\n          }, null, 8, [\"show\", \"latitude\", \"longitude\", \"origin\", \"rotation\", \"gnomon-position\", \"hourLineStyle\", \"time-zone\", \"declinationPlots\", \"localTime\", \"day\", \"showGrid\", \"gridColorPalette\"]),\n          _createVNode(SunObject, { position: sunCoords.value }, null, 8, [\"position\"]),\n          _createVNode(_component_TresDirectionalLight, {\n            position: sunCoordsArray.value,\n            intensity: directionalLightIntensity.value,\n            \"shadow-mapSize-width\": 2048,\n            \"shadow-mapSize-height\": 2048,\n            \"cast-shadow\": \"\"\n          }, null, 8, [\"position\", \"intensity\"]),\n          _createVNode(_component_TresAmbientLight, { color: \"#AAAAAA\" }),\n          _createVNode(_component_TresGridHelper, {\n            args: gridHelperArgs,\n            position: gridHelperPosition\n          }),\n          _createVNode(CameraHelper, {\n            \"x-offset\": cameraXOffset.value,\n            \"zoom-per-second\": _unref(currentZoomPerSecond),\n            onCameraQuaternionChange: _cache[0] || (_cache[0] = q => _isRef(cameraQuaternion) //@ts-ignore\n ? cameraQuaternion.value = q.clone() : cameraQuaternion = q.clone()),\n            onOnAdvanceTime: advanceTime,\n            \"time-advance-speed\": _unref(timeAdvanceSpeed),\n            target: _unref(cameraTarget),\n            sundialOrigin: _unref(sundialOrigin),\n            sundialRotation: sundialRotation.value,\n            snapCamera: _unref(snapCamera)\n          }, null, 8, [\"x-offset\", \"zoom-per-second\", \"time-advance-speed\", \"target\", \"sundialOrigin\", \"sundialRotation\", \"snapCamera\"]),\n          _createVNode(RendererHelper)\n        ]),\n        _: 1\n      }, 8, [\"clear-color\", \"shadowMapType\"])\n    ]),\n    _createElementVNode(\"div\", _hoisted_2, [\n      _createElementVNode(\"div\", {\n        id: \"sidebar\",\n        ref_key: \"sidebar\",\n        ref: sidebar\n      }, [\n        _createElementVNode(\"div\", _hoisted_3, [\n          _createElementVNode(\"a\", {\n            class: \"sidebar_link\",\n            onClick: _cache[1] || (_cache[1] = e => {e.preventDefault(); toggleWalkthrough()}),\n            href: \"javascript:void(0)\"\n          }, \"walkthrough\"),\n          _cache[85] || (_cache[85] = _createTextVNode(\"  \", -1)),\n          _cache[86] || (_cache[86] = _createElementVNode(\"a\", {\n            class: \"sidebar_link\",\n            href: \"https://github.com/tpeach90/sundials/\",\n            style: {\"text-decoration\":\"none\"},\n            target: \"_blank\",\n            title: \"Source code on github.com\"\n          }, [\n            _createElementVNode(\"span\", { style: {\"text-decoration\":\"underline\"} }, \"code\"),\n            _createElementVNode(\"img\", {\n              src: _imports_0,\n              style: {\"height\":\"1em\",\"margin-left\":\"0.2em\"},\n              alt: \"GitHub logo\"\n            })\n          ], -1)),\n          _cache[87] || (_cache[87] = _createElementVNode(\"h2\", null, \"Coordinates\", -1)),\n          _createElementVNode(\"div\", _hoisted_4, [\n            _createElementVNode(\"div\", _hoisted_5, [\n              _createElementVNode(\"div\", _hoisted_6, [\n                _cache[52] || (_cache[52] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Latitude/\", -1)),\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"small_input\",\n                  \"onUpdate:modelValue\": _cache[2] || (_cache[2] = ($event: any) => ((_unref(v$).latitude.$model) = $event))\n                }, null, 512), [\n                  [_vModelText, _unref(v$).latitude.$model]\n                ]),\n                (_unref(v$).latitude.$dirty && _unref(v$).latitude.$invalid)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, _toDisplayString(_unref(v$).latitude.$errors[0].$message), 1))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_8, [\n                _cache[53] || (_cache[53] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Longitude/\", -1)),\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"small_input\",\n                  \"onUpdate:modelValue\": _cache[3] || (_cache[3] = ($event: any) => ((_unref(v$).longitude.$model) = $event))\n                }, null, 512), [\n                  [_vModelText, _unref(v$).longitude.$model]\n                ]),\n                (_unref(v$).longitude.$dirty &&_unref(v$).longitude.$invalid)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, _toDisplayString(_unref(v$).longitude.$errors[0].$message), 1))\n                  : _createCommentVNode(\"\", true)\n              ]),\n              _createElementVNode(\"div\", _hoisted_10, [\n                _cache[54] || (_cache[54] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Time Zone/UTC\", -1)),\n                _withDirectives(_createElementVNode(\"input\", {\n                  class: \"small_input\",\n                  \"onUpdate:modelValue\": _cache[4] || (_cache[4] = ($event: any) => ((_unref(v$).timeZone.$model) = $event))\n                }, null, 512), [\n                  [_vModelText, _unref(v$).timeZone.$model]\n                ]),\n                (_unref(v$).timeZone.$dirty && _unref(v$).timeZone.$invalid)\n                  ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, _toDisplayString(_unref(v$).timeZone.$errors[0].$message), 1))\n                  : _createCommentVNode(\"\", true)\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_12, [\n              _withDirectives(_createElementVNode(\"input\", {\n                style: {\"grid-row\":\"1\",\"grid-column\":\"1\",\"margin-right\":\"10px\",\"height\":\"100%\",\"margin-top\":\"0px\",\"margin-bottom\":\"0px\",\"touch-action\":\"none\"},\n                type: \"range\",\n                min: \"-90\",\n                max: \"90\",\n                step: \"-0.1\",\n                class: \"slider\",\n                orient: \"vertical\",\n                \"onUpdate:modelValue\": _cache[5] || (_cache[5] = ($event: any) => ((_unref(v$).latitude.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).latitude.$model]\n              ]),\n              _createElementVNode(\"div\", _hoisted_13, [\n                _createElementVNode(\"img\", {\n                  src: _imports_1,\n                  id: \"mapImage\",\n                  alt: \"A world map\",\n                  style: {\"grid-row\":\"1\",\"grid-column\":\"2\",\"object-fit\":\"contain\",\"display\":\"block\",\"margin\":\"0px\",\"touch-action\":\"none\"},\n                  draggable: \"false\",\n                  onMousemove: mapImageMouseMove,\n                  onMousedown: mapImageStartClicking,\n                  onTouchstart: mapImageStartClicking,\n                  onTouchmove: mapImageTouchMove,\n                  onClick: mapImageClick,\n                  ref_key: \"mapImage\",\n                  ref: mapImage\n                }, null, 544),\n                _createElementVNode(\"div\", {\n                  id: \"markerPoint\",\n                  style: _normalizeStyle(`top:${(90 - _unref(latitude)) * 100 / 180}%; left:${(_unref(longitude) + 180) * 100 / 360}%`)\n                }, null, 4)\n              ]),\n              _withDirectives(_createElementVNode(\"input\", {\n                style: {\"grid-row\":\"2\",\"grid-column\":\"2\",\"margin-top\":\"10px\",\"margin-left\":\"0px\",\"margin-right\":\"0px\"},\n                type: \"range\",\n                min: \"-180\",\n                max: \"180\",\n                step: \"1\",\n                class: \"slider\",\n                \"onUpdate:modelValue\": _cache[6] || (_cache[6] = ($event: any) => ((_unref(v$).longitude.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).longitude.$model]\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_14, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              id: \"autoSelectTimeZone\",\n              \"onUpdate:modelValue\": _cache[7] || (_cache[7] = ($event: any) => (_isRef(autoSelectTimeZone) ? (autoSelectTimeZone).value = $event : autoSelectTimeZone = $event)),\n              style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n            }, null, 512), [\n              [_vModelCheckbox, _unref(autoSelectTimeZone)]\n            ]),\n            _cache[55] || (_cache[55] = _createElementVNode(\"label\", {\n              for: \"autoSelectTimeZone\",\n              class: \"fieldOption\"\n            }, \"Automatically set time zone\", -1))\n          ]),\n          _cache[88] || (_cache[88] = _createElementVNode(\"br\", null, null, -1)),\n          _cache[89] || (_cache[89] = _createElementVNode(\"h2\", null, \"Sundial Settings\", -1)),\n          _createElementVNode(\"div\", _hoisted_15, [\n            _createElementVNode(\"div\", _hoisted_16, [\n              _cache[57] || (_cache[57] = _createElementVNode(\"label\", {\n                for: \"dialAndGnomon\",\n                style: {\"margin-right\":\"10px\"}\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _imports_2,\n                  style: {\"max-width\":\"50px\"},\n                  alt: \"Traditional sundial icon\"\n                })\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"radio\",\n                  id: \"dialAndGnomon\",\n                  value: \"dialAndGnomon\",\n                  \"onUpdate:modelValue\": _cache[8] || (_cache[8] = ($event: any) => (_isRef(sundialType) ? (sundialType).value = $event : sundialType = $event))\n                }, null, 512), [\n                  [_vModelRadio, _unref(sundialType)]\n                ]),\n                _cache[56] || (_cache[56] = _createElementVNode(\"label\", {\n                  for: \"dialAndGnomon\",\n                  class: \"fieldOption\"\n                }, \" Traditional sundial \", -1))\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_17, [\n              _cache[59] || (_cache[59] = _createElementVNode(\"label\", {\n                for: \"pointSundial\",\n                style: {\"margin-right\":\"10px\"}\n              }, [\n                _createElementVNode(\"img\", {\n                  src: _imports_3,\n                  style: {\"max-width\":\"50px\"},\n                  alt: \"Point shadow trace icon\"\n                })\n              ], -1)),\n              _createElementVNode(\"div\", null, [\n                _withDirectives(_createElementVNode(\"input\", {\n                  type: \"radio\",\n                  id: \"pointSundial\",\n                  value: \"pointSundial\",\n                  \"onUpdate:modelValue\": _cache[9] || (_cache[9] = ($event: any) => (_isRef(sundialType) ? (sundialType).value = $event : sundialType = $event))\n                }, null, 512), [\n                  [_vModelRadio, _unref(sundialType)]\n                ]),\n                _cache[58] || (_cache[58] = _createElementVNode(\"label\", {\n                  for: \"pointSundial\",\n                  class: \"fieldOption\"\n                }, \" Point shadow trace \", -1))\n              ])\n            ])\n          ]),\n          _cache[90] || (_cache[90] = _createElementVNode(\"br\", null, null, -1)),\n          _createElementVNode(\"div\", _hoisted_18, [\n            _createElementVNode(\"div\", _hoisted_19, [\n              _cache[60] || (_cache[60] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Slant/\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"small_input\",\n                \"onUpdate:modelValue\": _cache[10] || (_cache[10] = ($event: any) => ((_unref(v$).slant.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).slant.$model]\n              ]),\n              (_unref(v$).slant.$dirty && _unref(v$).slant.$invalid)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_20, _toDisplayString(_unref(v$).slant.$errors[0].$message), 1))\n                : _createCommentVNode(\"\", true),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"range\",\n                min: -180,\n                max: 180,\n                step: \"1\",\n                class: \"slider\",\n                \"onUpdate:modelValue\": _cache[11] || (_cache[11] = ($event: any) => ((_unref(v$).slant.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).slant.$model]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_21, [\n              _cache[61] || (_cache[61] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Rotation/\", -1)),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"small_input\",\n                \"onUpdate:modelValue\": _cache[12] || (_cache[12] = ($event: any) => ((_unref(v$).rotation.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).rotation.$model]\n              ]),\n              (_unref(v$).rotation.$dirty && _unref(v$).rotation.$invalid)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_22, _toDisplayString(_unref(v$).rotation.$errors[0].$message), 1))\n                : _createCommentVNode(\"\", true),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"range\",\n                min: -180,\n                max: 180,\n                step: \"1\",\n                class: \"slider\",\n                \"onUpdate:modelValue\": _cache[13] || (_cache[13] = ($event: any) => ((_unref(v$).rotation.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).rotation.$model]\n              ])\n            ]),\n            _createElementVNode(\"div\", _hoisted_23, [\n              _createElementVNode(\"label\", _hoisted_24, _toDisplayString(_unref(sundialType) == \"dialAndGnomon\" ? \"Gnomon\" : \"Nodus\") + \" height\", 1),\n              _withDirectives(_createElementVNode(\"input\", {\n                class: \"small_input\",\n                \"onUpdate:modelValue\": _cache[14] || (_cache[14] = ($event: any) => ((_unref(v$).gnomonHeight.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).gnomonHeight.$model]\n              ]),\n              (_unref(v$).gnomonHeight.$dirty && _unref(v$).gnomonHeight.$invalid)\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_25, _toDisplayString(_unref(v$).gnomonHeight.$errors[0].$message), 1))\n                : _createCommentVNode(\"\", true),\n              _withDirectives(_createElementVNode(\"input\", {\n                type: \"range\",\n                min: 0.5,\n                max: 3,\n                step: \"0.05\",\n                class: \"slider\",\n                \"onUpdate:modelValue\": _cache[15] || (_cache[15] = ($event: any) => ((_unref(v$).gnomonHeight.$model) = $event))\n              }, null, 512), [\n                [_vModelText, _unref(v$).gnomonHeight.$model]\n              ])\n            ])\n          ]),\n          _createElementVNode(\"div\", _hoisted_26, [\n            _cache[72] || (_cache[72] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Hour lines\", -1)),\n            (_unref(sundialType) == 'dialAndGnomon')\n              ? (_openBlock(), _createElementBlock(\"div\", _hoisted_27, [\n                  _createElementVNode(\"div\", _hoisted_28, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"radio\",\n                      id: \"standardLines\",\n                      value: \"standard\",\n                      \"onUpdate:modelValue\": _cache[16] || (_cache[16] = ($event: any) => (_isRef(traditionalSundialHourLineStyle) ? (traditionalSundialHourLineStyle).value = $event : traditionalSundialHourLineStyle = $event))\n                    }, null, 512), [\n                      [_vModelRadio, _unref(traditionalSundialHourLineStyle)]\n                    ]),\n                    _cache[62] || (_cache[62] = _createElementVNode(\"label\", {\n                      for: \"standardLines\",\n                      class: \"fieldOption\"\n                    }, \"Adjusted for time zone and longitude\", -1))\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_29, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"radio\",\n                      id: \"solarLines\",\n                      value: \"solar\",\n                      \"onUpdate:modelValue\": _cache[17] || (_cache[17] = ($event: any) => (_isRef(traditionalSundialHourLineStyle) ? (traditionalSundialHourLineStyle).value = $event : traditionalSundialHourLineStyle = $event))\n                    }, null, 512), [\n                      [_vModelRadio, _unref(traditionalSundialHourLineStyle)]\n                    ]),\n                    _cache[63] || (_cache[63] = _createElementVNode(\"label\", {\n                      for: \"solarLines\",\n                      class: \"fieldOption\"\n                    }, \"Apparent solar time\", -1))\n                  ])\n                ]))\n              : (_unref(sundialType)=='pointSundial')\n                ? (_openBlock(), _createElementBlock(\"div\", _hoisted_30, [\n                    _cache[70] || (_cache[70] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Modern hours\", -1)),\n                    _createElementVNode(\"div\", _hoisted_31, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"radio\",\n                        id: \"pstModernLocal\",\n                        value: \"modern-local\",\n                        \"onUpdate:modelValue\": _cache[18] || (_cache[18] = ($event: any) => (_isRef(pointShadowTraceHourLineStyle) ? (pointShadowTraceHourLineStyle).value = $event : pointShadowTraceHourLineStyle = $event))\n                      }, null, 512), [\n                        [_vModelRadio, _unref(pointShadowTraceHourLineStyle)]\n                      ]),\n                      _cache[64] || (_cache[64] = _createElementVNode(\"label\", {\n                        for: \"pstModernLocal\",\n                        class: \"fieldOption\"\n                      }, \"Local standard time\", -1))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_32, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"radio\",\n                        id: \"pstModernMeanSolar\",\n                        value: \"modern-mean-solar\",\n                        \"onUpdate:modelValue\": _cache[19] || (_cache[19] = ($event: any) => (_isRef(pointShadowTraceHourLineStyle) ? (pointShadowTraceHourLineStyle).value = $event : pointShadowTraceHourLineStyle = $event))\n                      }, null, 512), [\n                        [_vModelRadio, _unref(pointShadowTraceHourLineStyle)]\n                      ]),\n                      _cache[65] || (_cache[65] = _createElementVNode(\"label\", {\n                        for: \"pstModernMeanSolar\",\n                        class: \"fieldOption\"\n                      }, \"Mean solar time\", -1))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_33, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"radio\",\n                        id: \"pstModernApparentSolar\",\n                        value: \"modern-apparent-solar\",\n                        \"onUpdate:modelValue\": _cache[20] || (_cache[20] = ($event: any) => (_isRef(pointShadowTraceHourLineStyle) ? (pointShadowTraceHourLineStyle).value = $event : pointShadowTraceHourLineStyle = $event))\n                      }, null, 512), [\n                        [_vModelRadio, _unref(pointShadowTraceHourLineStyle)]\n                      ]),\n                      _cache[66] || (_cache[66] = _createElementVNode(\"label\", {\n                        for: \"pstModernApparentSolar\",\n                        class: \"fieldOption\"\n                      }, \"Apparent solar time\", -1))\n                    ]),\n                    _cache[71] || (_cache[71] = _createElementVNode(\"label\", {\n                      class: \"fieldTitle\",\n                      style: {\"margin-top\":\"4px\"}\n                    }, [\n                      _createTextVNode(\" Other \"),\n                      _createElementVNode(\"a\", {\n                        class: \"sidebar_link\",\n                        href: \"https://www.bcgnomonics.com/types-of-hours\",\n                        title: \"Explanation on bcgnomonics.com\",\n                        target: \"_blank\"\n                      }, \"(? - bcgnomonics.com)\")\n                    ], -1)),\n                    _createElementVNode(\"div\", _hoisted_34, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"radio\",\n                        id: \"pstBabylonian\",\n                        value: \"babylonian\",\n                        \"onUpdate:modelValue\": _cache[21] || (_cache[21] = ($event: any) => (_isRef(pointShadowTraceHourLineStyle) ? (pointShadowTraceHourLineStyle).value = $event : pointShadowTraceHourLineStyle = $event))\n                      }, null, 512), [\n                        [_vModelRadio, _unref(pointShadowTraceHourLineStyle)]\n                      ]),\n                      _cache[67] || (_cache[67] = _createElementVNode(\"label\", {\n                        for: \"pstBabylonian\",\n                        class: \"fieldOption\"\n                      }, \"Babylonian hours  hours from sunrise\", -1))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_35, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"radio\",\n                        id: \"pstItalian\",\n                        value: \"italian\",\n                        \"onUpdate:modelValue\": _cache[22] || (_cache[22] = ($event: any) => (_isRef(pointShadowTraceHourLineStyle) ? (pointShadowTraceHourLineStyle).value = $event : pointShadowTraceHourLineStyle = $event))\n                      }, null, 512), [\n                        [_vModelRadio, _unref(pointShadowTraceHourLineStyle)]\n                      ]),\n                      _cache[68] || (_cache[68] = _createElementVNode(\"label\", {\n                        for: \"pstItalian\",\n                        class: \"fieldOption\"\n                      }, \"Italian hours  hours from sunset\", -1))\n                    ]),\n                    _createElementVNode(\"div\", _hoisted_36, [\n                      _withDirectives(_createElementVNode(\"input\", {\n                        type: \"radio\",\n                        id: \"pstSeasonal\",\n                        value: \"seasonal\",\n                        \"onUpdate:modelValue\": _cache[23] || (_cache[23] = ($event: any) => (_isRef(pointShadowTraceHourLineStyle) ? (pointShadowTraceHourLineStyle).value = $event : pointShadowTraceHourLineStyle = $event))\n                      }, null, 512), [\n                        [_vModelRadio, _unref(pointShadowTraceHourLineStyle)]\n                      ]),\n                      _cache[69] || (_cache[69] = _createElementVNode(\"label\", {\n                        for: \"pstSeasonal\",\n                        class: \"fieldOption\"\n                      }, \"Seasonal/unequal hours  sunrise to sunset\", -1))\n                    ])\n                  ]))\n                : _createCommentVNode(\"\", true)\n          ]),\n          (_unref(sundialType) == 'pointSundial')\n            ? (_openBlock(), _createElementBlock(\"div\", _hoisted_37, [\n                _cache[81] || (_cache[81] = _createElementVNode(\"br\", null, null, -1)),\n                _createElementVNode(\"div\", _hoisted_38, [\n                  _cache[80] || (_cache[80] = _createElementVNode(\"label\", { class: \"fieldTitle\" }, \"Constant-declination curves\", -1)),\n                  _createElementVNode(\"div\", _hoisted_39, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      id: \"showJuneSolsticeLine\",\n                      \"onUpdate:modelValue\": _cache[24] || (_cache[24] = ($event: any) => (_isRef(showJuneSolsticeLine) ? (showJuneSolsticeLine).value = $event : showJuneSolsticeLine = $event)),\n                      style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n                    }, null, 512), [\n                      [_vModelCheckbox, _unref(showJuneSolsticeLine)]\n                    ]),\n                    _cache[73] || (_cache[73] = _createElementVNode(\"label\", {\n                      for: \"showJuneSolsticeLine\",\n                      class: \"fieldOption\"\n                    }, \"June solstice (23.44)\", -1))\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_40, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      id: \"showDecemberSolsticeLine\",\n                      \"onUpdate:modelValue\": _cache[25] || (_cache[25] = ($event: any) => (_isRef(showDecemberSolsticeLine) ? (showDecemberSolsticeLine).value = $event : showDecemberSolsticeLine = $event)),\n                      style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n                    }, null, 512), [\n                      [_vModelCheckbox, _unref(showDecemberSolsticeLine)]\n                    ]),\n                    _cache[74] || (_cache[74] = _createElementVNode(\"label\", {\n                      for: \"showDecemberSolsticeLine\",\n                      class: \"fieldOption\"\n                    }, \"December solstice (-23.44)\", -1))\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_41, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      id: \"showEquinoxLine\",\n                      \"onUpdate:modelValue\": _cache[26] || (_cache[26] = ($event: any) => (_isRef(showEquinoxLine) ? (showEquinoxLine).value = $event : showEquinoxLine = $event)),\n                      style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n                    }, null, 512), [\n                      [_vModelCheckbox, _unref(showEquinoxLine)]\n                    ]),\n                    _cache[75] || (_cache[75] = _createElementVNode(\"label\", {\n                      for: \"showEquinoxLine\",\n                      class: \"fieldOption\"\n                    }, \"Equinox (0)\", -1))\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_42, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      id: \"showPolarDayLine\",\n                      \"onUpdate:modelValue\": _cache[27] || (_cache[27] = ($event: any) => (_isRef(showPolarDayLine) ? (showPolarDayLine).value = $event : showPolarDayLine = $event)),\n                      style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n                    }, null, 512), [\n                      [_vModelCheckbox, _unref(showPolarDayLine)]\n                    ]),\n                    _createElementVNode(\"label\", _hoisted_43, [\n                      _cache[76] || (_cache[76] = _createTextVNode(\"Polar day boundary (\", -1)),\n                      _createElementVNode(\"div\", _hoisted_44, _toDisplayString(polarDayDeclinationText.value), 1),\n                      _cache[77] || (_cache[77] = _createTextVNode(\")\", -1))\n                    ])\n                  ]),\n                  _createElementVNode(\"div\", _hoisted_45, [\n                    _withDirectives(_createElementVNode(\"input\", {\n                      type: \"checkbox\",\n                      id: \"showPolarNightLine\",\n                      \"onUpdate:modelValue\": _cache[28] || (_cache[28] = ($event: any) => (_isRef(showPolarNightLine) ? (showPolarNightLine).value = $event : showPolarNightLine = $event)),\n                      style: {\"margin-right\":\"10px\",\"display\":\"inline\"}\n                    }, null, 512), [\n                      [_vModelCheckbox, _unref(showPolarNightLine)]\n                    ]),\n                    _createElementVNode(\"label\", _hoisted_46, [\n                      _cache[78] || (_cache[78] = _createTextVNode(\"Polar night boundary (\", -1)),\n                      _createElementVNode(\"div\", _hoisted_47, _toDisplayString(polarNightDeclinationText.value), 1),\n                      _cache[79] || (_cache[79] = _createTextVNode(\")\", -1))\n                    ])\n                  ])\n                ])\n              ]))\n            : _createCommentVNode(\"\", true),\n          _cache[91] || (_cache[91] = _createElementVNode(\"br\", null, null, -1)),\n          _cache[92] || (_cache[92] = _createElementVNode(\"h2\", null, \"Misc\", -1)),\n          _createElementVNode(\"div\", _hoisted_48, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              id: \"showSundialFaceGrid\",\n              \"onUpdate:modelValue\": _cache[29] || (_cache[29] = ($event: any) => (_isRef(showSundialFaceGrid) ? (showSundialFaceGrid).value = $event : showSundialFaceGrid = $event))\n            }, null, 512), [\n              [_vModelCheckbox, _unref(showSundialFaceGrid)]\n            ]),\n            _cache[82] || (_cache[82] = _createElementVNode(\"label\", {\n              for: \"showSundialFaceGrid\",\n              class: \"fieldOption\"\n            }, \"Sundial grid overlay\", -1))\n          ]),\n          _createElementVNode(\"div\", _hoisted_49, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              id: \"sunRaysPassThroughEarth\",\n              \"onUpdate:modelValue\": _cache[30] || (_cache[30] = ($event: any) => (_isRef(sunRaysPassThroughEarth) ? (sunRaysPassThroughEarth).value = $event : sunRaysPassThroughEarth = $event))\n            }, null, 512), [\n              [_vModelCheckbox, _unref(sunRaysPassThroughEarth)]\n            ]),\n            _cache[83] || (_cache[83] = _createElementVNode(\"label\", {\n              for: \"sunRaysPassThroughEarth\",\n              class: \"fieldOption\"\n            }, \"Light can reach the sundial at night\", -1))\n          ]),\n          _createElementVNode(\"div\", _hoisted_50, [\n            _withDirectives(_createElementVNode(\"input\", {\n              type: \"checkbox\",\n              id: \"alwaysDaySkyColor\",\n              \"onUpdate:modelValue\": _cache[31] || (_cache[31] = ($event: any) => (_isRef(alwaysDaySkyColor) ? (alwaysDaySkyColor).value = $event : alwaysDaySkyColor = $event))\n            }, null, 512), [\n              [_vModelCheckbox, _unref(alwaysDaySkyColor)]\n            ]),\n            _cache[84] || (_cache[84] = _createElementVNode(\"label\", {\n              for: \"alwaysDaySkyColor\",\n              class: \"fieldOption\"\n            }, \"Disable night-time dark sky color\", -1))\n          ]),\n          _cache[93] || (_cache[93] = _createElementVNode(\"br\", null, null, -1)),\n          _cache[94] || (_cache[94] = _createElementVNode(\"footer\", null, [\n            _createElementVNode(\"p\", { id: \"copyrightText\" }, [\n              _createTextVNode(\" Thomas Peach 2025. \"),\n              _createElementVNode(\"a\", {\n                class: \"sidebar_link\",\n                href: \"mailto:thomas.peach546@gmail.com\"\n              }, \"Contact\")\n            ])\n          ], -1))\n        ])\n      ], 512),\n      _createElementVNode(\"div\", _hoisted_51, [\n        _createElementVNode(\"div\", _hoisted_52, [\n          _createVNode(_unref(TresCanvas), { \"render-mode\": \"on-demand\" }, {\n            default: _withCtx(() => [\n              _createVNode(_component_TresAmbientLight, {\n                color: \"#FFFFFF\",\n                intensity: 2\n              }),\n              _createVNode(_component_TresOrthographicCamera, {\n                position: compassCameraPosition,\n                lookAt: compassCameraLookAt,\n                zoom: 15\n              }),\n              _createVNode(CompassObject, { sundialCameraQuaternion: _unref(cameraQuaternion) }, null, 8, [\"sundialCameraQuaternion\"])\n            ]),\n            _: 1\n          }),\n          _cache[95] || (_cache[95] = _createElementVNode(\"div\", {\n            style: {\"position\":\"absolute\",\"width\":\"100%\",\"height\":\"100%\",\"top\":\"0\",\"left\":\"0\"},\n            title: \"North\"\n          }, null, -1))\n        ]),\n        _createElementVNode(\"button\", {\n          class: \"zoomControl\",\n          onKeydown: _cache[32] || (_cache[32] = _withKeys(() => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 / zoomSpeed : currentZoomPerSecond = 1 / zoomSpeed }, [\"enter\"])),\n          onKeyup: _cache[33] || (_cache[33] = _withKeys(() => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }, [\"enter\"])),\n          onMousedown: _cache[34] || (_cache[34] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 / zoomSpeed : currentZoomPerSecond = 1 / zoomSpeed }),\n          onMouseup: _cache[35] || (_cache[35] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }),\n          onPointerleave: _cache[36] || (_cache[36] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }),\n          onTouchstart: _cache[37] || (_cache[37] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 / zoomSpeed : currentZoomPerSecond = 1 / zoomSpeed }),\n          onTouchend: _cache[38] || (_cache[38] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }),\n          title: \"Zoom in\"\n        }, \" + \", 32),\n        _createElementVNode(\"button\", {\n          class: \"zoomControl\",\n          onKeydown: _cache[39] || (_cache[39] = _withKeys(() => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = zoomSpeed : currentZoomPerSecond = zoomSpeed }, [\"enter\"])),\n          onKeyup: _cache[40] || (_cache[40] = _withKeys(() => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }, [\"enter\"])),\n          onMousedown: _cache[41] || (_cache[41] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = zoomSpeed : currentZoomPerSecond = zoomSpeed }),\n          onMouseup: _cache[42] || (_cache[42] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }),\n          onPointerleave: _cache[43] || (_cache[43] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }),\n          onTouchstart: _cache[44] || (_cache[44] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = zoomSpeed : currentZoomPerSecond = zoomSpeed }),\n          onTouchend: _cache[45] || (_cache[45] = () => { _isRef(currentZoomPerSecond) //@ts-ignore\n ? currentZoomPerSecond.value = 1 : currentZoomPerSecond = 1 }),\n          title: \"Zoom out\"\n        }, \" - \", 32),\n        _createElementVNode(\"button\", {\n          class: \"zoomControl\",\n          onClick: _cache[46] || (_cache[46] = () => _isRef(snapCamera) //@ts-ignore\n ? snapCamera.value = !_unref(snapCamera) : snapCamera = !_unref(snapCamera)),\n          title: _unref(snapCamera) ? 'Switch to orbit camera' : 'Switch to snap-to-top camera'\n        }, [\n          _withDirectives(_createElementVNode(\"img\", _hoisted_54, null, 512), [\n            [_vShow, _unref(snapCamera)]\n          ]),\n          _withDirectives(_createElementVNode(\"img\", _hoisted_55, null, 512), [\n            [_vShow, !_unref(snapCamera)]\n          ])\n        ], 8, _hoisted_53)\n      ]),\n      _createElementVNode(\"div\", _hoisted_56, [\n        _createElementVNode(\"div\", _hoisted_57, [\n          _withDirectives(_createElementVNode(\"div\", {\n            class: \"time_display\",\n            onClick: showTimeEntryBox,\n            onKeydown: _withKeys(showTimeEntryBox, [\"space\"]),\n            tabindex: \"0\"\n          }, _toDisplayString(timeText.value), 545), [\n            [_vShow, !_unref(isEditingTime)]\n          ]),\n          _withDirectives(_createElementVNode(\"input\", {\n            ref_key: \"timeEntryBox\",\n            ref: timeEntryBox,\n            class: \"timeEntryBox\",\n            onBlur: hideTimeEntryBox,\n            onKeydown: [\n              _withKeys(hideTimeEntryBox, [\"enter\"]),\n              _withKeys(hideTimeEntryBox, [\"esc\"])\n            ],\n            onInput: updateTimeFromEntryBox,\n            \"onUpdate:modelValue\": _cache[47] || (_cache[47] = ($event: any) => (_isRef(timeEntryValue) ? (timeEntryValue).value = $event : timeEntryValue = $event))\n          }, null, 544), [\n            [_vShow, _unref(isEditingTime)],\n            [_vModelText, _unref(timeEntryValue)]\n          ]),\n          _withDirectives(_createElementVNode(\"div\", _hoisted_58, [\n            _cache[96] || (_cache[96] = _createElementVNode(\"div\", { class: \"subtitle\" }, \"local standard time\", -1)),\n            _createElementVNode(\"div\", _hoisted_59, \"(UTC \" + _toDisplayString(timeZoneText.value) + \") \" + _toDisplayString(isDaytime.value ? \"\" : \"\"), 1)\n          ], 512), [\n            [_vShow, !_unref(isEditingTime)]\n          ])\n        ]),\n        _createElementVNode(\"div\", _hoisted_60, _toDisplayString(meanSolarTimeText.value) + \" mean solar time\", 1),\n        _createElementVNode(\"div\", _hoisted_61, _toDisplayString(apparentSolarTimeText.value) + \" apparent solar time\", 1),\n        _createElementVNode(\"div\", _hoisted_62, [\n          _withDirectives(_createElementVNode(\"input\", {\n            type: \"range\",\n            min: \"0\",\n            max: \"1440\",\n            step: \"10\",\n            class: \"slider\",\n            id: \"time\",\n            \"onUpdate:modelValue\": _cache[48] || (_cache[48] = ($event: any) => (_isRef(localTime) ? (localTime).value = $event : localTime = $event))\n          }, null, 512), [\n            [\n              _vModelText,\n              _unref(localTime),\n              void 0,\n              { number: true }\n            ]\n          ]),\n          _createElementVNode(\"button\", {\n            type: \"button\",\n            onClick: timeAdvanceButtonClicked,\n            id: \"time_advance_button\",\n            title: \"Auto-advance time\"\n          }, _toDisplayString(timeAdvanceButtonText.value), 1)\n        ]),\n        _createVNode(_unref(Popper), {\n          arrow: \"\",\n          placement: \"left\",\n          show: _unref(showThreeTimesExplanation),\n          ref_key: \"threeTimesExplanationPopper\",\n          ref: threeTimesExplanationPopper\n        }, {\n          content: _withCtx(() => [\n            _createElementVNode(\"div\", _hoisted_63, [\n              _createElementVNode(\"div\", _hoisted_64, [\n                _createVNode(ThreeTimesExplanation)\n              ]),\n              _createElementVNode(\"button\", {\n                class: \"v-step__button\",\n                onClick: _cache[49] || (_cache[49] = () => setShowThreeTimesExplanation(false))\n              }, \"Close\")\n            ])\n          ]),\n          default: _withCtx(() => [\n            _createElementVNode(\"a\", {\n              class: \"overlay_link\",\n              href: \"javascript:void(0)\",\n              onClick: _cache[50] || (_cache[50] = () => setShowThreeTimesExplanation(!_unref(showThreeTimesExplanation)))\n            }, \"Why are there 3 times?\")\n          ]),\n          _: 1\n        }, 8, [\"show\"]),\n        _cache[97] || (_cache[97] = _createElementVNode(\"hr\", null, null, -1)),\n        _createElementVNode(\"div\", _hoisted_65, _toDisplayString(dateText.value), 1),\n        _withDirectives(_createElementVNode(\"input\", {\n          type: \"range\",\n          min: \"0\",\n          max: \"364\",\n          step: \"1\",\n          class: \"slider\",\n          id: \"day\",\n          \"onUpdate:modelValue\": _cache[51] || (_cache[51] = ($event: any) => (_isRef(day) ? (day).value = $event : day = $event))\n        }, null, 512), [\n          [\n            _vModelText,\n            _unref(day),\n            void 0,\n            { number: true }\n          ]\n        ])\n      ])\n    ])\n  ], 64))\n}\n}\n\n})","<!-- Main file, controlling the interface and calculations. -->\n\n<script setup lang=\"ts\">\n\n    import { TresCanvas } from '@tresjs/core';\n    import { onClickOutside } from '@vueuse/core'\n    import interpolate from \"color-interpolate\";\n    import { computed, getCurrentInstance, nextTick, onMounted, reactive, ref, watch } from 'vue'\n    import SunObject from './components/SunObject.vue';\n    import { decimal, helpers, maxValue, minValue, required } from '@vuelidate/validators';\n    import useVuelidate from '@vuelidate/core';\n    import { BasicShadowMap, Vector3, Euler, Quaternion } from 'three';\n    import { dateToString, clamp, horizontalToActualCoords, calculateSunHorizontalCoordsFromUTC, timeToString, timeZoneToString, longitudeToTimeZone, stringToTime, calculatePolarDayDeclination, calculateObliquityOfTheEcliptic } from '@/calculations';\n    import DialAndGnomonSundial from './components/DialAndGnomonSundial.vue';\n    import CameraHelper from './components/CameraHelper.vue';\n    import RendererHelper from './components/RendererHelper.vue';\n    import ThreeTimesExplanation from './components/ThreeTimesExplanation.vue';\n    import { tourSteps as walkthroughSteps } from './walkthrough';\n    import Popper from 'vue3-popper';\n    import PointSundial from './components/PointSundial.vue';\n    import CompassObject from \"./components/CompassObject.vue\"\n    \n    /*\n     * Config\n     */\n    const sundialOrigin = new Vector3(0, -0.5, 0);\n    const cameraTarget = new Vector3(0, -1, 0)//sundialOrigin.clone();\n    const traditionalSundialRadius = 5;\n    const pointSundialRadius = 4;\n    const numeralDistanceFromSundialOrigin = 4;\n    const zoomSpeed = 3;\n\n    \n    /*\n     * Independent variables \n     */\n    /** 0 to 24*60 */\n    let localTime = ref<number>(12 * 60);\n    /** 0 to 364 (integer) */\n    let day = ref<number>(162);\n    let longitude = ref<number>(0);\n    let latitude = ref<number>(0);\n    let autoSelectTimeZone = ref(true);\n    /** +/- minutes UTC */\n    let timeZone = ref<number>(0);\n    let sunRaysPassThroughEarth = ref(false);\n    let traditionalSundialHourLineStyle = ref<\"solar\"|\"standard\">(\"standard\");\n    let pointShadowTraceHourLineStyle = ref<\"modern-local\"|\"modern-mean-solar\"|\"modern-apparent-solar\"|\"babylonian\"|\"italian\"|\"seasonal\">(\"modern-local\");\n    let sundialType = ref<\"dialAndGnomon\" | \"pointSundial\">(\"dialAndGnomon\")\n    let slant = ref<number>(0);\n    let rotation = ref<number>(0);\n    /**Camera position multiplier per second. <1 zoom in, >1 zoom out */\n    let currentZoomPerSecond = ref<number>(1);   \n    let gnomonHeight = ref<number>(1)\n    let showEquinoxLine = ref<boolean>(false)\n    let showJuneSolsticeLine = ref<boolean>(true);\n    let showDecemberSolsticeLine = ref<boolean>(true)\n    let showPolarDayLine = ref<boolean>(true);\n    let showPolarNightLine = ref<boolean>(true);\n    let timeAdvanceSpeed = ref<number>(0)\n    let alwaysDaySkyColor = ref<boolean>(false);\n    let showSundialFaceGrid = ref<boolean>(false);\n    let snapCamera = ref<boolean>(false);\n\n    /**\n     * readonly variables\n     */\n    let cameraQuaternion = ref<Quaternion>()\n\n    /*\n     * Allow the time to be input manually.\n     */\n    let isEditingTime = ref<boolean>(false);\n    /** What's in the time manual entry box */\n    let timeEntryValue = ref<string>(\"\");\n    const timeEntryBox = ref<HTMLInputElement | null>(null);   \n    function showTimeEntryBox() {\n        if (isEditingTime.value == false) {\n            isEditingTime.value = true;\n            timeEntryValue.value = timeToString(localTime.value);\n\n            nextTick(() => timeEntryBox.value?.focus());\n            \n        }\n    }\n    function updateTimeFromEntryBox() {\n        if (!timeEntryBox.value) return;\n\n        const newTime = stringToTime(timeEntryBox.value.value);\n        if (isNaN(newTime)) return;\n\n        localTime.value = newTime;\n    }\n    function hideTimeEntryBox() {\n        if (isEditingTime.value == true) {\n            isEditingTime.value = false\n            \n            updateTimeFromEntryBox()\n        }\n    }\n    onClickOutside(timeEntryBox, hideTimeEntryBox)\n\n    // make the 3 times explanation popup disappear when escape key pressed\n    onMounted(() => {\n        document.addEventListener(\"keydown\", (event) => {\n            if (event.key == \"Escape\") {\n                setShowThreeTimesExplanation(false)\n            }\n        })\n    })\n   \n\n\n    /*\n     * Sidebar form validation \n     */\n    const formDefaults = {\n        latitude:\"45.00\",\n        longitude:\"0.00\",\n        timeZone:\"+0:00\",\n        slant:\"0\",\n        rotation:\"0\",\n        gnomonHeight:\"1\"\n    }\n\n    /** used to parse time zone user input*/\n    const timeZoneRegex = /^\\s*([+-]?)\\s*((?:0?[0-9])|1[0-9])(?::((?:0[0-9])|[1-5][0-9]))?\\s*$/;\n\n    let formState = reactive(formDefaults);\n    const formRules = computed<Record<keyof typeof formDefaults, object>>(() => ({\n        latitude: {\n            required,\n            decimal,\n            minValue:minValue(-90),\n            maxValue:maxValue(90)\n        },\n        longitude: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        timeZone: {\n            isATimeZone: helpers.withMessage(\"Your time zone should look like +/-HH(:MM)\", helpers.regex(timeZoneRegex))\n        },\n        slant: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        rotation: {\n            required,\n            decimal,\n            minValue:minValue(-180),\n            maxValue:maxValue(180)\n        },\n        gnomonHeight: {\n            required,\n            decimal,\n            minValue:minValue(0.5),\n            maxValue:maxValue(3)\n        }\n    }))\n    const v$ = useVuelidate(formRules, formState)\n\n    // parse and updadte whenever valid entries are changed in the form.\n    watch(() => formState.longitude, newVal => {\n        if (!v$.value.longitude.$invalid) {\n            longitude.value = Number.parseFloat(newVal);\n            // set the time zone as well.\n            if (autoSelectTimeZone.value) {\n                formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n            }\n        }\n    }, { immediate: true })\n    watch(() => formState.latitude, newVal => {\n        if (!v$.value.latitude.$invalid) latitude.value = Number.parseFloat(newVal);\n    }, {immediate:true})\n    watch(() => formState.timeZone, newVal => {\n        const result = newVal.match(timeZoneRegex);\n        if (result) {\n            const newValInt = (result[1] == \"-\" ? -1 : 1) * (Number.parseInt(result[2]) * 60 + Number.parseInt(result[3] ?? 0));\n            // change the local time so that the global time remains consistent\n            localTime.value = (((localTime.value + newValInt - timeZone.value) % 1440) + 1440) % 1440\n            timeZone.value = newValInt;\n        }\n    }, {immediate:true})\n    watch(() => formState.slant, newVal => {\n        if (!v$.value.slant.$invalid) slant.value = Number.parseFloat(newVal) * Math.PI/180;\n    }, {immediate: true})\n    watch(() => formState.rotation, newVal => {\n        if (!v$.value.rotation.$invalid) rotation.value = -Number.parseFloat(newVal) * Math.PI / 180;\n    }, { immediate: true })\n    watch(() => formState.gnomonHeight, newVal => {\n        if (!v$.value.gnomonHeight.$invalid) gnomonHeight.value = Number.parseFloat(newVal);\n    }, { immediate: true })\n\n\n    const visibleDeclinationPlots = computed(() => {\n        const plots: InstanceType<typeof PointSundial>[\"$props\"][\"declinationPlots\"] = []\n        if (showEquinoxLine.value) plots.push(\"equinox\");\n        if (showDecemberSolsticeLine.value) plots.push(\"december-solstice\")\n        if (showJuneSolsticeLine.value) plots.push(\"june-solstice\")\n        if (showPolarDayLine.value) plots.push(\"polar-day\")\n        if (showPolarNightLine.value) plots.push(\"polar-night\")\n        return plots\n    })\n\n    /*\n    * Help popups\n    */\n    const instance = getCurrentInstance();\n    let showThreeTimesExplanation = ref(false);\n    function toggleWalkthrough() {\n        const wt = instance?.appContext.config.globalProperties.$tours['walkthrough'];\n        if (!wt) return;\n        if (wt.isRunning.value) {\n            wt.stop()\n        } else {\n            hideAllPoppers()\n            wt.start()\n        }\n    }\n    function hideAllPoppers() {\n        instance?.appContext.config.globalProperties.$tours['walkthrough'].finish()\n        showThreeTimesExplanation.value = false;\n    }\n    function setShowThreeTimesExplanation(show: boolean) {\n        if (show) {\n            hideAllPoppers()\n        }\n        showThreeTimesExplanation.value = show\n    }\n    const threeTimesExplanationPopper = ref();\n    onClickOutside(threeTimesExplanationPopper, () => setShowThreeTimesExplanation(false))\n\n    /**\n     * Set the latitude and longitude when the user clicks on the map.\n     */ \n    let mapImage = ref<HTMLImageElement>();\n    let mapImageIsBeingClicked = ref(false);\n    function setLatLngFromMap(offsetX: number, offsetY: number) {\n        if (mapImage.value) {\n            const longitude = clamp(offsetX / mapImage.value.width * 360 - 180, {min:-180, max:180})\n            const latitude = clamp(90 - offsetY / mapImage.value.height * 180, {min:-90, max:90});\n            formState.longitude = longitude.toFixed(1);\n            formState.latitude = latitude.toFixed(1);\n        }\n    }\n    function mapImageMouseMove(e:MouseEvent) {\n        if (mapImageIsBeingClicked.value) setLatLngFromMap(e.offsetX, e.offsetY)\n    }\n    function mapImageTouchMove(e:TouchEvent) {\n        // for touchscreens\n        const rect = mapImage.value?.getBoundingClientRect()\n        if (!rect) return\n        const touch = e.touches[0]\n        setLatLngFromMap(touch.clientX - rect.left, touch.clientY - rect.top)\n\n    }\n    function mapImageStartClicking() {\n        mapImageIsBeingClicked.value = true;\n    }\n    function mapImageClick(e:MouseEvent) {\n        setLatLngFromMap(e.offsetX, e.offsetY)\n    }\n\n    // global mouse released fn\n    onMounted(() => {\n        window.addEventListener(\"mouseup\", () => {\n            mapImageIsBeingClicked.value = false;\n        })\n    })\n\n    // get the dimensions of the sidebar for layout\n    let sidebarDims = ref({ clientWidth: 0, clientHeight: 0 });\n    const sidebar = ref<HTMLDivElement>();\n    const sidebarResizeObserver = new ResizeObserver(() => {\n        const clientWidth = sidebar.value?.clientWidth ?? 0;\n        const clientHeight = sidebar.value?.clientHeight ?? 0;\n        sidebarDims.value = { clientWidth, clientHeight }\n    })\n    onMounted(() => {\n        sidebarResizeObserver.observe(sidebar.value as HTMLDivElement);\n    })\n\n\n    // set the time zone as the user clicks the checkbox\n    watch(() => autoSelectTimeZone.value, value => {\n        if (value) {\n            formState.timeZone = timeZoneToString(longitudeToTimeZone(longitude.value));\n        }\n    })\n\n    function timeAdvanceButtonClicked() {\n        if (timeAdvanceSpeed.value == 0) {\n            timeAdvanceSpeed.value = 1\n        } else {\n            timeAdvanceSpeed.value *= 4\n            if (timeAdvanceSpeed.value > 16) {\n                timeAdvanceSpeed.value = 0\n            }\n        }\n    }\n    function advanceTime(mins:number) {\n        localTime.value += mins\n        if (localTime.value >= 1440) {\n            localTime.value %= 1440\n            day.value = (day.value + 1) % 365\n        }\n    }\n\n    /**\n     * computed values\n     */\n    const sundialRotation = computed(() => new Euler(Math.abs(slant.value), rotation.value + (slant.value < 0 ? Math.PI : 0), 0, \"YXZ\"));\n    /** relative to sundial origin and rotation */\n    const gnomonRelativePosition = computed(() => new Vector3(0, gnomonHeight.value, 0));\n    const nodusRelativePosition = computed(() => new Vector3(0, gnomonHeight.value, 0));\n    /** convert local time to UTC +0 */\n    const time = computed(() => (((localTime.value - timeZone.value) % 1440) + 1440) % 1440)\n    const sunHorizontalCoords = computed(() => calculateSunHorizontalCoordsFromUTC(day.value, time.value, latitude.value, longitude.value));\n    const sunCoords = computed(() => horizontalToActualCoords(sunHorizontalCoords.value.azimuth, sunHorizontalCoords.value.altitude))\n    // let gnomonRotation = computed(() => (90-latitude.value)*Math.PI/180);\n    const isDaytime = computed(() => sunHorizontalCoords.value.altitude >= 0);\n    const statusTextColor = computed(() => isDaytime.value || alwaysDaySkyColor.value ? \"black\" : \"white\")\n    const timeText = computed(() => timeToString(localTime.value))\n    const dateText = computed(() => dateToString(day.value));\n    // mst is within 1 second of UTC at 0 longitude so this is fine\n    const meanSolarTime = computed(() => time.value + ((longitude.value/360)*24*60));\n    const meanSolarTimeText = computed(() => timeToString(meanSolarTime.value));\n    const apparentSolarTime = computed(() => {\n        // use the already-computed sun position. This isn't actualy dependent on the latitude irl. Just seemed the easiest way to do it here.\n        // to calculate this, rotate sun position (90-latitude) anticlockwise about x axis (west to east axis). Then work out projected angle in the x/z (horizontal) plane.\n        const latRad = latitude.value * Math.PI/180;\n        const timeHours = Math.atan2(sunCoords.value.y * Math.cos(latRad) + sunCoords.value.z * Math.sin(latRad), sunCoords.value.x) * 12 / Math.PI + 6;\n        const timeMins = (((timeHours % 24) + 24) % 24) * 60;\n        return timeMins;\n    })\n    const apparentSolarTimeText = computed(() => timeToString(apparentSolarTime.value))\n    const timeZoneText = computed(() => timeZoneToString(timeZone.value))\n    const sunlightIntensity = computed(() => {\n        // a very unscientific way of calculating the apparent sunlight intensity.\n        // stays at the same value until close to sunset (reasoning is that people's eyes adjust during the daytime)\n        if (sunHorizontalCoords.value.altitude > 0.1) return 1;\n        if (sunHorizontalCoords.value.altitude > 0) return sunHorizontalCoords.value.altitude/0.1;\n        return 0;\n    })\n    const skyColor = computed(() => {\n        if (alwaysDaySkyColor.value) {\n            return \"#87CEEB\"\n        }\n        // 1: day, 0: night.\n        let skyColorBrightness = 0\n        if (sunHorizontalCoords.value.altitude > 0.1) skyColorBrightness = 1;\n        else if (sunHorizontalCoords.value.altitude > -0.1) skyColorBrightness = (sunHorizontalCoords.value.altitude+0.1) / 0.2;\n        // make the sky look nice innit\n        return interpolate([\"#02407a\", \"#87CEEB\"])(skyColorBrightness);\n    })\n    /** brightness of sunlight on the sundial face, [0,1] */\n    const sunlightSundialFaceIntensity = computed(() => {\n        const sundialNormal = new Vector3(0, 1, 0).applyEuler(sundialRotation.value)\n        const sunVector = new Vector3(sunCoords.value.x, sunCoords.value.y, sunCoords.value.z)\n        // dot product: a.b = |a||b|cos.\n        // cos is the intensity\n        const intensity = sundialNormal.dot(sunVector) / (sundialNormal.length() * sunVector.length())\n        if (intensity <= 0) return 0\n        else return intensity * sunlightIntensity.value\n    })\n    const gridColorPalette = computed(() => sunlightSundialFaceIntensity.value >= 0.5 ? \"light\" : \"dark\")\n\n\n    const timeAdvanceButtonText = computed(() => {\n        if (timeAdvanceSpeed.value == 0) {\n            return \"\"\n        } else {\n            return timeAdvanceSpeed.value + \"x\"\n        }\n    })\n\n\n    const polarDayDeclination = computed(() => {\n        const decl = calculatePolarDayDeclination(latitude.value);\n        if (Math.abs(decl) * Math.PI/180 > calculateObliquityOfTheEcliptic(8400.5 + 132 /*2023*/)) {\n            return null\n        } else {\n            return decl\n        }\n    })\n    const polarDayDeclinationText = computed(() => polarDayDeclination.value ? polarDayDeclination.value.toFixed(1) + \"\" : \"n/a\")\n    const polarNightDeclinationText = computed(() => polarDayDeclination.value ? (-polarDayDeclination.value).toFixed(1) + \"\" : \"n/a\")\n\n    // previously all this stuff was inlined in the template\n    // move all inline processing stuff in the <Tres...> tag props here because this is necessary to make tresjs render frames on demand\n    // I have done this with most of the 3d components as well\n    const showDialAndGnomonSundial = computed(() => sundialType.value === \"dialAndGnomon\")\n    const showPointSundial = computed(() => sundialType.value === \"pointSundial\")\n    const sunCoordsArray = computed<[number, number, number]>(() => [sunCoords.value.x, sunCoords.value.y, sunCoords.value.z])\n    const directionalLightIntensity = computed(() => sunRaysPassThroughEarth.value ? 1 : sunlightIntensity.value)\n    const cameraXOffset = computed(() => -(sidebarDims.value.clientWidth)/2)\n    const gridHelperArgs = [50, 50, '#AAAAAA', '#AAAAAA'] as const\n    const gridHelperPosition = [0, -8, 0] as const\n    const compassCameraPosition = [0, 0, 10] as const\n    const compassCameraLookAt = [0, 0, 0] as const\n\n</script>\n\n<template>\n\n    <v-tour name=\"walkthrough\" :steps=\"walkthroughSteps\" :options=\"{\n        labels: {\n            buttonSkip: 'Close',\n            buttonPrevious: 'Previous',\n            buttonNext: 'Next',\n            buttonStop: 'Finish'\n        }\n    }\" />\n\n    <!-- setting the canvas to window-size messes up the Line2 rendering for some reason. Instead, make it fill an entire screen div. -->\n    <div style=\"width:100%; height:100%; position: fixed; left:0; top:0\">\n        <TresCanvas :clear-color=\"skyColor\" shadows :shadowMapType=\"BasicShadowMap\" render-mode=\"on-demand\"\n            id=\"sundial\">\n\n            <TresPerspectiveCamera />\n            <TresOrthographicCamera />\n            <DialAndGnomonSundial :show=\"showDialAndGnomonSundial\" :latitude=\"latitude\" :longitude=\"longitude\"\n                :origin=\"sundialOrigin\" :rotation=\"sundialRotation\" :gnomon-position=\"gnomonRelativePosition\"\n                :radius=\"traditionalSundialRadius\" :hourLineStyle=\"traditionalSundialHourLineStyle\"\n                :time-zone=\"timeZone\" :numeralDistanceFromSundialOrigin=\"numeralDistanceFromSundialOrigin\"\n                :showGrid=\"showSundialFaceGrid\" :gridColorPalette=\"gridColorPalette\" />\n\n            <PointSundial :show=\"showPointSundial\" :latitude=\"latitude\" :longitude=\"longitude\" :origin=\"sundialOrigin\"\n                :rotation=\"sundialRotation\" :gnomon-position=\"nodusRelativePosition\" :radius=\"pointSundialRadius\"\n                :hourLineStyle=\"pointShadowTraceHourLineStyle\" :time-zone=\"timeZone\"\n                :declinationPlots=\"visibleDeclinationPlots\" :localTime=\"localTime\" :day=\"day\"\n                :showGrid=\"showSundialFaceGrid\" :gridColorPalette=\"gridColorPalette\" />\n\n            <SunObject :position=\"sunCoords\" />\n\n            <!-- directional light points at :target=\"[0,0,0]\" by default -->\n            <TresDirectionalLight :position=\"sunCoordsArray\" :intensity=\"directionalLightIntensity\"\n                :shadow-mapSize-width=\"2048\" :shadow-mapSize-height=\"2048\" cast-shadow />\n            <TresAmbientLight color=\"#AAAAAA\" />\n            <TresGridHelper :args=\"gridHelperArgs\" :position=\"gridHelperPosition\" />\n            <CameraHelper :x-offset=\"cameraXOffset\" :zoom-per-second=\"currentZoomPerSecond\"\n                @cameraQuaternionChange=\"q => cameraQuaternion = q.clone()\" @on-advance-time=\"advanceTime\"\n                :time-advance-speed=\"timeAdvanceSpeed\" :target=\"cameraTarget\" :sundialOrigin=\"sundialOrigin\"\n                :sundialRotation=\"sundialRotation\" :snapCamera=\"snapCamera\" />\n            <RendererHelper />\n        </TresCanvas>\n    </div>\n\n    <div id=\"overlay\">\n\n        <div id=\"sidebar\" ref=\"sidebar\">\n            <div id=\"sidebarContent\">\n\n                <a class=\"sidebar_link\" @click=\"e => {e.preventDefault(); toggleWalkthrough()}\"\n                    href=\"javascript:void(0)\">walkthrough</a>\n                \n                <a class=\"sidebar_link\" href=\"https://github.com/tpeach90/sundials/\" style=\"text-decoration: none\"\n                    target=\"_blank\" title=\"Source code on github.com\">\n                    <span style=\"text-decoration:underline\">code</span>\n                    <img src=\"./assets/github-mark-white.svg\" style=\"height:1em; margin-left: 0.2em;\"\n                        alt=\"GitHub logo\" />\n                </a>\n\n\n                <!-- Position -->\n                <h2>Coordinates</h2>\n                <div data-v-walkthrough=\"map\">\n                    <div class=\"horizontal_settings\">\n                        <div class=\"setting\">\n                            <label class=\"fieldTitle\">Latitude/</label>\n                            <input class=\"small_input\" v-model=\"v$.latitude.$model\">\n                            <div class=\"error\" v-if=\"v$.latitude.$dirty && v$.latitude.$invalid\">{{\n                                v$.latitude.$errors[0].$message}}</div>\n                        </div>\n                        <div class=\"setting\">\n                            <label class=\"fieldTitle\">Longitude/</label>\n                            <input class=\"small_input\" v-model=\"v$.longitude.$model\">\n                            <div class=\"error\" v-if=\"v$.longitude.$dirty &&v$.longitude.$invalid\">{{\n                                v$.longitude.$errors[0].$message}}</div>\n                        </div>\n                        <div class=\"setting\">\n                            <label class=\"fieldTitle\">Time Zone/UTC</label>\n                            <input class=\"small_input\" v-model=\"v$.timeZone.$model\">\n                            <div class=\"error\" v-if=\"v$.timeZone.$dirty && v$.timeZone.$invalid\">{{\n                                v$.timeZone.$errors[0].$message }}</div>\n                        </div>\n                    </div>\n\n                    <!-- interactive location selector -->\n                    <div\n                        style=\"display: grid; grid-template-columns: min-content auto; grid-template-rows: min-content auto;\">\n                        <input\n                            style=\"grid-row: 1; grid-column: 1; margin-right:10px; height:100%; margin-top: 0px; margin-bottom:0px; touch-action: none\"\n                            type=\"range\" min=\"-90\" max=\"90\" step=\"-0.1\" class=\"slider\" orient=\"vertical\"\n                            v-model=\"v$.latitude.$model\">\n                        <div style=\"position:relative; aspect-ratio: 2 / 1;\">\n                            <img src=\"./assets/world-map-coordinates-correct.png\" id=\"mapImage\" alt=\"A world map\"\n                                style=\"grid-row: 1; grid-column: 2; object-fit: contain; display:block; margin:0px; touch-action: none;\"\n                                draggable=\"false\" @mousemove=\"mapImageMouseMove\" @mousedown=\"mapImageStartClicking\"\n                                @touchstart=\"mapImageStartClicking\" @touchmove=\"mapImageTouchMove\"\n                                @click=\"mapImageClick\" ref=\"mapImage\">\n                            <div id=\"markerPoint\"\n                                :style=\"`top:${(90 - latitude) * 100 / 180}%; left:${(longitude + 180) * 100 / 360}%`\">\n                            </div>\n                        </div>\n\n                        <input style=\"grid-row: 2; grid-column: 2; margin-top:10px; margin-left:0px; margin-right:0px\"\n                            type=\"range\" min=\"-180\" max=\"180\" step=\"1\" class=\"slider\" v-model=\"v$.longitude.$model\">\n                    </div>\n                </div>\n\n\n                <div class=\"setting\" data-v-walkthrough=\"time-zone\">\n                    <input type=\"checkbox\" id=\"autoSelectTimeZone\" v-model=\"autoSelectTimeZone\"\n                        style=\"margin-right: 10px; display: inline;\">\n                    <label for=\"autoSelectTimeZone\" class=\"fieldOption\">Automatically set time zone</label>\n                </div>\n\n                <br>\n                <h2>Sundial Settings</h2>\n\n                <div class=\"setting\" data-v-walkthrough=\"sundial-type\">\n                    <div class=\"checkboxSetting\" style=\"display:flex; flex-direction:row; align-items:center\">\n                        <label for=\"dialAndGnomon\" style=\"margin-right:10px\">\n                            <img src=\"./assets/sundialicon.svg\" style=\"max-width:50px\" alt=\"Traditional sundial icon\" />\n                        </label>\n                        <div>\n                            <input type=\"radio\" id=\"dialAndGnomon\" value=\"dialAndGnomon\" v-model=\"sundialType\">\n                            <label for=\"dialAndGnomon\" class=\"fieldOption\">\n                                Traditional sundial\n                            </label>\n                        </div>\n                    </div>\n                    <div class=\"checkboxSetting\" style=\"display:flex; flex-direction:row; align-items:center\">\n                        <label for=\"pointSundial\" style=\"margin-right:10px\">\n                            <img src=\"./assets/pointshadowtraceicon.svg\" style=\"max-width:50px\"\n                                alt=\"Point shadow trace icon\" />\n                        </label>\n                        <div>\n                            <input type=\"radio\" id=\"pointSundial\" value=\"pointSundial\" v-model=\"sundialType\">\n                            <label for=\"pointSundial\" class=\"fieldOption\">\n                                Point shadow trace\n                            </label>\n                        </div>\n                    </div>\n                </div>\n\n                <br>\n                <div data-v-walkthrough=\"slant-and-rotation\">\n\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">Slant/</label>\n                        <input class=\"small_input\" v-model=\"v$.slant.$model\">\n                        <div class=\"error\" v-if=\"v$.slant.$dirty && v$.slant.$invalid\">{{\n                            v$.slant.$errors[0].$message }}</div>\n                        <input type=\"range\" :min=\"-180\" :max=\"180\" step=\"1\" class=\"slider\" v-model=\"v$.slant.$model\">\n                    </div>\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">Rotation/</label>\n                        <input class=\"small_input\" v-model=\"v$.rotation.$model\">\n                        <div class=\"error\" v-if=\"v$.rotation.$dirty && v$.rotation.$invalid\">{{\n                            v$.rotation.$errors[0].$message }}</div>\n                        <input type=\"range\" :min=\"-180\" :max=\"180\" step=\"1\" class=\"slider\" v-model=\"v$.rotation.$model\">\n                    </div>\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">{{ sundialType == \"dialAndGnomon\" ? \"Gnomon\" : \"Nodus\" }}\n                            height</label>\n                        <input class=\"small_input\" v-model=\"v$.gnomonHeight.$model\">\n                        <div class=\"error\" v-if=\"v$.gnomonHeight.$dirty && v$.gnomonHeight.$invalid\">{{\n                            v$.gnomonHeight.$errors[0].$message }}</div>\n                        <input type=\"range\" :min=\"0.5\" :max=\"3\" step=\"0.05\" class=\"slider\"\n                            v-model=\"v$.gnomonHeight.$model\">\n                    </div>\n                </div>\n\n\n                <div class=\"setting\" data-v-walkthrough=\"hour-lines\">\n                    <label class=\"fieldTitle\">Hour lines</label>\n\n                    <!-- traditional sundial hour lines -->\n                    <div v-if=\"sundialType == 'dialAndGnomon'\">\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"standardLines\" value=\"standard\"\n                                v-model=\"traditionalSundialHourLineStyle\">\n                            <label for=\"standardLines\" class=\"fieldOption\">Adjusted for time zone and longitude</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"solarLines\" value=\"solar\" v-model=\"traditionalSundialHourLineStyle\">\n                            <label for=\"solarLines\" class=\"fieldOption\">Apparent solar time</label>\n                        </div>\n                    </div>\n\n                    <!-- point shadow trace hour line selector-->\n                    <div v-else-if=\"sundialType=='pointSundial'\" style=\"margin-left:10px\">\n                        <label class=\"fieldTitle\">Modern hours</label>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"pstModernLocal\" value=\"modern-local\"\n                                v-model=\"pointShadowTraceHourLineStyle\">\n                            <label for=\"pstModernLocal\" class=\"fieldOption\">Local standard time</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"pstModernMeanSolar\" value=\"modern-mean-solar\"\n                                v-model=\"pointShadowTraceHourLineStyle\">\n                            <label for=\"pstModernMeanSolar\" class=\"fieldOption\">Mean solar time</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"pstModernApparentSolar\" value=\"modern-apparent-solar\"\n                                v-model=\"pointShadowTraceHourLineStyle\">\n                            <label for=\"pstModernApparentSolar\" class=\"fieldOption\">Apparent solar time</label>\n                        </div>\n                        <label class=\"fieldTitle\" style=\"margin-top:4px\">\n                            Other\n                            <a class=\"sidebar_link\" href=\"https://www.bcgnomonics.com/types-of-hours\"\n                                title=\"Explanation on bcgnomonics.com\" target=\"_blank\">(? - bcgnomonics.com)</a>\n                        </label>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"pstBabylonian\" value=\"babylonian\"\n                                v-model=\"pointShadowTraceHourLineStyle\">\n                            <label for=\"pstBabylonian\" class=\"fieldOption\">Babylonian hours  hours from\n                                sunrise</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"pstItalian\" value=\"italian\" v-model=\"pointShadowTraceHourLineStyle\">\n                            <label for=\"pstItalian\" class=\"fieldOption\">Italian hours  hours from sunset</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"radio\" id=\"pstSeasonal\" value=\"seasonal\"\n                                v-model=\"pointShadowTraceHourLineStyle\">\n                            <label for=\"pstSeasonal\" class=\"fieldOption\">Seasonal/unequal hours  sunrise to\n                                sunset</label>\n                        </div>\n                    </div>\n\n                </div>\n\n                <!-- declination lines -->\n                <div v-if=\"sundialType == 'pointSundial'\">\n                    <br>\n                    <div class=\"setting\">\n                        <label class=\"fieldTitle\">Constant-declination curves</label>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"checkbox\" id=\"showJuneSolsticeLine\" v-model=\"showJuneSolsticeLine\"\n                                style=\"margin-right: 10px; display: inline;\">\n                            <label for=\"showJuneSolsticeLine\" class=\"fieldOption\">June solstice (23.44)</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"checkbox\" id=\"showDecemberSolsticeLine\" v-model=\"showDecemberSolsticeLine\"\n                                style=\"margin-right: 10px; display: inline;\">\n                            <label for=\"showDecemberSolsticeLine\" class=\"fieldOption\">December solstice\n                                (-23.44)</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"checkbox\" id=\"showEquinoxLine\" v-model=\"showEquinoxLine\"\n                                style=\"margin-right: 10px; display: inline;\">\n                            <label for=\"showEquinoxLine\" class=\"fieldOption\">Equinox (0)</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"checkbox\" id=\"showPolarDayLine\" v-model=\"showPolarDayLine\"\n                                style=\"margin-right: 10px; display: inline;\">\n                            <label for=\"showPolarDayLine\" class=\"fieldOption\">Polar day boundary (<div\n                                    class=\"variable-readout\">{{ polarDayDeclinationText }}</div>)</label>\n                        </div>\n                        <div class=\"checkboxSetting\">\n                            <input type=\"checkbox\" id=\"showPolarNightLine\" v-model=\"showPolarNightLine\"\n                                style=\"margin-right: 10px; display: inline;\">\n                            <label for=\"showPolarNightLine\" class=\"fieldOption\">Polar night boundary (<div\n                                    class=\"variable-readout\">{{ polarNightDeclinationText }}</div>)</label>\n                        </div>\n                    </div>\n                </div>\n\n\n\n                <br>\n                <h2>Misc</h2>\n                <div class=\"checkboxSetting\">\n                    <input type=\"checkbox\" id=\"showSundialFaceGrid\" v-model=\"showSundialFaceGrid\">\n                    <label for=\"showSundialFaceGrid\" class=\"fieldOption\">Sundial grid overlay</label>\n                </div>\n                <div class=\"checkboxSetting\">\n                    <input type=\"checkbox\" id=\"sunRaysPassThroughEarth\" v-model=\"sunRaysPassThroughEarth\">\n                    <label for=\"sunRaysPassThroughEarth\" class=\"fieldOption\">Light can reach the sundial at\n                        night</label>\n                </div>\n                <div class=\"checkboxSetting\">\n                    <input type=\"checkbox\" id=\"alwaysDaySkyColor\" v-model=\"alwaysDaySkyColor\">\n                    <label for=\"alwaysDaySkyColor\" class=\"fieldOption\">Disable night-time dark sky color</label>\n                </div>\n                <br>\n\n                <footer>\n                    <p id=\"copyrightText\"> Thomas Peach 2025. <a class=\"sidebar_link\"\n                            href=\"mailto:thomas.peach546@gmail.com\">Contact</a></p>\n                </footer>\n            </div>\n\n        </div>\n\n        <!-- top right controls -->\n        <div id=\"topRightControls\">\n            <div id=\"compassContainer\" title=\"North direction\">\n                <TresCanvas render-mode=\"on-demand\">\n                    <TresAmbientLight color=\"#FFFFFF\" :intensity=\"2\" />\n                    <TresOrthographicCamera :position=\"compassCameraPosition\" :lookAt=\"compassCameraLookAt\"\n                        :zoom=\"15\" />\n                    <CompassObject :sundialCameraQuaternion=\"cameraQuaternion\" />\n                </TresCanvas>\n                <div style=\"position:absolute; width:100%; height:100%; top:0; left:0\" title=\"North\"></div>\n            </div>\n            <button class=\"zoomControl\" @keydown.enter=\"() => { currentZoomPerSecond = 1 / zoomSpeed }\"\n                @keyup.enter=\"() => { currentZoomPerSecond = 1 }\"\n                @mousedown=\"() => { currentZoomPerSecond = 1 / zoomSpeed }\"\n                @mouseup=\"() => { currentZoomPerSecond = 1 }\" @pointerleave=\"() => { currentZoomPerSecond = 1 }\"\n                @touchstart=\"() => { currentZoomPerSecond = 1 / zoomSpeed }\"\n                @touchend=\"() => { currentZoomPerSecond = 1 }\" title=\"Zoom in\">\n                +\n            </button>\n            <button class=\"zoomControl\" @keydown.enter=\"() => { currentZoomPerSecond = zoomSpeed }\"\n                @keyup.enter=\"() => { currentZoomPerSecond = 1 }\"\n                @mousedown=\"() => { currentZoomPerSecond = zoomSpeed }\" @mouseup=\"() => { currentZoomPerSecond = 1 }\"\n                @pointerleave=\"() => { currentZoomPerSecond = 1 }\"\n                @touchstart=\"() => { currentZoomPerSecond = zoomSpeed }\" @touchend=\"() => { currentZoomPerSecond = 1 }\"\n                title=\"Zoom out\">\n                -\n            </button>\n            <button class=\"zoomControl\" @click=\"() => snapCamera = !snapCamera\"\n                :title=\"snapCamera ? 'Switch to orbit camera' : 'Switch to snap-to-top camera'\">\n                <img v-show=\"snapCamera\" src=\"./assets/snapmode.svg\" height=\"100%\" alt=\"Snap-to-top camera mode\" />\n                <img v-show=\"!snapCamera\" src=\"./assets/orbitmode.svg\" height=\"100%\" alt=\"Orbit camera mode\" />\n            </button>\n\n        </div>\n\n\n        <!-- status overlay -->\n        <div id=\"status\" data-v-walkthrough=\"status\">\n\n            <div style=\"display:flex; flex-direction: row; align-items: center\">\n                <div class=\"time_display\" v-show=\"!isEditingTime\" @click=\"showTimeEntryBox\"\n                    @keydown.space=\"showTimeEntryBox\" tabindex=\"0\">\n                    {{ timeText }}\n                </div>\n                <input v-show=\"isEditingTime\" ref=\"timeEntryBox\" class=\"timeEntryBox\" @blur=\"hideTimeEntryBox\"\n                    @keydown.enter=\"hideTimeEntryBox\" @keydown.esc=\"hideTimeEntryBox\" @input=\"updateTimeFromEntryBox\"\n                    v-model=\"timeEntryValue\">\n                <div v-show=\"!isEditingTime\"\n                    style=\"display: flex; margin-left:10px; justify-content:end; flex-direction: column; align-items: stretch; padding-block: 9px\">\n                    <div class=\"subtitle\">local standard time</div>\n                    <div class=\"subtitle\">(UTC {{ timeZoneText }}) {{ isDaytime ? \"\" : \"\" }}</div>\n                </div>\n\n\n            </div>\n\n            <div class=\"subtitle\">{{ meanSolarTimeText }} mean solar time</div>\n            <div class=\"subtitle\">{{ apparentSolarTimeText }} apparent solar time</div>\n            <div style=\"display:flex; flex-direction:row\">\n                <input type=\"range\" min=\"0\" max=\"1440\" step=\"10\" class=\"slider\" id=\"time\" v-model.number=\"localTime\">\n                <button type=\"button\" @click=\"timeAdvanceButtonClicked\" id=\"time_advance_button\"\n                    title=\"Auto-advance time\">{{timeAdvanceButtonText}}</button>\n            </div>\n\n            <!-- 3 times explanation -->\n            <Popper arrow placement=\"left\" :show=\"showThreeTimesExplanation\" ref=\"threeTimesExplanationPopper\">\n                <template #content>\n                    <div class=\"popper_content\">\n                        <div style=\"text-align: left\">\n                            <ThreeTimesExplanation />\n                        </div>\n                        <button class=\"v-step__button\" @click=\"() => setShowThreeTimesExplanation(false)\">Close</button>\n                    </div>\n                </template>\n                <a class=\"overlay_link\" href=\"javascript:void(0)\"\n                    @click=\"() => setShowThreeTimesExplanation(!showThreeTimesExplanation)\">Why are there 3\n                    times?</a>\n            </Popper>\n\n            <hr>\n            <div class=\"subtitle\" style=\"margin-top:13px\">{{dateText}}</div>\n            <input type=\"range\" min=\"0\" max=\"364\" step=\"1\" class=\"slider\" id=\"day\" v-model.number=\"day\">\n\n        </div>\n    </div>\n\n\n\n\n\n</template>\n\n<style>\n    #app {\n        font-family: sans-serif;\n        color: white;\n    }\n</style>\n\n<style scoped>\n    #overlay {\n        position:absolute;\n        width: 100%;\n        height:100%;\n        left:0;\n        top:0;\n        overflow: hidden;\n        display:flex;\n        flex-direction: row;\n        justify-content: space-between;\n        align-items: flex-end;\n        pointer-events: none;\n\n    }\n\n    #sidebar {\n        pointer-events:auto;\n        width: 35%;\n        max-width: 500px;\n        min-width:150px;\n        background: rgba(39, 39, 39, 0.95);\n        height: 100%;       \n        overflow-x: hidden;\n        overflow-y: scroll;\n    }\n    #sidebar h2 {\n        font-size: 15pt;\n        background-color: brown\n    }\n\n    #sidebarContent {\n        padding: 20px;\n        width:100%;\n        box-sizing: border-box;\n    }\n\n    #sundial {\n        cursor:grab\n    }\n\n    #sundial:active {\n        cursor:grabbing\n    }\n\n    .horizontal_settings {\n        flex-direction: row;\n        display: flex;\n        flex-wrap: wrap;\n        gap: 20px;\n        row-gap: 10px;\n        margin-bottom: 10px;\n    }\n\n    .horizontal_settings .setting {\n        flex:1\n    }\n\n    .fieldTitle {\n        display: block;\n        margin-bottom: 3px;\n        font-size: 11pt;\n        white-space: nowrap\n    }\n\n    .fieldOption {\n        display: inline;\n        font-size: 11pt;\n    }\n\n    .setting .error {\n        min-width: 100%;\n        width: 0;\n        font-size: 9pt;\n        margin-top: 2px;\n        color: yellow;\n\n    }\n\n    .checkboxSetting label {\n        display: block;\n        margin-bottom: 3px;\n        font-size: 11pt;\n        display: inline\n    }\n\n    .checkboxSetting input {\n        margin-right: 10px;\n        display: inline;\n    }\n\n    .small_input {\n        width: 100%;\n        min-width: 80px;\n        max-width: 100px;\n    }\n\n\n    .slider {\n        width: 100%;\n        opacity: 0.7; /* Fully shown on mouse-over */\n\n    }\n\n    .slider:hover {\n        opacity: 1; /* Fully shown on mouse-over */\n    }\n\n    #status {\n        pointer-events:auto;\n        flex:1;\n        font-family: monospace;\n        padding:10px;\n        text-align: left;\n        color:v-bind(\"statusTextColor\");\n        max-width:400px;\n        width:100%\n    }\n\n    #status hr {\n        border-color: v-bind(\"statusTextColor\");\n    }\n\n    .time_display {\n        font-size: 35pt;\n        width: min-content;\n    }\n\n    .timeEntryBox {\n        font-size: 40pt;\n        width: 100%;\n        font-family: monospace;\n    }\n\n    .time_display:focus, .time_display:hover {\n        color:brown\n    }\n\n    .subtitle {\n        font-size: 11pt;\n    }\n\n    .overlay_link {\n        font-size: 10pt;\n    }\n\n    .sidebar_link {\n        font-size: 10pt;\n        color: rgb(255, 106, 52)\n    }\n    .sidebar_link:active {\n        color: rgb(255, 160, 52)\n    }\n\n    .zoomControl {\n        display:flex;\n        align-items: center;\n        justify-content: center;\n        aspect-ratio: 1 / 1;\n        max-height : 25px;\n        max-width: 25px;\n        background-color:brown;\n        pointer-events: all;\n        margin:5px;\n        border-radius: 5px;\n        font-family: monospace;\n        font-size:15pt;\n        opacity:1;\n        user-select: none;\n        color:white;\n    }\n    .zoomControl:hover {\n        opacity:0.5\n    }\n\n\n    input[type=range] {\n        height: 20px;\n    }\n\n    input[type=range][orient=vertical] {\n        writing-mode: vertical-lr;\n        direction: rtl;\n        appearance: slider-vertical;\n        width: 20px;\n        vertical-align: bottom;\n    }\n\n    #coordBox {\n        background-color: white;\n        width: 100%\n    }\n\n    #markerPoint {\n        width: 10px;\n        height: 10px;\n        transform: translate(-5px, -5px);\n        border-radius: 5px;\n        background-color: brown;\n        grid-row: 1;\n        grid-column: 2;\n        position: absolute;\n        pointer-events: none;\n    }\n\n    #mapImage {\n        width:100%;\n        aspect-ratio: 2 / 1;\n        user-select: none;\n        cursor: crosshair\n    }\n\n    #compassContainer {\n        width:50px;\n        height:50px;\n        position:relative\n    }\n\n    #topRightControls {\n        position:absolute;\n        top:0;\n        right:0;\n        padding:10px;\n        display:flex;\n        align-items:center;\n        flex-direction:column\n    }\n\n    #copyrightText {\n        font-size: 10pt\n    }\n\n    input{\n        accent-color: rgb(201, 84, 42)\n    }\n\n    .variable-readout {\n        color: rgb(235, 164, 83);\n        display:inline\n    }\n\n\n</style>","import script from \"./App.vue?vue&type=script&setup=true&lang=ts\"\nexport * from \"./App.vue?vue&type=script&setup=true&lang=ts\"\n\nimport \"./App.vue?vue&type=style&index=0&id=03535cd8&lang=css\"\nimport \"./App.vue?vue&type=style&index=1&id=03535cd8&scoped=true&lang=css\"\n\nimport exportComponent from \"../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-03535cd8\"]])\n\nexport default __exports__","import { createApp } from 'vue'\nimport App from './App.vue'\nimport './assets/global.css'\nimport Vue3Tour from 'vue3-tour'\n// import 'vue3-tour/dist/vue3-tour.css'\nimport \"./assets/popper.css\"; \n\nconst app = createApp(App)\n\napp.use(Vue3Tour)\n\napp.mount('#app')","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","var deferred = [];\n__webpack_require__.O = function(result, chunkIds, fn, priority) {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every(function(key) { return __webpack_require__.O[key](chunkIds[j]); })) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = function(module) {\n\tvar getter = module && module.__esModule ?\n\t\tfunction() { return module['default']; } :\n\t\tfunction() { return module; };\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = function(exports, definition) {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = function(obj, prop) { return Object.prototype.hasOwnProperty.call(obj, prop); }","// define __esModule on exports\n__webpack_require__.r = function(exports) {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.p = \"/sundials/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t524: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n__webpack_require__.O.j = function(chunkId) { return installedChunks[chunkId] === 0; };\n\n// install a JSONP callback for chunk loading\nvar webpackJsonpCallback = function(parentChunkLoadingFunction, data) {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\t// add \"moreModules\" to the modules object,\n\t// then flag all \"chunkIds\" as loaded and fire callback\n\tvar moduleId, chunkId, i = 0;\n\tif(chunkIds.some(function(id) { return installedChunks[id] !== 0; })) {\n\t\tfor(moduleId in moreModules) {\n\t\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t\t}\n\t\t}\n\t\tif(runtime) var result = runtime(__webpack_require__);\n\t}\n\tif(parentChunkLoadingFunction) parentChunkLoadingFunction(data);\n\tfor(;i < chunkIds.length; i++) {\n\t\tchunkId = chunkIds[i];\n\t\tif(__webpack_require__.o(installedChunks, chunkId) && installedChunks[chunkId]) {\n\t\t\tinstalledChunks[chunkId][0]();\n\t\t}\n\t\tinstalledChunks[chunkId] = 0;\n\t}\n\treturn __webpack_require__.O(result);\n}\n\nvar chunkLoadingGlobal = self[\"webpackChunksundials\"] = self[\"webpackChunksundials\"] || [];\nchunkLoadingGlobal.forEach(webpackJsonpCallback.bind(null, 0));\nchunkLoadingGlobal.push = webpackJsonpCallback.bind(null, chunkLoadingGlobal.push.bind(chunkLoadingGlobal));","// startup\n// Load entry module and return exports\n// This entry module depends on other loaded chunks and execution need to be delayed\nvar __webpack_exports__ = __webpack_require__.O(undefined, [504], function() { return __webpack_require__(6224); })\n__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n"],"names":["_defineComponent","__name","props","position","required","type","Object","transparent","Boolean","default","setup","__props","positionCopy","computed","x","y","z","_ctx","_cache","_component_TresSphereGeometry","_resolveComponent","_component_TresMeshBasicMaterial","_component_TresMesh","_component_TresObject3D","_openBlock","_createBlock","value","_withCtx","_createVNode","args","key","color","opacity","_","__exports__","rad","degrees","Math","PI","calculateSunHorizontalCoordsFromUTC","day","time","latitude","longitude","D_utc","rightAsc","declination","calculateSunPositionInEquitorialCoords","D_tt","D_utc_to_D_tt","epsilon","calculateObliquityOfTheEcliptic","L","calculateMeanLongitudeOfTheSun","D_utc_of_last_midnight","trunc","H","T","GMST","pow","omega","deltaPsi","sin","eqeq","cos","GAST","longRad","latRad","LMST","h","toHorizontalCoords","calculateSunHorizontalCoordsFromApparentSolarTime","hourAngle","calculateSunHorizontalCoordsFromBabylonianTime","options","abs","clampBounds","min","minDeclination","max","maxDeclination","sunriseEstDeclination","clamp","sunriseHourAngle","calculateSunsetHourAngleNoNull","currentHourAngle","currentDeclination","calculateSunHorizontalCoordsFromItalianTime","sunsetHourAngle","calculateSunHorizontalCoordsFromSeasonalTime","D_utc_to_D_tai","D_tai_to_D_tt","D_tai","azimuth","atan2","altitude","asin","g","lambda","calculateSunsetHourAngle","alpha","numerator","denominator","acos","substituteSunsetHourAngle","horizontalToActualCoords","multiplyer","sunPosAtEquinox","timeAngle","Vector3","calculateShadowDirection","plateNorm","sunPos","style","norm1","clone","cross","shadowDir","calculatePolarDayDeclination","timeToString","hours","floor","toString","padStart","minutes","stringToTime","str","result","match","NaN","Number","parseInt","dateToString","dateObj","Date","parse","toLocaleDateString","month","timeZoneToString","timeZone","symbol","mins","infiniteLineIntersectWithPlaneWithDir","plane","linePoint","lineDirection","ray","Ray","intersection","intersectPlane","dir","point","ray2","multiplyScalar","infiniteLineIntersectWithPlane","ptWithDir","infiniteLineIntersectWithSphereParameters","sphereOrigin","sphereRadius","c","distanceToSquared","b","sub","multiply","dot","a","length","discriminant","sqrt","longitudeToTimeZone","round","vertIntersectPlanes","p1","p2","p3","n1","normal","n2","n3","x1","coplanarPoint","x2","x3","f1","crossVectors","f2","f3","det","Matrix3","set","determinant","vectorSum","add","planeIntersection","nonNullSequence","arr","filter","seq","firstNullLoc","indexOf","j","el","push","padWithRepeatedLastElement","numToPad","lastValue","k","extractCloseAndPadSequence","placeholder","dontClose","line","val","bounds","assertUnreachable","Error","text","String","castShadow","receiveShadow","size","visible","textHeight","rotation","_component_TresMeshPhongMaterial","_Suspense","_unref","Text3D","font","height","center","_createTextVNode","_toDisplayString","sundialRotation","show","origin","radius","colorPalette","minorLineDivisions","majorLineDivisions","minorLineGridHelperArgsLight","Color","majorLineGridHelperArgsLight","minorLineGridHelperArgsDark","majorLineGridHelperArgsDark","lightGridsVisible","darkGridsVisible","_component_TresGridHelper","_createElementBlock","_Fragment","gnomonPosition","hourLineStyle","numeralDistanceFromSundialOrigin","showGrid","gridColorPalette","freezeProps","ref","watch","newValue","immediate","relativeGnomonRotation","gnomonCorrectedRotation","mat","Matrix4","makeRotationFromEuler","invert","Euler","setFromRotationMatrix","sundialNormal","applyEuler","gnomonAbsolutePosition","stylePlateIntersection","Plane","translate","rayDir","stylePlateIntersectionPoint","stylePlateIntersectionPointOrder","hourLineHours","Array","keys","hourLineTimeAngles","map","i","offsetHour","hourLineDirections","hourLinesCalculationMethod","distanceTo","hourLinePoints","gnomon1","gnomonDir","gnomon2","pointOutsidePlate","projectOnPlane","normalize","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","hourLineSundialSphereIntersectionParameters","hour","lambdas","plateToHourLineHeight","hourLines","lineDir","labelPoint","labelSphereIntersectLambdas","applyMatrix4","toArray","label","points","rotationCopy","plateGeometryArgs","sundialFaceOriginRaised","_component_TresCylinderGeometry","SundialFaceGrid","_renderList","Line2","hourLine","SundialLetter","camHeight2d","xOffset","zoomPerSecond","timeAdvanceSpeed","target","sundialOrigin","snapCamera","emits","emit","__emit","camera","sizes","renderer","invalidate","cameras","setCameraActive","useTresContext","width","zoomMultiple","setViewOffset","onBeforeRender","pause","resume","useLoop","leftoverMinFractionFromLastFrame","delta","zoomThisFrame","isOrthographicCamera","zoom","controls2d","update","fractionalMinsToAdd","wholeMins","quaternion","w","oldSundialRotation","controls3d","enabled","cam","isPerspectiveCamera","uuid","OrbitControls","domElement","enableDamping","rotateSpeed","enablePan","camPosition","up","window","innerHeight","MapControls","panSpeed","screenSpacePanning","zoomToCursor","oldNormal","oldPlane","newTarget","getWorldDirection","applyQuaternion","Quaternion","setFromEuler","setComponent","newNormal","newPosition","setPixelRatio","devicePixelRatio","localClippingEnabled","script","render","tourSteps","content","params","placement","enableScrolling","highlight","vertexColors","lineWidth","worldUnits","alphaToCoverage","dashed","dashSize","gapSize","dashScale","dashOffset","clippingPlanes","expose","__expose","getInterpolatedVertexColors","numPoints","from","fill","normalizeColor","numSegments","mappedColors","closed","iColors","divisions","colorIndex","lerp","lineMaterial","LineMaterial","lineGeometry","LineGeometry","hasVertexColors","isArray","updateLineMaterial","material","linewidth","needsUpdate","updateLineGeometry","geometry","pValues","p","Vector2","flat","setPositions","colors","setColors","computeLineDistances","resolution","onUnmounted","dispose","lineRef","shallowRef","instance","_component_primitive","object","numeralDistanceFromDeclinationLine","hourLineDigitMinDistanceToInsideBorder","crosshairSize","declinationPlots","localTime","platePlane","plateToPlotVector","projectionOnPlate","horizontalCoords","hc","polarDayDeclination","polarNightDeclination","hourLinePlotRangeType","includes","hourLinePlotHours","hourLinePlotDays","hourLinePlotPoints","hourLinePlotLines","entries","_line","declinationPlotHours","obliquityOfTheEcliptic2023","polarDayAndNightVisible","declinationPlotsParams","plateIntersection","relativeClippingPlanesArgs","planes","declinationLineOfNumerals","intersect","intersectsPlane","hourLineDirectionMultiplyer","subVectors","declinationLineOfNumeralsDay","hourLineDigitPositions","pos","constant","distanceToPoint","firstHourNumber","hourLineDigits","fontSize","nodusHeight","crosshairLocation","lineToNodusPoints","gnomonPositionCopy","crosshairLocationNonNull","crosshairLocationExists","crosshairPoints0","crosshairPoints1","_component_TresBoxGeometry","Line2Clipped","yearlyPlot","digit","sundialCameraQuaternion","constCompassQuaternion","GLTFModel","path","_hoisted_1","_hoisted_2","id","_hoisted_3","_hoisted_4","_hoisted_5","class","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","_hoisted_11","_hoisted_12","_hoisted_13","_hoisted_14","_hoisted_15","_hoisted_16","_hoisted_17","_hoisted_18","_hoisted_19","_hoisted_20","_hoisted_21","_hoisted_22","_hoisted_23","_hoisted_24","_hoisted_25","_hoisted_26","_hoisted_27","_hoisted_28","_hoisted_29","_hoisted_30","_hoisted_31","_hoisted_32","_hoisted_33","_hoisted_34","_hoisted_35","_hoisted_36","_hoisted_37","_hoisted_38","_hoisted_39","_hoisted_40","_hoisted_41","_hoisted_42","_hoisted_43","for","_hoisted_44","_hoisted_45","_hoisted_46","_hoisted_47","_hoisted_48","_hoisted_49","_hoisted_50","_hoisted_51","_hoisted_52","title","_hoisted_53","_hoisted_54","src","_imports_4","alt","_hoisted_55","_imports_5","_hoisted_56","_hoisted_57","_hoisted_58","_hoisted_59","_hoisted_60","_hoisted_61","_hoisted_62","_hoisted_63","_hoisted_64","_hoisted_65","traditionalSundialRadius","pointSundialRadius","zoomSpeed","_useCssVars","statusTextColor","cameraTarget","autoSelectTimeZone","sunRaysPassThroughEarth","traditionalSundialHourLineStyle","pointShadowTraceHourLineStyle","sundialType","slant","currentZoomPerSecond","gnomonHeight","showEquinoxLine","showJuneSolsticeLine","showDecemberSolsticeLine","showPolarDayLine","showPolarNightLine","alwaysDaySkyColor","showSundialFaceGrid","cameraQuaternion","isEditingTime","timeEntryValue","timeEntryBox","showTimeEntryBox","nextTick","focus","updateTimeFromEntryBox","newTime","isNaN","hideTimeEntryBox","onClickOutside","onMounted","document","addEventListener","event","setShowThreeTimesExplanation","formDefaults","timeZoneRegex","formState","reactive","formRules","decimal","minValue","maxValue","isATimeZone","helpers","withMessage","regex","v$","useVuelidate","newVal","$invalid","parseFloat","newValInt","visibleDeclinationPlots","plots","getCurrentInstance","showThreeTimesExplanation","toggleWalkthrough","wt","appContext","config","globalProperties","$tours","isRunning","stop","hideAllPoppers","start","finish","threeTimesExplanationPopper","mapImage","mapImageIsBeingClicked","setLatLngFromMap","offsetX","offsetY","toFixed","mapImageMouseMove","e","mapImageTouchMove","rect","getBoundingClientRect","touch","touches","clientX","left","clientY","top","mapImageStartClicking","mapImageClick","sidebarDims","clientWidth","clientHeight","sidebar","sidebarResizeObserver","ResizeObserver","timeAdvanceButtonClicked","advanceTime","observe","gnomonRelativePosition","nodusRelativePosition","sunHorizontalCoords","sunCoords","isDaytime","timeText","dateText","meanSolarTime","meanSolarTimeText","apparentSolarTime","timeHours","timeMins","apparentSolarTimeText","timeZoneText","sunlightIntensity","skyColor","skyColorBrightness","interpolate","sunlightSundialFaceIntensity","sunVector","intensity","timeAdvanceButtonText","decl","polarDayDeclinationText","polarNightDeclinationText","showDialAndGnomonSundial","showPointSundial","sunCoordsArray","directionalLightIntensity","cameraXOffset","gridHelperArgs","gridHelperPosition","compassCameraPosition","compassCameraLookAt","_component_v_tour","_component_TresPerspectiveCamera","_component_TresOrthographicCamera","_component_TresDirectionalLight","_component_TresAmbientLight","name","steps","walkthroughSteps","labels","buttonSkip","buttonPrevious","buttonNext","buttonStop","_createElementVNode","TresCanvas","shadows","shadowMapType","BasicShadowMap","DialAndGnomonSundial","PointSundial","SunObject","CameraHelper","onCameraQuaternionChange","q","_isRef","onOnAdvanceTime","RendererHelper","ref_key","onClick","preventDefault","href","_imports_0","_withDirectives","$event","$model","_vModelText","$dirty","$errors","$message","_createCommentVNode","step","orient","_imports_1","draggable","onMousemove","onMousedown","onTouchstart","onTouchmove","_normalizeStyle","_vModelCheckbox","_imports_2","_vModelRadio","_imports_3","lookAt","CompassObject","onKeydown","_withKeys","onKeyup","onMouseup","onPointerleave","onTouchend","_vShow","tabindex","onBlur","onInput","number","Popper","arrow","ThreeTimesExplanation","app","createApp","App","use","Vue3Tour","mount","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","exports","module","__webpack_modules__","call","m","deferred","O","chunkIds","fn","priority","notFulfilled","Infinity","fulfilled","every","splice","r","n","getter","__esModule","d","definition","o","defineProperty","enumerable","get","globalThis","this","Function","obj","prop","prototype","hasOwnProperty","Symbol","toStringTag","installedChunks","chunkId","webpackJsonpCallback","parentChunkLoadingFunction","data","moreModules","runtime","some","chunkLoadingGlobal","self","forEach","bind","__webpack_exports__"],"sourceRoot":""}